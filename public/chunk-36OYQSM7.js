import{A as Fa,B as Yc,C as $t,D as wn,a as j,b as de,c as Cp,d as N,e as SI,f as Wc,g as MI,h as xI,i as RI,j as NI,k as Tp,l as PI,m as Oa,n as bp,o as Kc,p as OI,q as kI,r as Ap,s as Fe,t as Di,u as _n,v as Qc,w as ka,x as Sp,y as FI,z as VI}from"./chunk-UUEULNQS.js";function LI(n,e){return Object.is(n,e)}var et=null,Zc=!1,Jc=1,zn=Symbol("SIGNAL");function ve(n){let e=et;return et=n,e}function jI(){return et}var La={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rp(n){if(Zc)throw new Error("");if(et===null)return;et.consumerOnSignalRead(n);let e=et.nextProducerIndex++;if(nl(et),e<et.producerNode.length&&et.producerNode[e]!==n&&Va(et)){let t=et.producerNode[e];tl(t,et.producerIndexOfThis[e])}et.producerNode[e]!==n&&(et.producerNode[e]=n,et.producerIndexOfThis[e]=Va(et)?qI(n,et,e):0),et.producerLastReadVersion[e]=n.version}function dN(){Jc++}function UI(n){if(!(Va(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Jc)){if(!n.producerMustRecompute(n)&&!Pp(n)){n.dirty=!1,n.lastCleanEpoch=Jc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Jc}}function BI(n){if(n.liveConsumerNode===void 0)return;let e=Zc;Zc=!0;try{for(let t of n.liveConsumerNode)t.dirty||hN(t)}finally{Zc=e}}function $I(){return et?.consumerAllowSignalWrites!==!1}function hN(n){n.dirty=!0,BI(n),n.consumerMarkedDirty?.(n)}function el(n){return n&&(n.nextProducerIndex=0),ve(n)}function Np(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Va(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)tl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pp(n){nl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(UI(t),r!==t.version))return!0}return!1}function Op(n){if(nl(n),Va(n))for(let e=0;e<n.producerNode.length;e++)tl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function qI(n,e,t){if(HI(n),n.liveConsumerNode.length===0&&zI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=qI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function tl(n,e){if(HI(n),n.liveConsumerNode.length===1&&zI(n))for(let r=0;r<n.producerNode.length;r++)tl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];nl(i),i.producerIndexOfThis[r]=e}}function Va(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function nl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function zI(n){return n.producerNode!==void 0}function GI(n){let e=Object.create(fN);e.computation=n;let t=()=>{if(UI(e),Rp(e),e.value===Xc)throw e.error;return e.value};return t[zn]=e,t}var Mp=Symbol("UNSET"),xp=Symbol("COMPUTING"),Xc=Symbol("ERRORED"),fN=de(j({},La),{value:Mp,dirty:!0,error:null,equal:LI,producerMustRecompute(n){return n.value===Mp||n.value===xp},producerRecomputeValue(n){if(n.value===xp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=xp;let t=el(n),r;try{r=n.computation()}catch(i){r=Xc,n.error=i}finally{Np(n,t)}if(e!==Mp&&e!==Xc&&r!==Xc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function pN(){throw new Error}var WI=pN;function KI(){WI()}function QI(n){WI=n}var gN=null;function YI(n){let e=Object.create(JI);e.value=n;let t=()=>(Rp(e),e.value);return t[zn]=e,t}function kp(n,e){$I()||KI(),n.equal(n.value,e)||(n.value=e,mN(n))}function ZI(n,e){$I()||KI(),kp(n,e(n.value))}var JI=de(j({},La),{equal:LI,value:void 0});function mN(n){n.version++,dN(),BI(n),gN?.()}function te(n){return typeof n=="function"}function Mo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rl=Mo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ci(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof rl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{XI(o)}catch(s){e=e??[],s instanceof rl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)XI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ci(t,e)}remove(e){let{_finalizers:t}=this;t&&Ci(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var Fp=Ue.EMPTY;function il(n){return n instanceof Ue||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function XI(n){te(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xo={setTimeout(n,e,...t){let{delegate:r}=xo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ol(n){xo.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function ja(){}var eD=Vp("C",void 0,void 0);function tD(n){return Vp("E",void 0,n)}function nD(n){return Vp("N",n,void 0)}function Vp(n,e,t){return{kind:n,value:e,error:t}}var Ti=null;function Ro(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!Ti;if(e&&(Ti={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ti;if(Ti=null,t)throw r}}else n()}function rD(n){an.useDeprecatedSynchronousErrorHandling&&Ti&&(Ti.errorThrown=!0,Ti.error=n)}var bi=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,il(e)&&e.add(this)):this.destination=_N}static create(e,t,r){return new Gn(e,t,r)}next(e){this.isStopped?jp(nD(e),this):this._next(e)}error(e){this.isStopped?jp(tD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jp(eD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yN=Function.prototype.bind;function Lp(n,e){return yN.call(n,e)}var Up=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){sl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){sl(r)}else sl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){sl(t)}}},Gn=class extends bi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lp(e.next,o),error:e.error&&Lp(e.error,o),complete:e.complete&&Lp(e.complete,o)}):i=e}this.destination=new Up(i)}};function sl(n){an.useDeprecatedSynchronousErrorHandling?rD(n):ol(n)}function vN(n){throw n}function jp(n,e){let{onStoppedNotification:t}=an;t&&xo.setTimeout(()=>t(n,e))}var _N={closed:!0,next:ja,error:vN,complete:ja};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function Bp(...n){return $p(n)}function $p(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=EN(t)?t:new Gn(t,r,i);return Ro(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iD(r),new r((i,o)=>{let s=new Gn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[No](){return this}pipe(...t){return $p(t)(this)}toPromise(t){return t=iD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function iD(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function wN(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function EN(n){return n&&n instanceof bi||wN(n)&&il(n)}function qp(n){return te(n?.lift)}function se(n){return e=>{if(qp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new Hp(n,e,t,r,i)}var Hp=class extends bi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Po(){return se((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Oo=class extends oe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,qp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return Po()(this)}};var oD=Mo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class n extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new al(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oD}next(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Fp:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,Ci(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new oe;return t.source=this,t}}return n.create=(e,t)=>new al(e,t),n})(),al=class extends Pe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Fp}};var st=class extends Pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ua={now(){return(Ua.delegate||Date).now()},delegate:void 0};var ul=class extends Pe{constructor(e=1/0,t=1/0,r=Ua){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var cl=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var Ba={setInterval(n,e,...t){let{delegate:r}=Ba;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ba;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ko=class extends cl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ba.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ci(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Fo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Fo.now=Ua.now;var Vo=class extends Fo{constructor(e,t=Fo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ai=new Vo(ko);var ll=class extends ko{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var dl=class extends Vo{};var zp=new dl(ll);var Et=new oe(n=>n.complete());function sD(n){return n&&te(n.schedule)}function Gp(n){return n[n.length-1]}function hl(n){return te(Gp(n))?n.pop():void 0}function En(n){return sD(Gp(n))?n.pop():void 0}function aD(n,e){return typeof Gp(n)=="number"?n.pop():e}var fl=n=>n&&typeof n.length=="number"&&typeof n!="function";function pl(n){return te(n?.then)}function gl(n){return te(n[No])}function ml(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function yl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vl=IN();function _l(n){return te(n?.[vl])}function wl(n){return MI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Wc(t.read());if(i)return yield Wc(void 0);yield yield Wc(r)}}finally{t.releaseLock()}})}function El(n){return te(n?.getReader)}function Re(n){if(n instanceof oe)return n;if(n!=null){if(gl(n))return DN(n);if(fl(n))return CN(n);if(pl(n))return TN(n);if(ml(n))return uD(n);if(_l(n))return bN(n);if(El(n))return AN(n)}throw yl(n)}function DN(n){return new oe(e=>{let t=n[No]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CN(n){return new oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function TN(n){return new oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ol)})}function bN(n){return new oe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uD(n){return new oe(e=>{SN(n,e).catch(t=>e.error(t))})}function AN(n){return uD(wl(n))}function SN(n,e){var t,r,i,o;return SI(this,void 0,void 0,function*(){try{for(t=xI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Nt(n,e=0){return se((t,r)=>{t.subscribe(ae(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function qt(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function cD(n,e){return Re(n).pipe(qt(e),Nt(e))}function lD(n,e){return Re(n).pipe(qt(e),Nt(e))}function dD(n,e){return new oe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function hD(n,e){return new oe(t=>{let r;return Rt(t,e,()=>{r=n[vl](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Il(n,e){if(!n)throw new Error("Iterable cannot be null");return new oe(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fD(n,e){return Il(wl(n),e)}function pD(n,e){if(n!=null){if(gl(n))return cD(n,e);if(fl(n))return dD(n,e);if(pl(n))return lD(n,e);if(ml(n))return Il(n,e);if(_l(n))return hD(n,e);if(El(n))return fD(n,e)}throw yl(n)}function ge(n,e){return e?pD(n,e):Re(n)}function Z(...n){let e=En(n);return ge(n,e)}function Lo(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new oe(e?i=>e.schedule(r,0,i):r)}function Wp(n){return!!n&&(n instanceof oe||te(n.lift)&&te(n.subscribe))}var Wn=Mo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:MN}=Array;function xN(n,e){return MN(e)?n(...e):n(e)}function Dl(n){return J(e=>xN(n,e))}var{isArray:RN}=Array,{getPrototypeOf:NN,prototype:PN,keys:ON}=Object;function Cl(n){if(n.length===1){let e=n[0];if(RN(e))return{args:e,keys:null};if(kN(e)){let t=ON(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function kN(n){return n&&typeof n=="object"&&NN(n)===PN}function Tl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $a(...n){let e=En(n),t=hl(n),{args:r,keys:i}=Cl(n);if(r.length===0)return ge([],e);let o=new oe(FN(r,e,i?s=>Tl(i,s):wt));return t?o.pipe(Dl(t)):o}function FN(n,e,t=wt){return r=>{gD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)gD(e,()=>{let l=ge(n[u],e),h=!1;l.subscribe(ae(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function gD(n,e,t){n?Rt(t,n,e):e()}function mD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=b=>l<r?D(b):u.push(b),D=b=>{o&&e.next(b),l++;let A=!1;Re(t(b,h++)).subscribe(ae(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let F=u.shift();s?Rt(e,s,()=>D(F)):D(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return te(e)?We((r,i)=>J((o,s)=>e(r,o,i,s))(Re(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>mD(r,i,n,t)))}function br(n=1/0){return We(wt,n)}function yD(){return br(1)}function jo(...n){return yD()(ge(n,En(n)))}function bl(n){return new oe(e=>{Re(n()).subscribe(e)})}function Kp(...n){let e=hl(n),{args:t,keys:r}=Cl(n),i=new oe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Re(t[h]).subscribe(ae(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Tl(r,a):a),o.complete())}))}});return e?i.pipe(Dl(e)):i}function Qp(...n){let e=En(n),t=aD(n,1/0),r=n;return r.length?r.length===1?Re(r[0]):br(t)(ge(r,e)):Et}function tt(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ar(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ae(t,void 0,void 0,s=>{o=Re(n(s,Ar(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function vD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ae(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Kn(n,e){return te(e)?We(n,e,1):We(n,1)}function VN(n,e=Ai){return se((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(ae(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Sr(n){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qn(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Yp(n){return J(()=>n)}function Zp(n,e=wt){return n=n??LN,se((t,r)=>{let i,o=!0;t.subscribe(ae(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function LN(n,e){return n===e}function Al(n=jN){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jN(){return new Wn}function Si(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ht(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((i,o)=>n(i,o,r)):wt,Qn(1),t?Sr(e):Al(()=>new Wn))}function Uo(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Jp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((i,o)=>n(i,o,r)):wt,Uo(1),t?Sr(e):Al(()=>new Wn))}function qa(){return se((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Mi(n,e){return se(vD(n,e,arguments.length>=2,!0))}function _D(n={}){let{connector:e=()=>new Pe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},D=()=>{let b=s;y(),b?.unsubscribe()};return se((b,A)=>{l++,!p&&!h&&m();let F=u=u??e();A.add(()=>{l--,l===0&&!p&&!h&&(a=Xp(D,i))}),F.subscribe(A),!s&&l>0&&(s=new Gn({next:B=>F.next(B),error:B=>{p=!0,m(),a=Xp(y,t,B),F.error(B)},complete:()=>{h=!0,m(),a=Xp(y,r),F.complete()}}),Re(b).subscribe(s))})(o)}}function Xp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Gn({next:()=>{r.unsubscribe(),n()}});return Re(e(...t)).subscribe(r)}function Sl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,_D({connector:()=>new ul(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xi(...n){let e=En(n);return se((t,r)=>{(e?jo(n,t,e):jo(n,t)).subscribe(r)})}function Oe(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Re(n(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ml(n,e){return te(e)?Oe(()=>n,e):Oe(()=>n)}function eg(n){return se((e,t)=>{Re(n).subscribe(ae(t,()=>t.complete(),ja)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var oC="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(ld(e,t)),this.code=e}};function ld(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ja(n){return{toString:n}.toString()}var xl="__parameters__";function UN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sC(n,e,t){return Ja(()=>{let r=UN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(xl)?u[xl]:Object.defineProperty(u,xl,{value:[]})[xl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var pg=globalThis;function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function BN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Dt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Dt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function wD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var $N=Te({__forward_ref__:Te});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return Dt(this())},n}function It(n){return aC(n)?n():n}function aC(n){return typeof n=="function"&&n.hasOwnProperty($N)&&n.__forward_ref__===Pt}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function dd(n){return ED(n,cC)||ED(n,lC)}function uC(n){return dd(n)!==null}function ED(n,e){return n.hasOwnProperty(e)?n[e]:null}function qN(n){let e=n&&(n[cC]||n[lC]);return e||null}function ID(n){return n&&(n.hasOwnProperty(DD)||n.hasOwnProperty(HN))?n[DD]:null}var cC=Te({\u0275prov:Te}),DD=Te({\u0275inj:Te}),lC=Te({ngInjectableDef:Te}),HN=Te({ngInjectorDef:Te}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dC(n){return n&&!!n.\u0275providers}var zN=Te({\u0275cmp:Te}),GN=Te({\u0275dir:Te}),WN=Te({\u0275pipe:Te}),KN=Te({\u0275mod:Te}),Ul=Te({\u0275fac:Te}),za=Te({__NG_ELEMENT_ID__:Te}),CD=Te({__NG_ENV_ID__:Te});function hd(n){return typeof n=="string"?n:n==null?"":String(n)}function QN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hd(n)}function YN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function om(n,e){throw new X(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),gg;function hC(){return gg}function zt(n){let e=gg;return gg=n,e}function fC(n,e,t){let r=dd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;om(n,"Injector")}var ZN={},Ga=ZN,mg="__NG_DI_FLAG__",Bl="ngTempTokenPath",JN="ngTokenPath",XN=/\n/gm,eP="\u0275",TD="__source",zo;function tP(){return zo}function Mr(n){let e=zo;return zo=n,e}function nP(n,e=le.Default){if(zo===void 0)throw new X(-203,!1);return zo===null?fC(n,void 0,e):zo.get(n,e&le.Optional?null:void 0,e)}function L(n,e=le.Default){return(hC()||nP)(It(n),e)}function V(n,e=le.Default){return L(n,fd(e))}function fd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function yg(n){let e=[];for(let t=0;t<n.length;t++){let r=It(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=rP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function pC(n,e){return n[mg]=e,n.prototype[mg]=e,n}function rP(n){return n[mg]}function iP(n,e,t,r){let i=n[Bl];throw e[TD]&&i.unshift(e[TD]),n.message=oP(`
`+n.message,i,t,r),n[JN]=i,n[Bl]=null,n}function oP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==eP?n.slice(2):n;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(XN,`
  `)}`}var Vr=pC(sC("Optional"),8);var sm=pC(sC("SkipSelf"),4);function Wo(n,e){let t=n.hasOwnProperty(Ul);return t?n[Ul]:null}function am(n,e){n.forEach(t=>Array.isArray(t)?am(t,e):e(t))}function gC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $l(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function aP(n,e,t){let r=Xa(n,e);return r>=0?n[r|1]=t:(r=~r,sP(n,r,e,t)),r}function tg(n,e){let t=Xa(n,e);if(t>=0)return n[t|1]}function Xa(n,e){return uP(n,e,1)}function uP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ko={},Gt=[],Qo=new H(""),mC=new H("",-1),yC=new H(""),ql=class{get(e,t=Ga){if(t===Ga){let r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return t}},vC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vC||{}),Cn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cn||{}),Nr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Nr||{});function cP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function vg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];lP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function _C(n){return n===3||n===4||n===6}function lP(n){return n.charCodeAt(0)===64}function Wa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?bD(n,t,i,null,e[++r]):bD(n,t,i,null,null))}}return n}function bD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var wC="ng-template";function dP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(um(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function um(n){return n.type===4&&n.value!==wC}function hP(n,e,t){let r=n.type===4&&!t?wC:n.value;return e===r}function fP(n,e,t){let r=4,i=n.attrs,o=i!==null?mP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!un(r)&&!un(u))return!1;if(s&&un(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!hP(n,u,t)||u===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!dP(n,i,u,t)){if(un(r))return!1;s=!0}}else{let l=e[++a],h=pP(u,i,um(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function pP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yP(e,n)}function gP(n,e,t=!1){for(let r=0;r<e.length;r++)if(fP(n,e[r],t))return!0;return!1}function mP(n){for(let e=0;e<n.length;e++){let t=n[e];if(_C(t))return e}return n.length}function yP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function AD(n,e){return n?":not("+e.trim()+")":e}function vP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=AD(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=AD(o,i)),e}function _P(n){return n.map(vP).join(",")}function wP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return{attrs:e,classes:t}}function EC(n){return Ja(()=>{let e=bC(n),t=de(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cn.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""});AC(t);let r=n.dependencies;return t.directiveDefs=MD(r,!1),t.pipeDefs=MD(r,!0),t.id=DP(t),t})}function EP(n){return Pr(n)||IC(n)}function IP(n){return n!==null}function Yt(n){return Ja(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function SD(n,e){if(n==null)return Ko;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Nr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Nr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Se(n){return Ja(()=>{let e=bC(n);return AC(e),e})}function Pr(n){return n[zN]||null}function IC(n){return n[GN]||null}function DC(n){return n[WN]||null}function CC(n){let e=Pr(n)||IC(n)||DC(n);return e!==null?e.standalone:!1}function TC(n,e){let t=n[KN]||null;if(!t&&e===!0)throw new Error(`Type ${Dt(n)} does not have '\u0275mod' property.`);return t}function bC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ko,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SD(n.inputs,e),outputs:SD(n.outputs),debugInfo:null}}function AC(n){n.features?.forEach(e=>e(n))}function MD(n,e){if(!n)return null;let t=e?DC:EP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IP)}function DP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Lr(n){return{\u0275providers:n}}function CP(...n){return{\u0275providers:SC(!0,n),\u0275fromNgModule:!0}}function SC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return am(e,s=>{let a=s;_g(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&MC(i,o),t}function MC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];cm(i,o=>{e(o,r)})}}function _g(n,e,t,r){if(n=It(n),!n)return!1;let i=null,o=ID(n),s=!o&&Pr(n);if(!o&&!s){let u=n.ngModule;if(o=ID(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)_g(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{am(o.imports,h=>{_g(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&MC(l,e)}if(!a){let l=Wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:yC,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;cm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function cm(n,e){for(let t of n)dC(t)&&(t=t.\u0275providers),Array.isArray(t)?cm(t,e):e(t)}var TP=Te({provide:String,useValue:Te});function xC(n){return n!==null&&typeof n=="object"&&TP in n}function bP(n){return!!(n&&n.useExisting)}function AP(n){return!!(n&&n.useFactory)}function Yo(n){return typeof n=="function"}function SP(n){return!!n.useClass}var pd=new H(""),kl={},MP={},ng;function lm(){return ng===void 0&&(ng=new ql),ng}var Ct=class{},Ka=class extends Ct{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eg(e,s=>this.processProvider(s)),this.records.set(mC,Bo(void 0,this)),i.has("environment")&&this.records.set(Ct,Bo(void 0,this));let o=this.records.get(pd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yC,Gt,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Mr(this),r=zt(void 0),i;try{return e()}finally{Mr(t),zt(r)}}get(e,t=Ga,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CD))return e[CD](this);r=fd(r);let i,o=Mr(this),s=zt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=OP(e)&&dd(e);l&&this.injectableDefInScope(l)?u=Bo(wg(e),kl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?lm():this.parent;return t=r&le.Optional&&t===Ga?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Bl]=a[Bl]||[]).unshift(Dt(e)),o)throw a;return iP(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(s),Mr(o)}}resolveInjectorInitializers(){let e=ve(null),t=Mr(this),r=zt(void 0),i;try{let o=this.get(Qo,Gt,le.Self);for(let s of o)s()}finally{Mr(t),zt(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=It(e);let t=Yo(e)?e:It(e&&e.provide),r=RP(e);if(!Yo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Bo(void 0,kl,!0),i.factory=()=>yg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===kl&&(t.value=MP,t.value=t.factory()),typeof t.value=="object"&&t.value&&PP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=It(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wg(n){let e=dd(n),t=e!==null?e.factory:Wo(n);if(t!==null)return t;if(n instanceof H)throw new X(204,!1);if(n instanceof Function)return xP(n);throw new X(204,!1)}function xP(n){if(n.length>0)throw new X(204,!1);let t=qN(n);return t!==null?()=>t.factory(n):()=>new n}function RP(n){if(xC(n))return Bo(void 0,n.useValue);{let e=RC(n);return Bo(e,kl)}}function RC(n,e,t){let r;if(Yo(n)){let i=It(n);return Wo(i)||wg(i)}else if(xC(n))r=()=>It(n.useValue);else if(AP(n))r=()=>n.useFactory(...yg(n.deps||[]));else if(bP(n))r=()=>L(It(n.useExisting));else{let i=It(n&&(n.useClass||n.provide));if(NP(n))r=()=>new i(...yg(n.deps));else return Wo(i)||wg(i)}return r}function Bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function NP(n){return!!n.deps}function PP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function OP(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Eg(n,e){for(let t of n)Array.isArray(t)?Eg(t,e):t&&dC(t)?Eg(t.\u0275providers,e):e(t)}function Zt(n,e){n instanceof Ka&&n.assertNotDestroyed();let t,r=Mr(n),i=zt(void 0);try{return e()}finally{Mr(r),zt(i)}}function NC(){return hC()!==void 0||tP()!=null}function kP(n){if(!NC())throw new X(-203,!1)}function FP(n){return typeof n=="function"}var Xn=0,fe=1,ne=2,Tt=3,cn=4,dn=5,Hl=6,zl=7,ln=8,Zo=9,Tn=10,Qe=11,Qa=12,xD=13,ss=14,bn=15,Jo=16,$o=17,Xo=18,gd=19,PC=20,xr=21,rg=22,Wt=23,Or=25,OC=1;var Ni=7,Gl=8,Wl=9,Kt=10,Kl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Kl||{});function Rr(n){return Array.isArray(n)&&typeof n[OC]=="object"}function er(n){return Array.isArray(n)&&n[OC]===!0}function kC(n){return(n.flags&4)!==0}function md(n){return n.componentOffset>-1}function dm(n){return(n.flags&1)===1}function kr(n){return!!n.template}function Ig(n){return(n[ne]&512)!==0}var Dg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function FC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Sn(){return VC}function VC(n){return n.type.prototype.ngOnChanges&&(n.setInput=LP),VP}Sn.ngInherit=!0;function VP(){let n=jC(this),e=n?.current;if(e){let t=n.previous;if(t===Ko)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function LP(n,e,t,r,i){let o=this.declaredInputs[r],s=jC(n)||jP(n,{previous:Ko,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Dg(l&&l.currentValue,t,u===Ko),FC(n,e,i,t)}var LC="__ngSimpleChanges__";function jC(n){return n[LC]||null}function jP(n,e){return n[LC]=e}var RD=null;var In=function(n,e,t){RD?.(n,e,t)},UC="svg",UP="math";function An(n){for(;Array.isArray(n);)n=n[Xn];return n}function BC(n,e){return An(e[n])}function Jt(n,e){return An(e[n.index])}function $C(n,e){return n.data[e]}function jr(n,e){let t=e[n];return Rr(t)?t:t[Xn]}function hm(n){return(n[ne]&128)===128}function BP(n){return er(n[Tt])}function Ql(n,e){return e==null?null:n[e]}function qC(n){n[$o]=0}function HC(n){n[ne]&1024||(n[ne]|=1024,hm(n)&&vd(n))}function $P(n,e){for(;n>0;)e=e[ss],n--;return e}function yd(n){return!!(n[ne]&9216||n[Wt]?.dirty)}function Cg(n){n[Tn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),yd(n)&&vd(n)}function vd(n){n[Tn].changeDetectionScheduler?.notify(0);let e=Pi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!hm(e)));)e=Pi(e)}function zC(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[xr]===null&&(n[xr]=[]),n[xr].push(e)}function qP(n,e){if(n[xr]===null)return;let t=n[xr].indexOf(e);t!==-1&&n[xr].splice(t,1)}function Pi(n){let e=n[Tt];return er(e)?e[Tt]:e}var he={lFrame:eT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var GC=!1;function HP(){return he.lFrame.elementDepthCount}function zP(){he.lFrame.elementDepthCount++}function GP(){he.lFrame.elementDepthCount--}function WC(){return he.bindingsEnabled}function WP(){return he.skipHydrationRootTNode!==null}function KP(n){return he.skipHydrationRootTNode===n}function QP(){he.skipHydrationRootTNode=null}function Ae(){return he.lFrame.lView}function Ot(){return he.lFrame.tView}function x3(n){return he.lFrame.contextLView=n,n[ln]}function R3(n){return he.lFrame.contextLView=null,n}function bt(){let n=KC();for(;n!==null&&n.type===64;)n=n.parent;return n}function KC(){return he.lFrame.currentTNode}function YP(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function eu(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function QC(){return he.lFrame.isParent}function ZP(){he.lFrame.isParent=!1}function YC(){return GC}function ND(n){GC=n}function JP(n){return he.lFrame.bindingIndex=n}function _d(){return he.lFrame.bindingIndex++}function XP(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eO(){return he.lFrame.inI18n}function tO(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Tg(e)}function nO(){return he.lFrame.currentDirectiveIndex}function Tg(n){he.lFrame.currentDirectiveIndex=n}function rO(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ZC(n){he.lFrame.currentQueryIndex=n}function iO(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function JC(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=iO(o),i===null||(o=o[ss],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=XC();return r.currentTNode=e,r.lView=n,!0}function fm(n){let e=XC(),t=n[fe];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function XC(){let n=he.lFrame,e=n===null?null:n.child;return e===null?eT(n):e}function eT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function tT(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var nT=tT;function pm(){let n=tT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function oO(n){return(he.lFrame.contextLView=$P(n,he.lFrame.contextLView))[ln]}function as(){return he.lFrame.selectedIndex}function Oi(n){he.lFrame.selectedIndex=n}function wd(){let n=he.lFrame;return $C(n.tView,n.selectedIndex)}function N3(){he.lFrame.currentNamespace=UC}function P3(){sO()}function sO(){he.lFrame.currentNamespace=null}function aO(){return he.lFrame.currentNamespace}var rT=!0;function gm(){return rT}function mm(n){rT=n}function uO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=VC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ym(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Fl(n,e,t){iT(n,e,3,t)}function Vl(n,e,t,r){(n[ne]&3)===t&&iT(n,e,t,r)}function ig(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function iT(n,e,t,r){let i=r!==void 0?n[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[$o]+=65536),(a<o||o==-1)&&(cO(n,t,e,u),n[$o]=(n[$o]&4294901760)+u+2),u++}function PD(n,e){In(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),In(5,n,e)}}function cO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[$o]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,PD(a,o)):PD(a,o)}var Go=-1,ki=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function lO(n){return n instanceof ki}function dO(n){return(n.flags&8)!==0}function hO(n){return(n.flags&16)!==0}var og={},bg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=fd(r);let i=this.injector.get(e,og,r);return i!==og||t===og?i:this.parentInjector.get(e,t,r)}};function oT(n){return n!==Go}function Yl(n){return n&32767}function fO(n){return n>>16}function Zl(n,e){let t=fO(n),r=e;for(;t>0;)r=r[ss],t--;return r}var Ag=!0;function OD(n){let e=Ag;return Ag=n,e}var pO=256,sT=pO-1,aT=5,gO=0,Dn={};function mO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(za)&&(r=t[za]),r==null&&(r=t[za]=gO++);let i=r&sT,o=1<<i;e.data[n+(i>>aT)]|=o}function Jl(n,e){let t=uT(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,sg(r.data,n),sg(e,null),sg(r.blueprint,null));let i=vm(n,e),o=n.injectorIndex;if(oT(i)){let s=Yl(i),a=Zl(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function sg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function vm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=fT(i),r===null)return Go;if(t++,i=i[ss],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Go}function Sg(n,e,t){mO(n,e,t)}function yO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(_C(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function cT(n,e,t){if(t&le.Optional||n!==void 0)return n;om(e,"NodeInjector")}function lT(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[Zo],o=zt(void 0);try{return i?i.get(e,r,t&le.Optional):fC(e,r,t&le.Optional)}finally{zt(o)}}return cT(r,e,t)}function dT(n,e,t,r=le.Default,i){if(n!==null){if(e[ne]&2048&&!(r&le.Self)){let s=IO(n,e,t,r,Dn);if(s!==Dn)return s}let o=hT(n,e,t,r,Dn);if(o!==Dn)return o}return lT(e,t,r,i)}function hT(n,e,t,r,i){let o=wO(t);if(typeof o=="function"){if(!JC(e,n,r))return r&le.Host?cT(i,t,r):lT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))om(t);else return s}finally{nT()}}else if(typeof o=="number"){let s=null,a=uT(n,e),u=Go,l=r&le.Host?e[bn][dn]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?vm(n,e):e[a+8],u===Go||!FD(r,!1)?a=-1:(s=e[fe],a=Yl(u),e=Zl(u,e)));a!==-1;){let h=e[fe];if(kD(o,a,h.data)){let p=vO(a,e,t,s,r,l);if(p!==Dn)return p}u=e[a+8],u!==Go&&FD(r,e[fe].data[a+8]===l)&&kD(o,a,e)?(s=h,a=Yl(u),e=Zl(u,e)):a=-1}}return i}function vO(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],u=r==null?md(a)&&Ag:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=_O(a,s,t,u,l);return h!==null?es(e,s,h,a):Dn}function _O(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&kr(y)&&y.type===t)return u}return null}function es(n,e,t,r){let i=n[t],o=e.data;if(lO(i)){let s=i;s.resolving&&YN(QN(o[t]));let a=OD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?zt(s.injectImpl):null,h=JC(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&uO(t,o[t],e)}finally{l!==null&&zt(l),OD(a),s.resolving=!1,nT()}}return i}function wO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(za)?n[za]:void 0;return typeof e=="number"?e>=0?e&sT:EO:e}function kD(n,e,t){let r=1<<n;return!!(t[e+(n>>aT)]&r)}function FD(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var Ri=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return dT(this._tNode,this._lView,e,fd(r),t)}};function EO(){return new Ri(bt(),Ae())}function Xt(n){return Ja(()=>{let e=n.prototype.constructor,t=e[Ul]||Mg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ul]||Mg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Mg(n){return aC(n)?()=>{let e=Mg(It(n));return e&&e()}:Wo(n)}function IO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=hT(o,s,t,r|le.Self,Dn);if(a!==Dn)return a;let u=o.parent;if(!u){let l=s[PC];if(l){let h=l.get(t,Dn,r);if(h!==Dn)return h}u=fT(s),s=s[ss]}o=u}return i}function fT(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function _m(n){return yO(bt(),n)}function VD(n,e=null,t=null,r){let i=pT(n,e,t,r);return i.resolveInjectorInitializers(),i}function pT(n,e=null,t=null,r,i=new Set){let o=[t||Gt,CP(n)];return r=r||(typeof n=="object"?void 0:Dt(n)),new Ka(o,e||lm(),r||null,i)}var Vt=class n{static{this.THROW_IF_NOT_FOUND=Ga}static{this.NULL=new ql}static create(e,t){if(Array.isArray(e))return VD({name:""},t,e,"");{let r=e.name??"";return VD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>L(mC)})}static{this.__NG_ELEMENT_ID__=-1}};var DO=new H("");DO.__NG_ELEMENT_ID__=n=>{let e=bt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new X(204,!1)};var CO="ngOriginalError";function ag(n){return n[CO]}var gT=!0,wm=(()=>{class n{static{this.__NG_ELEMENT_ID__=TO}static{this.__NG_ENV_ID__=t=>t}}return n})(),xg=class extends wm{constructor(e){super(),this._lView=e}onDestroy(e){return zC(this._lView,e),()=>qP(this._lView,e)}};function TO(){return new xg(Ae())}var Ur=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Rg=class extends Pe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,NC()&&(this.destroyRef=V(wm,{optional:!0})??void 0,this.pendingTasks=V(Ur,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},$e=Rg;function Xl(...n){}function mT(n){let e,t;function r(){n=Xl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function LD(n){return queueMicrotask(()=>n()),()=>{n=Xl}}var Em="isAngularZone",ed=Em+"_ID",bO=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $e(!1),this.onMicrotaskEmpty=new $e(!1),this.onStable=new $e(!1),this.onError=new $e(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gT}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,MO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Em)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,AO,Xl,Xl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},AO={};function Im(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function SO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){mT(()=>{n.callbackScheduled=!1,Ng(n),n.isCheckStableRunning=!0,Im(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ng(n)}function MO(n){let e=()=>{SO(n)},t=bO++;n._inner=n._inner.fork({name:"angular",properties:{[Em]:!0,[ed]:t,[ed+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(xO(u))return r.invokeTask(o,s,a,u);try{return jD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),UD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return jD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!RO(u)&&e(),UD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ng(n),Im(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ng(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function jD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UD(n){n._nesting--,Im(n)}var Pg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $e,this.onMicrotaskEmpty=new $e,this.onStable=new $e,this.onError=new $e}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function xO(n){return yT(n,"__ignore_ng_zone__")}function RO(n){return yT(n,"__scheduler_tick__")}function yT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ag(e);for(;t&&ag(t);)t=ag(t);return t||null}},NO=new H("",{providedIn:"root",factory:()=>{let n=V(_e),e=V(Yn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function PO(){return Ed(bt(),Ae())}function Ed(n,e){return new Mn(Jt(n,e))}var Mn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=PO}}return n})();function vT(n){return(n.flags&128)===128}var _T=new Map,OO=0;function kO(){return OO++}function FO(n){_T.set(n[gd],n)}function Og(n){_T.delete(n[gd])}var BD="__ngContext__";function Fi(n,e){Rr(e)?(n[BD]=e[gd],FO(e)):n[BD]=e}function wT(n){return IT(n[Qa])}function ET(n){return IT(n[cn])}function IT(n){for(;n!==null&&!er(n);)n=n[cn];return n}var kg;function DT(n){kg=n}function VO(){if(kg!==void 0)return kg;if(typeof document<"u")return document;throw new X(210,!1)}var Dm=new H("",{providedIn:"root",factory:()=>LO}),LO="ng",Cm=new H(""),at=new H("",{providedIn:"platform",factory:()=>"unknown"});var Tm=new H("",{providedIn:"root",factory:()=>VO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var jO="h",UO="b";var BO=()=>null;function bm(n,e,t=!1){return BO(n,e,t)}var CT=!1,$O=new H("",{providedIn:"root",factory:()=>CT});var Rl;function qO(){if(Rl===void 0&&(Rl=null,pg.trustedTypes))try{Rl=pg.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rl}function $D(n){return qO()?.createScriptURL(n)||n}var td=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oC})`}};function tu(n){return n instanceof td?n.changingThisBreaksApplicationSecurity:n}function Am(n,e){let t=HO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${oC})`)}return t===e}function HO(n){return n instanceof td&&n.getTypeName()||null}var zO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function TT(n){return n=String(n),n.match(zO)?n:"unsafe:"+n}var Id=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Id||{});function GO(n){let e=AT();return e?e.sanitize(Id.URL,n)||"":Am(n,"URL")?tu(n):TT(hd(n))}function WO(n){let e=AT();if(e)return $D(e.sanitize(Id.RESOURCE_URL,n)||"");if(Am(n,"ResourceURL"))return $D(tu(n));throw new X(904,!1)}function KO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?WO:GO}function bT(n,e,t){return KO(e,t)(n)}function AT(){let n=Ae();return n&&n[Tn].sanitizer}function ST(n){return n instanceof Function?n():n}function QO(n){return(n??V(Vt)).get(at)==="browser"}var Zn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Zn||{}),YO;function Sm(n,e){return YO(n,e)}function qo(n,e,t,r,i){if(r!=null){let o,s=!1;er(r)?o=r:Rr(r)&&(s=!0,r=r[Xn]);let a=An(r);n===0&&t!==null?i==null?PT(e,t,a):nd(e,t,a,i||null,!0):n===1&&t!==null?nd(e,t,a,i||null,!0):n===2?dk(e,a,s):n===3&&e.destroyNode(a),o!=null&&fk(e,n,o,t,i)}}function ZO(n,e){return n.createText(e)}function JO(n,e,t){n.setValue(e,t)}function MT(n,e,t){return n.createElement(e,t)}function XO(n,e){xT(n,e),e[Xn]=null,e[dn]=null}function ek(n,e,t,r,i,o){r[Xn]=i,r[dn]=e,Dd(n,r,t,1,i,o)}function xT(n,e){e[Tn].changeDetectionScheduler?.notify(9),Dd(n,e,e[Qe],2,null,null)}function tk(n){let e=n[Qa];if(!e)return ug(n[fe],n);for(;e;){let t=null;if(Rr(e))t=e[Qa];else{let r=e[Kt];r&&(t=r)}if(!t){for(;e&&!e[cn]&&e!==n;)Rr(e)&&ug(e[fe],e),e=e[Tt];e===null&&(e=n),Rr(e)&&ug(e[fe],e),t=e&&e[cn]}e=t}}function nk(n,e,t,r){let i=Kt+r,o=t.length;r>0&&(t[i-1][cn]=e),r<o-Kt?(e[cn]=t[i],gC(t,Kt+r,e)):(t.push(e),e[cn]=null),e[Tt]=t;let s=e[Jo];s!==null&&t!==s&&RT(s,e);let a=e[Xo];a!==null&&a.insertView(n),Cg(e),e[ne]|=128}function RT(n,e){let t=n[Wl],r=e[Tt];if(Rr(r))n[ne]|=Kl.HasTransplantedViews;else{let i=r[Tt][bn];e[bn]!==i&&(n[ne]|=Kl.HasTransplantedViews)}t===null?n[Wl]=[e]:t.push(e)}function Mm(n,e){let t=n[Wl],r=t.indexOf(e);t.splice(r,1)}function Fg(n,e){if(n.length<=Kt)return;let t=Kt+e,r=n[t];if(r){let i=r[Jo];i!==null&&i!==n&&Mm(i,r),e>0&&(n[t-1][cn]=r[cn]);let o=$l(n,Kt+e);XO(r[fe],r);let s=o[Xo];s!==null&&s.detachView(o[fe]),r[Tt]=null,r[cn]=null,r[ne]&=-129}return r}function NT(n,e){if(!(e[ne]&256)){let t=e[Qe];t.destroyNode&&Dd(n,e,t,3,null,null),tk(e)}}function ug(n,e){if(e[ne]&256)return;let t=ve(null);try{e[ne]&=-129,e[ne]|=256,e[Wt]&&Op(e[Wt]),ik(n,e),rk(n,e),e[fe].type===1&&e[Qe].destroy();let r=e[Jo];if(r!==null&&er(e[Tt])){r!==e[Tt]&&Mm(r,e);let i=e[Xo];i!==null&&i.detachView(n)}Og(e)}finally{ve(t)}}function rk(n,e){let t=n.cleanup,r=e[zl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[zl]=null);let i=e[xr];if(i!==null){e[xr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function ik(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ki)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];In(4,a,u);try{u.call(a)}finally{In(5,a,u)}}else{In(4,i,o);try{o.call(i)}finally{In(5,i,o)}}}}}function ok(n,e,t){return sk(n,e.parent,t)}function sk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Cn.None||o===Cn.Emulated)return null}return Jt(r,t)}}function nd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function PT(n,e,t){n.appendChild(e,t)}function qD(n,e,t,r,i){r!==null?nd(n,e,t,r,i):PT(n,e,t)}function OT(n,e){return n.parentNode(e)}function ak(n,e){return n.nextSibling(e)}function uk(n,e,t){return lk(n,e,t)}function ck(n,e,t){return n.type&40?Jt(n,t):null}var lk=ck,HD;function xm(n,e,t,r){let i=ok(n,r,e),o=e[Qe],s=r.parent||e[dn],a=uk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)qD(o,i,t[u],a,!1);else qD(o,i,t,a,!1);HD!==void 0&&HD(o,r,e,t,i)}function Ha(n,e){if(e!==null){let t=e.type;if(t&3)return Jt(e,n);if(t&4)return Vg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ha(n,r);{let i=n[e.index];return er(i)?Vg(-1,i):An(i)}}else{if(t&128)return Ha(n,e.next);if(t&32)return Sm(e,n)()||An(n[e.index]);{let r=kT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pi(n[bn]);return Ha(i,r)}else return Ha(n,e.next)}}}return null}function kT(n,e){if(e!==null){let r=n[bn][dn],i=e.projection;return r.projection[i]}return null}function Vg(n,e){let t=Kt+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return Ha(r,i)}return e[Ni]}function dk(n,e,t){n.removeChild(null,e,t)}function Rm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Fi(An(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Rm(n,e,t.child,r,i,o,!1),qo(e,n,i,a,o);else if(u&32){let l=Sm(t,r),h;for(;h=l();)qo(e,n,i,h,o);qo(e,n,i,a,o)}else u&16?hk(n,e,r,t,i,o):qo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Dd(n,e,t,r,i,o){Rm(t,r,n.firstChild,e,i,o,!1)}function hk(n,e,t,r,i,o){let s=t[bn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];qo(e,n,i,h,o)}else{let l=u,h=s[Tt];vT(r)&&(l.flags|=128),Rm(n,e,l,h,i,o,!0)}}function fk(n,e,t,r,i){let o=t[Ni],s=An(t);o!==s&&qo(e,n,r,o,i);for(let a=Kt;a<t.length;a++){let u=t[a];Dd(u[fe],u,n,e,r,o)}}function pk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Zn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zn.Important),n.setStyle(t,r,i,o))}}function gk(n,e,t){n.setAttribute(e,"style",t)}function FT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&vg(n,e,r),i!==null&&FT(n,e,i),o!==null&&gk(n,e,o)}var ji={};function O3(n=1){LT(Ot(),Ae(),as()+n,!1)}function LT(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Vl(e,o,0,t)}Oi(t)}function ie(n,e=le.Default){let t=Ae();if(t===null)return L(n,e);let r=bt();return dT(r,t,It(n),e)}function jT(){let n="invalid";throw new Error(n)}function UT(n,e,t,r,i,o){let s=ve(null);try{let a=null;i&Nr.SignalBased&&(a=e[r][zn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Nr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):FC(e,a,r,o)}finally{ve(s)}}function mk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Oi(~i);else{let o=i,s=t[++r],a=t[++r];tO(s,o);let u=e[o];a(2,u)}}}finally{Oi(-1)}}function Cd(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Xn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),qC(p),p[Tt]=p[ss]=n,p[ln]=t,p[Tn]=s||n&&n[Tn],p[Qe]=a||n&&n[Qe],p[Zo]=u||n&&n[Zo]||null,p[dn]=o,p[gd]=kO(),p[Hl]=h,p[PC]=l,p[bn]=e.type==2?n[bn]:p,p}function Td(n,e,t,r,i){let o=n.data[e];if(o===null)o=yk(n,e,t,r,i),eO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=YP();o.injectorIndex=s===null?-1:s.injectorIndex}return eu(o,!0),o}function yk(n,e,t,r,i){let o=KC(),s=QC(),a=s?o:o&&o.parent,u=n.data[e]=Ik(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function BT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $T(n,e,t,r,i){let o=as(),s=r&2;try{Oi(-1),s&&e.length>Or&&LT(n,e,Or,!1),In(s?2:0,i),t(r,i)}finally{Oi(o),In(s?3:1,i)}}function qT(n,e,t){if(kC(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}function HT(n,e,t){WC()&&(Sk(n,e,t,Jt(t,e)),(t.flags&64)===64&&QT(n,e,t))}function zT(n,e,t=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function GT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Nm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Nm(n,e,t,r,i,o,s,a,u,l,h){let p=Or+r,m=p+i,y=vk(p,m),D=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function vk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ji);return t}function _k(n,e,t,r){let o=r.get($O,CT)||t===Cn.ShadowDom,s=n.selectRootElement(e,o);return wk(s),s}function wk(n){Ek(n)}var Ek=()=>null;function Ik(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return WP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Nr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?GD(r,t,l,a,u):GD(r,t,l,a)}return r}function GD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Dk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;u=zD(0,p.inputs,h,u,y),l=zD(1,p.outputs,h,l,D);let b=u!==null&&s!==null&&!um(e)?jk(u,h,s):null;a.push(b)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Ck(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Pm(n,e,t,r,i,o,s,a){let u=Jt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Om(n,t,h,r,i),md(e)&&Tk(t,e.index)):e.type&3?(r=Ck(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Tk(n,e){let t=jr(e,n);t[ne]&16||(t[ne]|=64)}function WT(n,e,t,r){if(WC()){let i=r===null?null:{"":-1},o=xk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&KT(n,e,t,s,i,a),i&&Rk(t,r,i)}t.mergedAttrs=Wa(t.mergedAttrs,t.attrs)}function KT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Sg(Jl(t,e),n,r[l].type);Pk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=BT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Wa(t.mergedAttrs,h.hostAttrs),Ok(n,t,e,u,h),Nk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Dk(n,t,o)}function bk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ak(s)!=a&&s.push(a),s.push(t,r,o)}}function Ak(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Sk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;md(t)&&kk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Jl(t,e),Fi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=es(e,n,a,t);if(Fi(l,e),s!==null&&Lk(e,a-i,l,u,t,s),kr(u)){let h=jr(t.index,e);h[ln]=es(e,n,a,t)}}}function QT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=nO();try{Oi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Tg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Mk(u,l)}}finally{Oi(-1),Tg(s)}}function Mk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function xk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(gP(e,s.selectors,!1))if(r||(r=[]),kr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Lg(n,e,u)}else r.unshift(s),Lg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Lg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Rk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function Nk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;kr(e)&&(t[""]=n)}}function Pk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ok(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Wo(i.type,!0)),s=new ki(o,kr(i),ie);n.blueprint[r]=s,t[r]=s,bk(n,e,r,BT(n,t,i.hostVars,ji),i)}function kk(n,e,t){let r=Jt(e,n),i=GT(t),o=n[Tn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=bd(n,Cd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Fk(n,e,t,r,i,o){let s=Jt(n,e);Vk(e[Qe],s,o,n.value,t,r,i)}function Vk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?hd(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Lk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];UT(r,t,u,l,h,p)}}function jk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function YT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ZT(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ZC(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function bd(n,e){return n[Qa]?n[xD][cn]=e:n[Qa]=e,n[xD]=e,e}function jg(n,e,t){ZC(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function Uk(n){return n[zl]??=[]}function Bk(n){return n.cleanup??=[]}function JT(n,e){let t=n[Zo],r=t?t.get(Yn,null):null;r&&r.handleError(e)}function Om(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];UT(h,l,r,a,u,i)}}function $k(n,e,t){let r=BC(e,n);JO(n[Qe],r,t)}function qk(n,e){let t=jr(e,n),r=t[fe];Hk(r,t);let i=t[Xn];i!==null&&t[Hl]===null&&(t[Hl]=bm(i,t[Zo])),km(r,t,t[ln])}function Hk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function km(n,e,t){fm(e);try{let r=n.viewQuery;r!==null&&jg(1,r,t);let i=n.template;i!==null&&$T(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xo]?.finishViewCreation(n),n.staticContentQueries&&ZT(n,e),n.staticViewQueries&&jg(2,n.viewQuery,t);let o=n.components;o!==null&&zk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,pm()}}function zk(n,e){for(let t=0;t<e.length;t++)qk(n,e[t])}function Gk(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Cd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Jo]=l;let h=n[Xo];return h!==null&&(u[Xo]=h.createEmbeddedView(o)),km(o,u,t),u}finally{ve(i)}}function WD(n,e){return!e||e.firstChild===null||vT(n)}function Wk(n,e,t,r=!0){let i=e[fe];if(nk(i,e,n,t),r){let s=Vg(t,n),a=e[Qe],u=OT(a,n[Ni]);u!==null&&ek(i,n[dn],a,e,u,s)}let o=e[Hl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(An(o)),er(o)&&Kk(o,r);let s=t.type;if(s&8)rd(n,e,t.child,r);else if(s&32){let a=Sm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=kT(e,t);if(Array.isArray(a))r.push(...a);else{let u=Pi(e[bn]);rd(u[fe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Kk(n,e){for(let t=Kt;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&rd(r[fe],r,i,e)}n[Ni]!==n[Xn]&&e.push(n[Ni])}var XT=[];function Qk(n){return n[Wt]??Yk(n)}function Yk(n){let e=XT.pop()??Object.create(Jk);return e.lView=n,e}function Zk(n){n.lView[Wt]!==n&&(n.lView=null,XT.push(n))}var Jk=de(j({},La),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{vd(n.lView)},consumerOnSignalRead(){this.lView[Wt]=this}});function Xk(n){let e=n[Wt]??Object.create(e1);return e.lView=n,e}var e1=de(j({},La),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Pi(n.lView);for(;e&&!eb(e[fe]);)e=Pi(e);e&&HC(e)},consumerOnSignalRead(){this.lView[Wt]=this}});function eb(n){return n.type!==2}var t1=100;function tb(n,e=!0,t=0){let r=n[Tn],i=r.rendererFactory,o=!1;o||i.begin?.();try{n1(n,t)}catch(s){throw e&&JT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function n1(n,e){let t=YC();try{ND(!0),Ug(n,e);let r=0;for(;yd(n);){if(r===t1)throw new X(103,!1);r++,Ug(n,1)}}finally{ND(t)}}function r1(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Tn].inlineEffectRunner?.flush(),fm(e);let a=!0,u=null,l=null;o||(eb(n)?(l=Qk(e),u=el(l)):jI()===null?(a=!1,l=Xk(e),u=el(l)):e[Wt]&&(Op(e[Wt]),e[Wt]=null));try{qC(e),JP(n.bindingStartIndex),t!==null&&$T(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Fl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Vl(e,y,0,null),ig(e,0)}if(s||i1(e),nb(e,0),n.contentQueries!==null&&ZT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Fl(e,y)}else{let y=n.contentHooks;y!==null&&Vl(e,y,1),ig(e,1)}mk(n,e);let p=n.components;p!==null&&ib(e,p,0);let m=n.viewQuery;if(m!==null&&jg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Fl(e,y)}else{let y=n.viewHooks;y!==null&&Vl(e,y,2),ig(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rg]){for(let y of e[rg])y();e[rg]=null}o||(e[ne]&=-73)}catch(h){throw o||vd(e),h}finally{l!==null&&(Np(l,u),a&&Zk(l)),pm()}}function nb(n,e){for(let t=wT(n);t!==null;t=ET(t))for(let r=Kt;r<t.length;r++){let i=t[r];rb(i,e)}}function i1(n){for(let e=wT(n);e!==null;e=ET(e)){if(!(e[ne]&Kl.HasTransplantedViews))continue;let t=e[Wl];for(let r=0;r<t.length;r++){let i=t[r];HC(i)}}}function o1(n,e,t){let r=jr(e,n);rb(r,t)}function rb(n,e){hm(n)&&Ug(n,e)}function Ug(n,e){let r=n[fe],i=n[ne],o=n[Wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Pp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)r1(r,n,r.template,n[ln]);else if(i&8192){nb(n,1);let a=r.components;a!==null&&ib(n,a,1)}}function ib(n,e,t){for(let r=0;r<e.length;r++)o1(n,e[r],t)}function Fm(n,e){let t=YC()?64:1088;for(n[Tn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Pi(n);if(Ig(n)&&!r)return n;n=r}return null}var Vi=class{get rootNodes(){let e=this._lView,t=e[fe];return rd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tt];if(er(e)){let t=e[Gl],r=t?t.indexOf(this):-1;r>-1&&(Fg(e,r),$l(t,r))}this._attachedToViewContainer=!1}NT(this._lView[fe],this._lView)}onDestroy(e){zC(this._lView,e)}markForCheck(){Fm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Cg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,tb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ig(this._lView),t=this._lView[Jo];t!==null&&!e&&Mm(t,this._lView),xT(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Ig(this._lView),r=this._lView[Jo];r!==null&&!t&&RT(r,this._lView),Cg(this._lView)}},Ad=(()=>{class n{static{this.__NG_ELEMENT_ID__=u1}}return n})(),s1=Ad,a1=class extends s1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Gk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Vi(i)}};function u1(){return c1(bt(),Ae())}function c1(n,e){return n.type&4?new a1(e,n,Ed(n,e)):null}var F3=new RegExp(`^(\\d+)*(${UO}|${jO})*(.*)`);var l1=()=>null;function KD(n,e){return l1(n,e)}var ts=class{},Sd=new H("",{providedIn:"root",factory:()=>!1});var ob=new H(""),sb=new H(""),Bg=class{},id=class{};function d1(n){let e=Error(`No component factory found for ${Dt(n)}.`);return e[h1]=n,e}var h1="ngComponent";var $g=class{resolveComponentFactory(e){throw d1(e)}},ns=class{static{this.NULL=new $g}},rs=class{},tr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>f1()}}return n})();function f1(){let n=Ae(),e=bt(),t=jr(e.index,n);return(Rr(t)?t:n)[Qe]}var p1=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function qg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=wD(i,a);else if(o==2){let u=a,l=e[++s];r=wD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var od=class extends ns{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Pr(e);return new is(t,this.ngModule)}};function QD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Nr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Nr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function g1(n){let e=n.toLowerCase();return e==="svg"?UC:e==="math"?UP:null}var is=class extends id{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=QD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return QD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_P(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ve(null);try{i=i||this.ngModule;let s=i instanceof Ct?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new bg(e,s):e,u=a.get(rs,null);if(u===null)throw new X(407,!1);let l=a.get(p1,null),h=a.get(ts,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?_k(m,r,this.componentDef.encapsulation,a):MT(m,y,g1(y)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let A=null;D!==null&&(A=bm(D,a,!0));let F=Nm(0,null,null,1,0,null,null,null,null,null,null),B=Cd(null,F,null,b,null,null,p,m,a,null,A);fm(B);let P,G,Y=null;try{let K=this.componentDef,E,v=null;K.findHostDirectiveDefs?(E=[],v=new Map,K.findHostDirectiveDefs(K,E,v),E.push(K)):E=[K];let w=m1(B,D);Y=y1(w,D,K,E,B,p,m),G=$C(F,Or),D&&w1(m,K,D,r),t!==void 0&&E1(G,this.ngContentSelectors,t),P=_1(Y,K,E,v,B,[I1]),km(F,B,null)}catch(K){throw Y!==null&&Og(Y),Og(B),K}finally{pm()}return new Hg(this.componentType,P,Ed(G,B),B,G)}finally{ve(o)}}},Hg=class extends Bg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Om(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=jr(this._tNode.index,o);Fm(s,1)}}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function m1(n,e){let t=n[fe],r=Or;return n[r]=e,Td(t,r,2,"#host",null)}function y1(n,e,t,r,i,o,s){let a=i[fe];v1(r,n,e,s);let u=null;e!==null&&(u=bm(e,i[Zo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Cd(i,GT(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Lg(a,n,r.length-1),bd(i,p),i[n.index]=p}function v1(n,e,t,r){for(let i of n)e.mergedAttrs=Wa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(qg(e,e.mergedAttrs,!0),t!==null&&VT(r,t,e))}function _1(n,e,t,r,i,o){let s=bt(),a=i[fe],u=Jt(s,i);KT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=es(i,a,p,s);Fi(m,i)}QT(a,i,s),u&&Fi(u,i);let l=es(i,a,s.directiveStart+s.componentOffset,s);if(n[ln]=i[ln]=l,o!==null)for(let h of o)h(l,e);return qT(a,s,i),l}function w1(n,e,t,r){if(r)vg(n,t,["ng-version","18.2.8"]);else{let{attrs:i,classes:o}=wP(e.selectors[0]);i&&vg(n,t,i),o&&o.length>0&&FT(n,t,o.join(" "))}}function E1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function I1(){let n=bt();ym(Ae()[fe],n)}var us=(()=>{class n{static{this.__NG_ELEMENT_ID__=D1}}return n})();function D1(){let n=bt();return T1(n,Ae())}var C1=us,ab=class extends C1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ed(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=vm(this._hostTNode,this._hostLView);if(oT(e)){let t=Zl(e,this._hostLView),r=Yl(e),i=t[fe].data[r+8];return new Ri(i,t)}else return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=KD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,WD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!FP(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new is(Pr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let b=(s?l:this.parentInjector).get(Ct,null);b&&(o=b)}let h=Pr(u.componentType??{}),p=KD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,WD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(BP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Tt],l=new ab(u,u[dn],u[Tt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Wk(s,i,o,r),e.attachToViewContainerRef(),gC(cg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fg(this._lContainer,t);r&&($l(cg(this._lContainer),t),NT(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fg(this._lContainer,t);return r&&$l(cg(this._lContainer),t)!=null?new Vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YD(n){return n[Gl]}function cg(n){return n[Gl]||(n[Gl]=[])}function T1(n,e){let t,r=e[n.index];return er(r)?t=r:(t=YT(r,e,null,n),e[n.index]=t,bd(e,t)),A1(t,e,n,r),new ab(t,n,e)}function b1(n,e){let t=n[Qe],r=t.createComment(""),i=Jt(e,n),o=OT(t,i);return nd(t,o,r,ak(t,i),!1),r}var A1=x1,S1=()=>!1;function M1(n,e,t){return S1(n,e,t)}function x1(n,e,t,r){if(n[Ni])return;let i;t.type&8?i=An(r):i=b1(e,t),n[Ni]=i}var ZD=new Set;function Ui(n){ZD.has(n)||(ZD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function R1(n){return typeof n=="function"&&n[zn]!==void 0}function nu(n,e){Ui("NgSignals");let t=YI(n),r=t[zn];return e?.equal&&(r.equal=e.equal),t.set=i=>kp(r,i),t.update=i=>ZI(r,i),t.asReadonly=N1.bind(t),t}function N1(){let n=this[zn];if(n.readonlyFn===void 0){let e=()=>this();e[zn]=n,n.readonlyFn=e}return n.readonlyFn}function ub(n){return R1(n)&&typeof n.set=="function"}function P1(n){return Object.getPrototypeOf(n.prototype).constructor}function pt(n){let e=P1(n.type),t=!0,r=[n];for(;e;){let i;if(kr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Nl(n.inputs),s.inputTransforms=Nl(n.inputTransforms),s.declaredInputs=Nl(n.declaredInputs),s.outputs=Nl(n.outputs);let a=i.hostBindings;a&&L1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&F1(n,u),l&&V1(n,l),O1(n,i),BN(n.outputs,i.outputs),kr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===pt&&(t=!1)}}e=Object.getPrototypeOf(e)}k1(r)}function O1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function k1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wa(i.hostAttrs,t=Wa(t,i.hostAttrs))}}function Nl(n){return n===Ko?{}:n===Gt?[]:n}function F1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function V1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function L1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Vm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Fr=class{},Ya=class{};var zg=class extends Fr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new od(this);let o=TC(e);this._bootstrapComponents=ST(o.bootstrap),this._r3Injector=pT(e,t,[{provide:Fr,useValue:this},{provide:ns,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gg=class extends Ya{constructor(e){super(),this.moduleType=e}create(e){return new zg(this.moduleType,e,[])}};var sd=class extends Fr{constructor(e){super(),this.componentFactoryResolver=new od(this),this.instance=null;let t=new Ka([...e.providers,{provide:Fr,useValue:this},{provide:ns,useValue:this.componentFactoryResolver}],e.parent||lm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Md(n,e,t=null){return new sd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function cb(n){return U1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function j1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function U1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ru(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function B1(n){return(n.flags&32)===32}function $1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Td(e,n,4,s||null,a||null);WT(e,t,h,Ql(l,u)),ym(e,h);let p=h.tView=Nm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function q1(n,e,t,r,i,o,s,a,u,l){let h=t+Or,p=e.firstCreatePass?$1(h,e,n,r,i,o,s,a,u):e.data[h];eu(p,!1);let m=z1(e,n,p,t);gm()&&xm(e,n,m,p),Fi(m,n);let y=YT(m,n,m,p);return n[h]=y,bd(n,y),M1(y,p,n),dm(p)&&HT(e,n,p),u!=null&&zT(n,p,l),p}function H1(n,e,t,r,i,o,s,a){let u=Ae(),l=Ot(),h=Ql(l.consts,o);return q1(u,l,n,e,t,r,i,h,s,a),H1}var z1=G1;function G1(n,e,t,r){return mm(!0),e[Qe].createComment("")}var Ho=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ho||{}),lb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Wg=class n{constructor(){this.ngZone=V(_e),this.scheduler=V(ts),this.errorHandler=V(Yn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ho.EarlyRead,Ho.Write,Ho.MixedReadWrite,Ho.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},Kg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Lm(n,e){!e?.injector&&kP(Lm);let t=e?.injector??V(Vt);return QO(t)?(Ui("NgAfterNextRender"),K1(n,t,e,!0)):Q1}function W1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function K1(n,e,t,r){let i=e.get(lb);i.impl??=e.get(Wg);let o=t?.phase??Ho.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(wm):null,a=new Kg(i.impl,W1(n,o),r,s);return i.impl.register(a),a}var Q1={destroy(){}};function Br(n,e,t,r){let i=Ae(),o=_d();if(ru(i,o,e)){let s=Ot(),a=wd();Fk(a,i,n,e,t,r)}return Br}function db(n,e,t,r){return ru(n,_d(),t)?e+hd(t)+r:ji}function Pl(n,e){return n<<17|e<<2}function Li(n){return n>>17&32767}function Y1(n){return(n&2)==2}function Z1(n,e){return n&131071|e<<17}function Qg(n){return n|2}function os(n){return(n&131068)>>2}function lg(n,e){return n&-131069|e<<2}function J1(n){return(n&1)===1}function Yg(n){return n|1}function X1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Li(s),u=os(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Xa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Li(n[a+1]);n[r+1]=Pl(m,a),m!==0&&(n[m+1]=lg(n[m+1],r)),n[a+1]=Z1(n[a+1],r)}else n[r+1]=Pl(a,0),a!==0&&(n[a+1]=lg(n[a+1],r)),a=r;else n[r+1]=Pl(u,0),a===0?a=r:n[u+1]=lg(n[u+1],r),u=r;l&&(n[r+1]=Qg(n[r+1])),JD(n,h,r,!0),JD(n,h,r,!1),eF(e,h,n,r,o),s=Pl(a,u),o?e.classBindings=s:e.styleBindings=s}function eF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Xa(o,e)>=0&&(t[r+1]=Yg(t[r+1]))}function JD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Li(i):os(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];tF(u,e)&&(a=!0,n[s+1]=r?Yg(l):Qg(l)),s=r?Li(l):os(l)}a&&(n[t+1]=r?Qg(i):Yg(i))}function tF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xa(n,e)>=0:!1}function nF(n,e,t){let r=Ae(),i=_d();if(ru(r,i,e)){let o=Ot(),s=wd();Pm(o,s,r,n,e,r[Qe],t,!1)}return nF}function XD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Om(n,t,o[s],s,r)}function xd(n,e){return rF(n,e,null,!0),xd}function rF(n,e,t,r){let i=Ae(),o=Ot(),s=XP(2);if(o.firstUpdatePass&&oF(o,n,s,r),e!==ji&&ru(i,s,e)){let a=o.data[as()];lF(o,a,i,i[Qe],n,i[s+1]=dF(e,t),r,s)}}function iF(n,e){return e>=n.expandoStartIndex}function oF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[as()],s=iF(n,t);hF(o,r)&&e===null&&!s&&(e=!1),e=sF(i,o,e,r),X1(i,o,e,t,s,r)}}function sF(n,e,t,r){let i=rO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=dg(null,n,e,t,r),t=Za(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=dg(i,n,e,t,r),o===null){let u=aF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=dg(null,n,e,u[1],r),u=Za(u,e.attrs,r),uF(n,e,r,u))}else o=cF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function aF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(os(r)!==0)return n[Li(r)]}function uF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Li(i)]=r}function cF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Za(r,s,t)}return Za(r,e.attrs,t)}function dg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Za(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Za(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),aP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function lF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=J1(l)?eC(u,e,t,i,os(l),s):void 0;if(!ad(h)){ad(o)||Y1(l)&&(o=eC(u,null,t,i,a,s));let p=BC(as(),t);pk(r,s,p,i,o)}}function eC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===ji&&(m=p?Gt:void 0);let y=p?tg(m,r):h===r?m:void 0;if(l&&!ad(y)&&(y=tg(u,r)),ad(y)&&(a=y,s))return a;let D=n[i+1];i=s?Li(D):os(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=tg(u,r))}return a}function ad(n){return n!==void 0}function dF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Dt(tu(n)))),n}function hF(n,e){return(n.flags&(e?8:16))!==0}function fF(n,e,t,r,i,o){let s=e.consts,a=Ql(s,i),u=Td(e,n,2,r,a);return WT(e,t,u,Ql(s,o)),u.attrs!==null&&qg(u,u.attrs,!1),u.mergedAttrs!==null&&qg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function hb(n,e,t,r){let i=Ae(),o=Ot(),s=Or+n,a=i[Qe],u=o.firstCreatePass?fF(s,o,i,e,t,r):o.data[s],l=pF(o,i,u,a,e,n);i[s]=l;let h=dm(u);return eu(u,!0),VT(a,l,u),!B1(u)&&gm()&&xm(o,i,l,u),HP()===0&&Fi(l,i),zP(),h&&(HT(o,i,u),qT(o,u,i)),r!==null&&zT(i,u),hb}function fb(){let n=bt();QC()?ZP():(n=n.parent,eu(n,!1));let e=n;KP(e)&&QP(),GP();let t=Ot();return t.firstCreatePass&&(ym(t,n),kC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&dO(e)&&XD(t,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hO(e)&&XD(t,e,Ae(),e.stylesWithoutHost,!1),fb}function jm(n,e,t,r){return hb(n,e,t,r),fb(),jm}var pF=(n,e,t,r,i,o)=>(mm(!0),MT(r,i,aO()));function L3(){return Ae()}var ud="en-US";var gF=ud;function mF(n){typeof n=="string"&&(gF=n.toLowerCase().replace(/_/g,"-"))}var yF=(n,e,t)=>{};function nr(n,e,t,r){let i=Ae(),o=Ot(),s=bt();return pb(o,i,i[Qe],s,n,e,r),nr}function vF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[zl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function pb(n,e,t,r,i,o,s){let a=dm(r),l=n.firstCreatePass&&Bk(n),h=e[ln],p=Uk(e),m=!0;if(r.type&3||s){let b=Jt(r,e),A=s?s(b):b,F=p.length,B=s?G=>s(An(G[r.index])):r.index,P=null;if(!s&&a&&(P=vF(n,e,i,r.index)),P!==null){let G=P.__ngLastListenerFn__||P;G.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,m=!1}else{o=nC(r,e,h,o),yF(b,i,o);let G=t.listen(A,i,o);p.push(o,G),l&&l.push(i,B,F,F+1)}}else o=nC(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let b=D.length;if(b)for(let A=0;A<b;A+=2){let F=D[A],B=D[A+1],Y=e[F][B].subscribe(o),K=p.length;p.push(o,Y),l&&l.push(i,r.index,K,-(K+1))}}}function tC(n,e,t,r){let i=ve(null);try{return In(6,e,t),t(r)!==!1}catch(o){return JT(n,o),!1}finally{In(7,e,t),ve(i)}}function nC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?jr(n.index,e):e;Fm(s,5);let a=tC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=tC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function j3(n=1){return oO(n)}function _F(n,e,t){return gb(n,"",e,"",t),_F}function gb(n,e,t,r,i){let o=Ae(),s=db(o,e,t,r);if(s!==ji){let a=Ot(),u=wd();Pm(a,u,o,n,s,o[Qe],i,!1)}return gb}function U3(n,e=""){let t=Ae(),r=Ot(),i=n+Or,o=r.firstCreatePass?Td(r,i,1,e,null):r.data[i],s=wF(r,t,o,e,n);t[i]=s,gm()&&xm(r,t,s,o),eu(o,!1)}var wF=(n,e,t,r,i)=>(mm(!0),ZO(e[Qe],r));function EF(n){return mb("",n,""),EF}function mb(n,e,t){let r=Ae(),i=db(r,n,e,t);return i!==ji&&$k(r,as(),i),mb}function IF(n,e,t){ub(e)&&(e=e());let r=Ae(),i=_d();if(ru(r,i,e)){let o=Ot(),s=wd();Pm(o,s,r,n,e,r[Qe],t,!1)}return IF}function B3(n,e){let t=ub(n);return t&&n.set(e),t}function DF(n,e){let t=Ae(),r=Ot(),i=bt();return pb(r,t,t[Qe],i,n,e),DF}function CF(n,e,t){let r=Ot();if(r.firstCreatePass){let i=kr(n);Zg(t,r.data,r.blueprint,i,!0),Zg(e,r.data,r.blueprint,i,!1)}}function Zg(n,e,t,r,i){if(n=It(n),Array.isArray(n))for(let o=0;o<n.length;o++)Zg(n[o],e,t,r,i);else{let o=Ot(),s=Ae(),a=bt(),u=Yo(n)?n:It(n.provide),l=RC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Yo(n)||!n.multi){let y=new ki(l,i,ie),D=fg(u,e,i?h:h+m,p);D===-1?(Sg(Jl(a,s),o,u),hg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=fg(u,e,h+m,p),D=fg(u,e,h,h+m),b=y>=0&&t[y],A=D>=0&&t[D];if(i&&!A||!i&&!b){Sg(Jl(a,s),o,u);let F=AF(i?bF:TF,t.length,i,r,l);!i&&A&&(t[D].providerFactory=F),hg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=yb(t[i?D:y],l,!i&&r);hg(o,n,y>-1?y:D,F)}!i&&r&&A&&t[D].componentProviders++}}}function hg(n,e,t,r){let i=Yo(e),o=SP(e);if(i||o){let u=(o?It(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function yb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function TF(n,e,t,r){return Jg(this.multi,[])}function bF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=es(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),Jg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Jg(i,o);return o}function Jg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function AF(n,e,t,r,i){let o=new ki(n,t,ie);return o.multi=[],o.index=e,o.componentProviders=0,yb(o,i,r&&!t),o}function en(n,e=[]){return t=>{t.providersResolver=(r,i)=>CF(r,i?i(n):n,e)}}var SF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=SC(!1,t.type),i=r.length>0?Md([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(L(Ct))})}}return n})();function vb(n){Ui("NgStandalone"),n.getStandaloneInjector=e=>e.get(SF).getOrCreateStandaloneInjector(n)}var Jn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Um=new Jn("18.2.8");var Rd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var _b=new H("");function Bi(n){return!!n&&typeof n.then=="function"}function wb(n){return!!n&&typeof n.subscribe=="function"}var Nd=new H(""),Eb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(Nd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Bi(o))t.push(o);else if(wb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iu=new H("");function MF(){QI(()=>{throw new X(600,!1)})}function xF(n){return n.isBoundToModule}var RF=10;function NF(n,e,t){try{let r=t();return Bi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var $r=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(NO),this.afterRenderManager=V(lb),this.zonelessEnabled=V(Sd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Pe,this.afterTick=new Pe,this.componentTypes=[],this.components=[],this.isStable=V(Ur).hasPendingTasks.pipe(J(t=>!t)),this._injector=V(Ct)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof id;if(!this._injector.get(Eb).done){let m=!i&&CC(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(ns).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=xF(s)?void 0:this._injector.get(Fr),u=r||s.selector,l=s.create(Vt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(_b,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Ll(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ve(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(rs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<RF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)PF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>yd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ll(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(iu,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ll(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ll(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PF(n,e,t,r){if(!t&&!yd(n))return;tb(n,e,t&&!r?0:1)}var Xg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Pd=(()=>{class n{compileModuleSync(t){return new Gg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=TC(t),o=ST(i.declarations).reduce((s,a)=>{let u=Pr(a);return u&&s.push(new is(u)),s},[]);return new Xg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var OF=(()=>{class n{constructor(){this.zone=V(_e),this.changeDetectionScheduler=V(ts),this.applicationRef=V($r)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kF=new H("",{factory:()=>!1});function Ib({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(de(j({},Db()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:Qo,multi:!0,useFactory:()=>{let r=V(OF,{optional:!0});return()=>r.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let r=V(FF);return()=>{r.initialize()}}},e===!0?{provide:ob,useValue:!0}:[],{provide:sb,useValue:t??gT}]}function $3(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Ib({ngZoneFactory:()=>{let i=Db(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ui("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Lr([{provide:kF,useValue:!0},{provide:Sd,useValue:!1},r])}function Db(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var FF=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=V(_e),this.pendingTasks=V(Ur)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VF=(()=>{class n{constructor(){this.appRef=V($r),this.taskService=V(Ur),this.ngZone=V(_e),this.zonelessEnabled=V(Sd),this.disableScheduling=V(ob,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ed):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(sb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?LD:mT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ed+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,LD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LF(){return typeof $localize<"u"&&$localize.locale||ud}var Bm=new H("",{providedIn:"root",factory:()=>V(Bm,le.Optional|le.SkipSelf)||LF()});var em=new H("");function Ol(n){return!n.moduleRef}function jF(n){let e=Ol(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{Ol(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Yn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ol(n)){let o=()=>e.destroy(),s=n.platformInjector.get(em);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(em);s.add(o),n.moduleRef.onDestroy(()=>{Ll(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return NF(r,t,()=>{let o=e.get(Eb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Bm,ud);if(mF(s||ud),Ol(n)){let a=e.get($r);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return UF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function UF(n,e){let t=n.injector.get($r);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var jl=null;function BF(n=[],e){return Vt.create({name:e,providers:[{provide:pd,useValue:"platform"},{provide:em,useValue:new Set([()=>jl=null])},...n]})}function $F(n=[]){if(jl)return jl;let e=BF(n);return jl=e,MF(),qF(e),e}function qF(n){n.get(Cm,null)?.forEach(t=>t())}function $m(){return!1}var $i=(()=>{class n{static{this.__NG_ELEMENT_ID__=HF}}return n})();function HF(n){return zF(bt(),Ae(),(n&16)===16)}function zF(n,e,t){if(md(n)&&!t){let r=jr(n.index,e);return new Vi(r,r)}else if(n.type&175){let r=e[bn];return new Vi(r,e)}return null}var tm=class{constructor(){}supports(e){return cb(e)}create(e){return new nm(e)}},GF=(n,e)=>e,nm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||GF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<rC(r,i,o)?t:r,a=rC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cb(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,j1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new rm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},im=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new im,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function rC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function iC(){return new qm([new tm])}var qm=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:iC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||iC()),deps:[[n,new sm,new Vr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();function Cb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=$F(r),o=[Ib({}),{provide:ts,useExisting:VF},...t||[]],s=new sd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return jF({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function qi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ou(n,e){Ui("NgSignals");let t=GI(n);return e?.equal&&(t[zn].equal=e.equal),t}function rr(n){let e=ve(null);try{return n()}finally{ve(e)}}function Tb(n){let e=Pr(n);if(!e)return null;let t=new is(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var xb=null;function sr(){return xb}function Rb(n){xb??=n}var Od=class{};var gt=new H(""),Km=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(KF),providedIn:"platform"})}}return n})(),Nb=new H(""),KF=(()=>{class n extends Km{constructor(){super(),this._doc=V(gt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sr().getBaseHref(this._doc)}onPopState(t){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Qm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function bb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function or(n){return n&&n[0]!=="?"?"?"+n:n}var ar=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Ym),providedIn:"root"})}}return n})(),Pb=new H(""),Ym=(()=>{class n extends ar{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Qm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+or(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+or(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+or(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Km),L(Pb,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ob=(()=>{class n extends ar{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Qm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+or(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+or(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Km),L(Pb,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),ls=(()=>{class n{constructor(t){this._subject=new $e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=ZF(bb(Ab(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+or(r))}normalize(t){return n.stripTrailingSlash(YF(this._basePath,Ab(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+or(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+or(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=or}static{this.joinWithSlash=Qm}static{this.stripTrailingSlash=bb}static{this.\u0275fac=function(r){return new(r||n)(L(ar))}}static{this.\u0275prov=W({token:n,factory:()=>QF(),providedIn:"root"})}}return n})();function QF(){return new ls(L(ar))}function YF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Ab(n){return n.replace(/\/index.html$/,"")}function ZF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function kd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},p8=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Hm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Sb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Sb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(us),ie(Ad),ie(qm))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Sb(n,e){n.context.$implicit=e.item}var g8=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(us),ie(Ad))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),zm=class{constructor(){this.$implicit=null,this.ngIf=null}};function Mb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Dt(e)}'.`)}var JF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Qt({})}}return n})(),Zm="browser",XF="server";function eV(n){return n===Zm}function qr(n){return n===XF}var kb=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>eV(V(at))?new Gm(V(gt),window):new Wm})}}return n})(),Gm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=tV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function tV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Wm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},cs=class{};var au=class{},Vd=class{},ur=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Xm=class{encodeKey(e){return Vb(e)}encodeValue(e){return Vb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var rV=/%(\d[a-f0-9])/gi,iV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Vb(n){return encodeURIComponent(n).replace(rV,(e,t)=>iV[t]??e)}function Fd(n){return`${n}`}var zr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Xm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Fd):[Fd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Fd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Fd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ey=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function oV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Lb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function jb(n){return typeof Blob<"u"&&n instanceof Blob}function Ub(n){return typeof FormData<"u"&&n instanceof FormData}function sV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var su=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(oV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ur,this.context??=new ey,!this.params)this.params=new zr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Lb(this.body)||jb(this.body)||Ub(this.body)||sV(this.body)?this.body:this.body instanceof zr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ub(this.body)?null:jb(this.body)?this.body.type||null:Lb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof zr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Gr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gr||{}),uu=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ur,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ld=class n extends uu{constructor(e={}){super(e),this.type=Gr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cu=class n extends uu{constructor(e={}){super(e),this.type=Gr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Hr=class extends uu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Hb=200,aV=204;function Jm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var uV=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof su)o=t;else{let u;i.headers instanceof ur?u=i.headers:u=new ur(i.headers);let l;i.params&&(i.params instanceof zr?l=i.params:l=new zr({fromObject:i.params})),o=new su(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(Kn(u=>this.handler.handle(u)));if(t instanceof su||i.observe==="events")return s;let a=s.pipe(tt(u=>u instanceof cu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(J(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new zr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Jm(i,r))}post(t,r,i={}){return this.request("POST",t,Jm(i,r))}put(t,r,i={}){return this.request("PUT",t,Jm(i,r))}static{this.\u0275fac=function(r){return new(r||n)(L(au))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),cV=/^\)\]\}',?\n/,lV="X-Request-URL";function Bb(n){if(n.url)return n.url;let e=lV.toLocaleLowerCase();return n.headers.get(e)}var dV=(()=>{class n{constructor(){this.fetchImpl=V(ty,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=V(_e)}handle(t){return new oe(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(ny,o=>r.error(new Hr({error:o}))),()=>i.abort()})}doRequest(t,r,i){return N(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,j({signal:r},o)));hV(y),i.next({type:Gr.Sent}),s=yield y}catch(y){i.error(new Hr({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new ur(s.headers),u=s.statusText,l=Bb(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new Ld({headers:a,status:h,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),D=[],b=s.body.getReader(),A=0,F,B,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:Y,value:K}=yield b.read();if(Y)break;if(D.push(K),A+=K.length,t.reportProgress){B=t.responseType==="text"?(B??"")+(F??=new TextDecoder).decode(K,{stream:!0}):void 0;let E=()=>i.next({type:Gr.DownloadProgress,total:y?+y:void 0,loaded:A,partialText:B});P?P.run(E):E()}}}));let G=this.concatChunks(D,A);try{let Y=s.headers.get("Content-Type")??"";p=this.parseBody(t,G,Y)}catch(Y){i.error(new Hr({error:Y,headers:new ur(s.headers),status:s.status,statusText:s.statusText,url:Bb(s)??t.urlWithParams}));return}}h===0&&(h=p?Hb:0),h>=200&&h<300?(i.next(new cu({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new Hr({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(cV,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),ty=class{};function ny(){}function hV(n){n.then(ny,ny)}function fV(n,e){return e(n)}function pV(n,e,t){return(r,i)=>Zt(t,()=>e(r,o=>n(o,i)))}var zb=new H(""),gV=new H(""),mV=new H("",{providedIn:"root",factory:()=>!0});var $b=(()=>{class n extends au{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=V(Ur),this.contributeToStability=V(mV)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(zb),...this.injector.get(gV,[])]));this.chain=r.reduceRight((i,o)=>pV(i,o,this.injector),fV)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Si(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(L(Vd),L(Ct))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();var yV=/^\)\]\}',?\n/;function vV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var qb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new X(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ge(r.\u0275loadImpl()):Z(null)).pipe(Oe(()=>new oe(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,A)=>s.setRequestHeader(b,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader("Content-Type",b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let b=s.statusText||"OK",A=new ur(s.getAllResponseHeaders()),F=vV(s)||t.url;return u=new Ld({headers:A,status:s.status,statusText:b,url:F}),u},h=()=>{let{headers:b,status:A,statusText:F,url:B}=l(),P=null;A!==aV&&(P=typeof s.response>"u"?s.responseText:s.response),A===0&&(A=P?Hb:0);let G=A>=200&&A<300;if(t.responseType==="json"&&typeof P=="string"){let Y=P;P=P.replace(yV,"");try{P=P!==""?JSON.parse(P):null}catch(K){P=Y,G&&(G=!1,P={error:K,text:P})}}G?(o.next(new cu({body:P,headers:b,status:A,statusText:F,url:B||void 0})),o.complete()):o.error(new Hr({error:P,headers:b,status:A,statusText:F,url:B||void 0}))},p=b=>{let{url:A}=l(),F=new Hr({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(F)},m=!1,y=b=>{m||(o.next(l()),m=!0);let A={type:Gr.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),t.responseType==="text"&&s.responseText&&(A.partialText=s.responseText),o.next(A)},D=b=>{let A={type:Gr.UploadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),o.next(A)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:Gr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(L(cs))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Gb=new H(""),_V="XSRF-TOKEN",wV=new H("",{providedIn:"root",factory:()=>_V}),EV="X-XSRF-TOKEN",IV=new H("",{providedIn:"root",factory:()=>EV}),jd=class{},DV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=kd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(L(gt),L(at),L(wV))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function CV(n,e){let t=n.url.toLowerCase();if(!V(Gb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=V(jd).getToken(),i=V(IV);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function M8(...n){let e=[uV,qb,$b,{provide:au,useExisting:$b},{provide:Vd,useFactory:()=>V(dV,{optional:!0})??V(qb)},{provide:zb,useValue:CV,multi:!0},{provide:Gb,useValue:!0},{provide:jd,useClass:DV}];for(let t of n)e.push(...t.\u0275providers);return Lr(e)}var oy=class extends Od{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sy=class n extends oy{static makeCurrent(){Rb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=TV();return t==null?null:bV(t)}resetBaseElement(){lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kd(document.cookie,e)}},lu=null;function TV(){return lu=lu||document.querySelector("base"),lu?lu.getAttribute("href"):null}function bV(n){return new URL(n,document.baseURI).pathname}var AV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),ay=new H(""),Yb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(ay),L(_e))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Ud=class{constructor(e){this._doc=e}},ry="ng-app-id",Zb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ry}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ry),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ry,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(gt),L(Dm),L(Tm,8),L(at))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),iy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},cy=/%COMP%/g,Jb="%COMP%",SV=`_nghost-${Jb}`,MV=`_ngcontent-${Jb}`,xV=!0,RV=new H("",{providedIn:"root",factory:()=>xV});function NV(n){return MV.replace(cy,n)}function PV(n){return SV.replace(cy,n)}function Xb(n,e){return e.map(t=>t.replace(cy,n))}var Wb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=qr(a),this.defaultRenderer=new du(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cn.ShadowDom&&(r=de(j({},r),{encapsulation:Cn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Bd?i.applyToHost(t):i instanceof hu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Cn.Emulated:o=new Bd(u,l,r,this.appId,h,s,a,p);break;case Cn.ShadowDom:return new uy(u,l,t,r,s,a,this.nonce,p);default:o=new hu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(Yb),L(Zb),L(Dm),L(RV),L(gt),L(at),L(_e),L(Tm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),du=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(iy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Kb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Kb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=iy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=iy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zn.DashCase|Zn.Important)?e.style.setProperty(t,r,i&Zn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Kb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var uy=class extends du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Xb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},hu=class extends du{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Xb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bd=class extends hu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=NV(l),this.hostAttr=PV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},OV=(()=>{class n extends Ud{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(gt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Qb=["alt","control","meta","shift"],kV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VV=(()=>{class n extends Ud{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Qb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=kV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Qb.forEach(s=>{if(s!==i){let a=FV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(gt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function t5(n,e){return Cb(j({rootComponent:n},LV(e)))}function LV(n){return{appProviders:[...qV,...n?.providers??[]],platformProviders:$V}}function jV(){sy.makeCurrent()}function UV(){return new Yn}function BV(){return DT(document),document}var $V=[{provide:at,useValue:Zm},{provide:Cm,useValue:jV,multi:!0},{provide:gt,useFactory:BV,deps:[]}];var qV=[{provide:pd,useValue:"root"},{provide:Yn,useFactory:UV,deps:[]},{provide:ay,useClass:OV,multi:!0,deps:[gt,_e,at]},{provide:ay,useClass:VV,multi:!0,deps:[gt]},Wb,Zb,Yb,{provide:rs,useExisting:Wb},{provide:cs,useClass:AV,deps:[]},[]];var e0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(gt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ce="primary",Au=Symbol("RouteTitle"),py=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ms(n){return new py(n)}function zV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function GV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?gy(n):void 0,r=e?gy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!d0(n[i],e[i]))return!1;return!0}function gy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function d0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function h0(n){return n.length>0?n[n.length-1]:null}function Qr(n){return Wp(n)?n:Bi(n)?ge(Promise.resolve(n)):Z(n)}var WV={exact:p0,subset:g0},f0={exact:KV,subset:QV,ignored:()=>!0};function t0(n,e,t){return WV[t.paths](n.root,e.root,t.matrixParams)&&f0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KV(n,e){return xn(n,e)}function p0(n,e,t){if(!zi(n.segments,e.segments)||!Hd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!p0(n.children[r],e.children[r],t))return!1;return!0}function QV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>d0(n[t],e[t]))}function g0(n,e,t){return m0(n,e,e.segments,t)}function m0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!zi(i,t)||e.hasChildren()||!Hd(i,t,r))}else if(n.segments.length===t.length){if(!zi(n.segments,t)||!Hd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!g0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!zi(n.segments,i)||!Hd(n.segments,i,r)||!n.children[ce]?!1:m0(n.children[ce],e,o,r)}}function Hd(n,e,t){return e.every((r,i)=>f0[t](n[i].parameters,r.parameters))}var lr=class{constructor(e=new Ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){return JV.serialize(this)}},Ie=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zd(this)}},Hi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ms(this.parameters),this._parameterMap}toString(){return v0(this)}};function YV(n,e){return zi(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function zi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ZV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Su=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new ys,providedIn:"root"})}}return n})(),ys=class{parse(e){let t=new yy(e);return new lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${fu(e.root,!0)}`,r=tL(e.queryParams),i=typeof e.fragment=="string"?`#${XV(e.fragment)}`:"";return`${t}${r}${i}`}},JV=new ys;function zd(n){return n.segments.map(e=>v0(e)).join("/")}function fu(n,e){if(!n.hasChildren())return zd(n);if(e){let t=n.children[ce]?fu(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${fu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ZV(n,(r,i)=>i===ce?[fu(n.children[ce],!1)]:[`${i}:${fu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${zd(n)}/${t[0]}`:`${zd(n)}/(${t.join("//")})`}}function y0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $d(n){return y0(n).replace(/%3B/gi,";")}function XV(n){return encodeURI(n)}function my(n){return y0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gd(n){return decodeURIComponent(n)}function n0(n){return Gd(n.replace(/\+/g,"%20"))}function v0(n){return`${my(n.path)}${eL(n.parameters)}`}function eL(n){return Object.entries(n).map(([e,t])=>`;${my(e)}=${my(t)}`).join("")}function tL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$d(t)}=${$d(i)}`).join("&"):`${$d(t)}=${$d(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var nL=/^[^\/()?;#]+/;function ly(n){let e=n.match(nL);return e?e[0]:""}var rL=/^[^\/()?;=#]+/;function iL(n){let e=n.match(rL);return e?e[0]:""}var oL=/^[^=?&#]+/;function sL(n){let e=n.match(oL);return e?e[0]:""}var aL=/^[^&#]+/;function uL(n){let e=n.match(aL);return e?e[0]:""}var yy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new Ie(e,t)),r}parseSegment(){let e=ly(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Hi(Gd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=iL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ly(this.remaining);i&&(r=i,this.capture(r))}e[Gd(t)]=Gd(r)}parseQueryParam(e){let t=sL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=uL(this.remaining);s&&(r=s,this.capture(r))}let i=n0(t),o=n0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ly(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new Ie([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function _0(n){return n.segments.length>0?new Ie([],{[ce]:n}):n}function w0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=w0(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ie(n.segments,e);return cL(t)}function cL(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new Ie(n.segments.concat(e.segments),e.children)}return n}function Gi(n){return n instanceof lr}function lL(n,e,t=null,r=null){let i=E0(n);return I0(i,e,t,r)}function E0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=_0(r);return e??i}function I0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return dy(i,i,i,t,r);let o=dL(e);if(o.toRoot())return dy(i,i,new Ie([],{}),t,r);let s=hL(o,i,n),a=s.processChildren?mu(s.segmentGroup,s.index,o.commands):C0(s.segmentGroup,s.index,o.commands);return dy(i,s.segmentGroup,a,t,r)}function Wd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _u(n){return typeof n=="object"&&n!=null&&n.outlets}function dy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=D0(n,e,t);let a=_0(w0(s));return new lr(a,o,i)}function D0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=D0(o,e,t)}),new Ie(n.segments,r)}var Kd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wd(r[0]))throw new X(4003,!1);let i=r.find(_u);if(i&&i!==h0(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Kd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Kd(t,e,r)}var fs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function hL(n,e,t){if(n.isAbsolute)return new fs(e,!0,0);if(!t)return new fs(e,!1,NaN);if(t.parent===null)return new fs(t,!0,0);let r=Wd(n.commands[0])?0:1,i=t.segments.length-1+r;return fL(t,i,n.numberOfDoubleDots)}function fL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new fs(r,!1,i-o)}function pL(n){return _u(n[0])?n[0].outlets:{[ce]:n}}function C0(n,e,t){if(n??=new Ie([],{}),n.segments.length===0&&n.hasChildren())return mu(n,e,t);let r=gL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ie(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new Ie(n.segments.slice(r.pathIndex),n.children),mu(o,0,i)}else return r.match&&i.length===0?new Ie(n.segments,{}):r.match&&!n.hasChildren()?vy(n,e,t):r.match?mu(n,0,i):vy(n,e,t)}function mu(n,e,t){if(t.length===0)return new Ie(n.segments,{});{let r=pL(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=mu(n.children[ce],e,t);return new Ie(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=C0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(n.segments,i)}}function gL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(_u(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!i0(u,l,s))return o;r+=2}else{if(!i0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(_u(o)){let u=mL(o.outlets);return new Ie(r,u)}if(i===0&&Wd(t[0])){let u=n.segments[e];r.push(new Hi(u.path,r0(t[0]))),i++;continue}let s=_u(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Wd(a)?(r.push(new Hi(s,r0(a))),i+=2):(r.push(new Hi(s,{})),i++)}return new Ie(r,{})}function mL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=vy(new Ie([],{}),0,r))}),e}function r0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function i0(n,e,t){return n==t.path&&xn(e,t.parameters)}var yu="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},vs=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(jt||{}),Qd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qd||{}),cr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},wu=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yd=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_y=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wy=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ey=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iy=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cy=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ty=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},by=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ay=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sy=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=it.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Eu=class{},_s=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yL(n,e){return n.providers&&!n._injector&&(n._injector=Md(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hn(n){return n.outlet||ce}function vL(n,e){let t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}function Mu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var My=class{get injector(){return Mu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xu(this.rootInjector),this.attachRef=null}},xu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new My(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(Ct))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ry(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ry(e,this._root).map(t=>t.value)}};function xy(n,e){if(n===e.value)return e;for(let t of e.children){let r=xy(n,t);if(r)return r}return null}function Ry(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ry(n,t);if(r.length)return r.unshift(e),r}return[]}var Lt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function hs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xd=class extends Jd{constructor(e,t){super(e),this.snapshot=t,Uy(this,e)}toString(){return this.snapshot.toString()}};function T0(n){let e=_L(n),t=new st([new Hi("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Kr(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new Xd(new Lt(a,[]),e)}function _L(n){let e={},t={},r={},i="",o=new ps([],e,r,i,t,ce,n,null,{});return new th("",new Lt(o,[]))}var Kr=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Au]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function eh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&A0(i)&&(r.resolve[Au]=i.title),r}var ps=class{get title(){return this.data?.[Au]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},th=class extends Jd{constructor(e,t){super(t),this.url=e,Uy(this,t)}toString(){return b0(this._root)}};function Uy(n,e){e.value._routerState=n,e.children.forEach(t=>Uy(n,t))}function b0(n){let e=n.children.length>0?` { ${n.children.map(b0).join(", ")} } `:"";return`${n.value}${e}`}function hy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),GV(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ny(n,e){let t=xn(n.params,e.params)&&YV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ny(n.parent,e.parent))}function A0(n){return typeof n.title=="string"||n.title===null}var wL=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=V(xu),this.location=V(us),this.changeDetector=V($i),this.inputBinder=V(oh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Py(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sn]})}}return n})(),Py=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Kr?this.route:e===xu?this.childContexts:this.parent.get(e,t)}},oh=new H(""),o0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=$a([r.queryParams,r.params,r.data]).pipe(Oe(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Tb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function EL(n,e,t){let r=Iu(n,e._root,t?t._root:void 0);return new Xd(r,e)}function Iu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=IL(n,e,t);return new Lt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Iu(n,a)),s}}let r=DL(e.value),i=e.children.map(o=>Iu(n,o));return new Lt(r,i)}}function IL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Iu(n,r,i);return Iu(n,r)})}function DL(n){return new Kr(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var Du=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},S0="ngNavigationCancelingError";function nh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=M0(!1,jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function M0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[S0]=!0,t.cancellationCode=e,t}function CL(n){return x0(n)&&Gi(n.url)}function x0(n){return!!n&&n[S0]}var TL=(n,e,t,r)=>J(i=>(new Oy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Oy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=hs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=hs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Sy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new by(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(hy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),hy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},rh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},gs=class{constructor(e,t){this.component=e,this.route=t}};function bL(n,e,t){let r=n._root,i=e?e._root:null;return pu(r,i,t,[r.value])}function AL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Es(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!uC(n)?n:e.get(n):r}function pu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=hs(e);return n.children.forEach(s=>{SL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vu(a,t.getContext(s),i)),i}function SL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=ML(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pu(n,e,a?a.children:null,r,i):pu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gs(a.outlet.component,s))}else s&&vu(e,a,i),i.canActivateChecks.push(new rh(r)),o.component?pu(n,null,a?a.children:null,r,i):pu(n,null,t,r,i);return i}function ML(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!zi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zi(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ny(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Ny(n,e)}}function vu(n,e,t){let r=hs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?vu(s,e.children.getContext(o),t):vu(s,null,t):vu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new gs(e.outlet.component,i)):t.canDeactivateChecks.push(new gs(null,i)):t.canDeactivateChecks.push(new gs(null,i))}function Ru(n){return typeof n=="function"}function xL(n){return typeof n=="boolean"}function RL(n){return n&&Ru(n.canLoad)}function NL(n){return n&&Ru(n.canActivate)}function PL(n){return n&&Ru(n.canActivateChild)}function OL(n){return n&&Ru(n.canDeactivate)}function kL(n){return n&&Ru(n.canMatch)}function R0(n){return n instanceof Wn||n?.name==="EmptyError"}var qd=Symbol("INITIAL_VALUE");function ws(){return Oe(n=>$a(n.map(e=>e.pipe(Qn(1),xi(qd)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===qd)return qd;if(t===!1||FL(t))return t}return!0}),tt(e=>e!==qd),Qn(1)))}function FL(n){return Gi(n)||n instanceof Du}function VL(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(de(j({},t),{guardsResult:!0})):LL(s,r,i,n).pipe(We(a=>a&&xL(a)?jL(r,o,n,e):Z(a)),J(a=>de(j({},t),{guardsResult:a})))})}function LL(n,e,t,r){return ge(n).pipe(We(i=>HL(i.component,i.route,t,e,r)),Ht(i=>i!==!0,!0))}function jL(n,e,t,r){return ge(e).pipe(Kn(i=>jo(BL(i.route.parent,r),UL(i.route,r),qL(n,i.path,t),$L(n,i.route,t))),Ht(i=>i!==!0,!0))}function UL(n,e){return n!==null&&e&&e(new Ay(n)),Z(!0)}function BL(n,e){return n!==null&&e&&e(new Ty(n)),Z(!0)}function $L(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>bl(()=>{let s=Mu(e)??t,a=Es(o,s),u=NL(a)?a.canActivate(e,n):Zt(s,()=>a(e,n));return Qr(u).pipe(Ht())}));return Z(i).pipe(ws())}function qL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>AL(s)).filter(s=>s!==null).map(s=>bl(()=>{let a=s.guards.map(u=>{let l=Mu(s.node)??t,h=Es(u,l),p=PL(h)?h.canActivateChild(r,n):Zt(l,()=>h(r,n));return Qr(p).pipe(Ht())});return Z(a).pipe(ws())}));return Z(o).pipe(ws())}function HL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Mu(e)??i,l=Es(a,u),h=OL(l)?l.canDeactivate(n,e,t,r):Zt(u,()=>l(n,e,t,r));return Qr(h).pipe(Ht())});return Z(s).pipe(ws())}function zL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Es(s,n),u=RL(a)?a.canLoad(e,t):Zt(n,()=>a(e,t));return Qr(u)});return Z(o).pipe(ws(),N0(r))}function N0(n){return Bp(Ke(e=>{if(typeof e!="boolean")throw nh(n,e)}),J(e=>e===!0))}function GL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Es(s,n),u=kL(a)?a.canMatch(e,t):Zt(n,()=>a(e,t));return Qr(u)});return Z(o).pipe(ws(),N0(r))}var Cu=class{constructor(e){this.segmentGroup=e||null}},Tu=class extends Error{constructor(e){super(),this.urlTree=e}};function ds(n){return Lo(new Cu(n))}function WL(n){return Lo(new X(4e3,!1))}function KL(n){return Lo(M0(!1,jt.GuardRejected))}var ky=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ce])return WL(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:b}=i,A=Zt(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:b}));if(A instanceof lr)throw new Tu(A);t=A}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Tu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new lr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function QL(n,e,t,r,i){let o=P0(n,e,t);return o.matched?(r=yL(e,r),GL(r,e,t,i).pipe(J(s=>s===!0?o:j({},Fy)))):Z(o)}function P0(n,e,t){if(e.path==="**")return YL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},Fy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zV)(t,n,e);if(!i)return j({},Fy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function YL(n){return{matched:!0,parameters:n.length>0?h0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function s0(n,e,t,r){return t.length>0&&XL(n,t,r)?{segmentGroup:new Ie(e,JL(r,new Ie(t,n.children))),slicedSegments:[]}:t.length===0&&ej(n,t,r)?{segmentGroup:new Ie(n.segments,ZL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ie(n.segments,n.children),slicedSegments:t}}function ZL(n,e,t,r){let i={};for(let o of t)if(sh(n,e,o)&&!r[hn(o)]){let s=new Ie([],{});i[hn(o)]=s}return j(j({},r),i)}function JL(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&hn(r)!==ce){let i=new Ie([],{});t[hn(r)]=i}return t}function XL(n,e,t){return t.some(r=>sh(n,e,r)&&hn(r)!==ce)}function ej(n,e,t){return t.some(r=>sh(n,e,r))}function sh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tj(n,e,t){return e.length===0&&!n.children[t]}var Vy=class{};function nj(n,e,t,r,i,o,s="emptyOnly"){return new Ly(n,e,t,r,i,s,o).recognize()}var rj=31,Ly=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ky(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=s0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Lt(r,t),o=new th("",i),s=lL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ps([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(J(r=>({children:r,rootSnapshot:t})),Ar(r=>{if(r instanceof Tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Cu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Lt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ge(o).pipe(Kn(s=>{let a=r.children[s],u=vL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Mi((s,a)=>(s.push(...a),s)),Sr(null),Jp(),We(s=>{if(s===null)return ds(r);let a=O0(s);return ij(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ge(t).pipe(Kn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Ar(l=>{if(l instanceof Cu)return Z(null);throw l}))),Ht(u=>!!u),Ar(u=>{if(R0(u))return tj(r,i,o)?Z(new Vy):ds(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return hn(r)!==s&&(s===ce||!sh(i,o,r))?ds(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ds(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=P0(t,i,o);if(!u)return ds(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rj&&(this.allowRedirects=!1));let y=new ps(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,a0(i),hn(i),i.component??i._loadedComponent??null,i,u0(i)),D=eh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let b=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(We(A=>this.processSegment(e,r,t,A.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=QL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Oe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Oe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,D=new ps(m,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,a0(r),hn(r),r.component??r._loadedComponent??null,r,u0(r)),b=eh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(b.params),D.data=Object.freeze(b.data);let{segmentGroup:A,slicedSegments:F}=s0(t,m,y,l);if(F.length===0&&A.hasChildren())return this.processChildren(h,l,A,D).pipe(J(P=>new Lt(D,P)));if(l.length===0&&F.length===0)return Z(new Lt(D,[]));let B=hn(r)===o;return this.processSegment(h,l,A,F,B?ce:o,!0,D).pipe(J(P=>new Lt(D,P instanceof Lt?[P]:[])))}))):ds(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):zL(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):KL(t))):Z({routes:[],injector:e})}};function ij(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function oj(n){let e=n.value.routeConfig;return e&&e.path===""}function O0(n){let e=[],t=new Set;for(let r of n){if(!oj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=O0(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!t.has(r))}function a0(n){return n.data||{}}function u0(n){return n.resolve||{}}function sj(n,e,t,r,i,o){return We(s=>nj(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>de(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function aj(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of k0(u))s.add(l);let a=0;return ge(s).pipe(Kn(u=>o.has(u)?uj(u,r,n,e):(u.data=eh(u,u.parent,n).resolve,Z(void 0))),Ke(()=>a++),Uo(1),We(u=>a===s.size?Z(t):Et))})}function k0(n){let e=n.children.map(t=>k0(t)).flat();return[n,...e]}function uj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!A0(i)&&(o[Au]=i.title),cj(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=eh(n,n.parent,t).resolve,null)))}function cj(n,e,t,r){let i=gy(n);if(i.length===0)return Z({});let o={};return ge(i).pipe(We(s=>lj(n[s],e,t,r).pipe(Ht(),Ke(a=>{if(a instanceof Du)throw nh(new ys,a);o[s]=a}))),Uo(1),Yp(o),Ar(s=>R0(s)?Et:Lo(s)))}function lj(n,e,t,r){let i=Mu(e)??r,o=Es(n,i),s=o.resolve?o.resolve(e,t):Zt(i,()=>o(e,t));return Qr(s)}function fy(n){return Oe(e=>{let t=n(e);return t?ge(t).pipe(J(()=>e)):Z(e)})}var F0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[Au]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(dj),providedIn:"root"})}}return n})(),dj=(()=>{class n extends F0{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(e0))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nu=new H("",{providedIn:"root",factory:()=>({})}),hj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=EC({type:n,selectors:[["ng-component"]],standalone:!0,features:[vb],decls:1,vars:0,template:function(r,i){r&1&&jm(0,"router-outlet")},dependencies:[wL],encapsulation:2})}}return n})();function By(n){let e=n.children&&n.children.map(By),t=e?de(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=hj),t}var bu=new H(""),$y=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Pd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Qr(t.loadComponent()).pipe(J(V0),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Si(()=>{this.componentLoaders.delete(t)})),i=new Oo(r,()=>new Pe).pipe(Po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=fj(r,this.compiler,t,this.onLoadEndListener).pipe(Si(()=>{this.childrenLoaders.delete(r)})),s=new Oo(o,()=>new Pe).pipe(Po());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fj(n,e,t,r){return Qr(n.loadChildren()).pipe(J(V0),We(i=>i instanceof Ya||Array.isArray(i)?Z(i):ge(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(bu,[],{optional:!0,self:!0}).flat()),{routes:s.map(By),injector:o}}))}function pj(n){return n&&typeof n=="object"&&"default"in n}function V0(n){return pj(n)?n.default:n}var qy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(gj),providedIn:"root"})}}return n})(),gj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),L0=new H(""),j0=new H("");function mj(n,e,t){let r=n.get(j0),i=n.get(gt);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),yj(n))),{onViewTransitionCreated:u}=r;return u&&Zt(n,()=>u({transition:a,from:e,to:t})),s})}function yj(n){return new Promise(e=>{Lm({read:()=>setTimeout(e)},{injector:n})})}var vj=new H(""),Hy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pe,this.transitionAbortSubject=new Pe,this.configLoader=V($y),this.environmentInjector=V(Ct),this.urlSerializer=V(Su),this.rootContexts=V(xu),this.location=V(ls),this.inputBindingEnabled=V(oh,{optional:!0})!==null,this.titleStrategy=V(F0),this.options=V(Nu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(qy),this.createViewTransition=V(L0,{optional:!0}),this.navigationErrorHandler=V(vj,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Dy(i)),r=i=>this.events.next(new Cy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new st({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:yu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tt(o=>o.id!==0),J(o=>de(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Oe(o=>{let s=!1,a=!1;return Z(o).pipe(Oe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",jt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?de(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Wr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Qd.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Oe(p=>{let m=this.transitions?.getValue();return this.events.next(new vs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),sj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=de(j({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Yd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:b}=u,A=new vs(p,this.urlSerializer.serialize(m),y,D);this.events.next(A);let F=T0(this.rootComponentType).snapshot;return this.currentTransition=o=de(j({},u),{targetSnapshot:F,urlAfterRedirects:m,extras:de(j({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let p="";return this.events.next(new Wr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Qd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),Ke(u=>{let l=new _y(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=o=de(j({},u),{guards:bL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),VL(this.environmentInjector,u=>this.events.next(u)),Ke(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw nh(this.urlSerializer,u.guardsResult);let l=new wy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),tt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",jt.GuardRejected),!1)),fy(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(Ke(l=>{let h=new Ey(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Oe(l=>{let h=!1;return Z(l).pipe(aj(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",jt.NoDataFromResolver)}}))}),Ke(l=>{let h=new Iy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),fy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ke(m=>{h.component=m}),J(()=>{})));for(let m of h.children)p.push(...l(m));return p};return $a(l(u.targetSnapshot.root)).pipe(Sr(null),Qn(1))}),fy(()=>this.afterPreactivation()),Oe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ge(h).pipe(J(()=>o)):Z(o)}),J(u=>{let l=EL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=de(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ke(()=>{this.events.next(new Eu)}),TL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Qn(1),Ke({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),eg(this.transitionAbortSubject.pipe(Ke(u=>{throw u}))),Si(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ar(u=>{if(a=!0,x0(u))this.events.next(new cr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),CL(u)?this.events.next(new _s(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new wu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Du){let{message:p,cancellationCode:m}=nh(this.urlSerializer,h);this.events.next(new cr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new _s(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new cr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _j(n){return n!==yu}var wj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Ej),providedIn:"root"})}}return n})(),jy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Ej=(()=>{class n extends jy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),U0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Ij),providedIn:"root"})}}return n})(),Ij=(()=>{class n extends U0{constructor(){super(...arguments),this.location=V(ls),this.urlSerializer=V(Su),this.options=V(Nu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(qy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new lr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=T0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof vs)this.stateMemento=this.createStateMemento();else if(t instanceof Wr)this.rawUrlTree=r.initialUrl;else if(t instanceof Yd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Eu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof cr&&(t.code===jt.GuardRejected||t.code===jt.NoDataFromResolver)?this.restoreHistory(r):t instanceof wu?this.restoreHistory(r,!0):t instanceof Rn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof lr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gu||{});function B0(n,e){n.events.pipe(tt(t=>t instanceof Rn||t instanceof cr||t instanceof wu||t instanceof Wr),J(t=>t instanceof Rn||t instanceof Wr?gu.COMPLETE:(t instanceof cr?t.code===jt.Redirect||t.code===jt.SupersededByNewNavigation:!1)?gu.REDIRECTING:gu.FAILED),tt(t=>t!==gu.REDIRECTING),Qn(1)).subscribe(()=>{e()})}function Dj(n){throw n}var Cj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Rd),this.stateManager=V(U0),this.options=V(Nu,{optional:!0})||{},this.pendingTasks=V(Ur),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(Hy),this.urlSerializer=V(Su),this.location=V(ls),this.urlHandlingStrategy=V(qy),this._events=new Pe,this.errorHandler=this.options.errorHandler||Dj,this.navigated=!1,this.routeReuseStrategy=V(wj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(bu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(oh,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof cr&&r.code!==jt.Redirect&&r.code!==jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof _s){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_j(i.source)},s);this.scheduleNavigation(a,yu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Aj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(By),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=E0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return I0(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,yu,null,r)}navigate(t,r={skipLocationChange:!1}){return bj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Cj):r===!1?i=j({},Tj):i=r,Gi(t))return t0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return t0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return B0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function Aj(n){return!(n instanceof Eu)&&!(n instanceof _s)}var I5=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Pe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Rn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:bT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ie(dr),ie(Kr),_m("tabindex"),ie(tr),ie(Mn),ie(ar))}}static{this.\u0275dir=Se({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&nr("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Br("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",qi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",qi],replaceUrl:[2,"replaceUrl","replaceUrl",qi],routerLink:"routerLink"},standalone:!0,features:[Vm,Sn]})}}return n})();var ih=class{};var Sj=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(tt(t=>t instanceof Rn),Kn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Md(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ge(i).pipe(br())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(We(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ge([o,s]).pipe(br())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(dr),L(Pd),L(Ct),L(ih),L($y))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$0=new H(""),Mj=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Wr&&t.code===Qd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){jT()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function D5(n,...e){return Lr([{provide:bu,multi:!0,useValue:n},[],{provide:Kr,useFactory:q0,deps:[dr]},{provide:iu,multi:!0,useFactory:H0},e.map(t=>t.\u0275providers)])}function q0(n){return n.routerState.root}function Pu(n,e){return{\u0275kind:n,\u0275providers:e}}function H0(){let n=V(Vt);return e=>{let t=n.get($r);if(e!==t.components[0])return;let r=n.get(dr),i=n.get(z0);n.get(zy)===1&&r.initialNavigation(),n.get(G0,null,le.Optional)?.setUpPreloading(),n.get($0,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var z0=new H("",{factory:()=>new Pe}),zy=new H("",{providedIn:"root",factory:()=>1});function xj(){return Pu(2,[{provide:zy,useValue:0},{provide:Nd,multi:!0,deps:[Vt],useFactory:e=>{let t=e.get(Nb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(dr),o=e.get(z0);B0(i,()=>{r(!0)}),e.get(Hy).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function Rj(){return Pu(3,[{provide:Nd,multi:!0,useFactory:()=>{let e=V(dr);return()=>{e.setUpLocationChangeListener()}}},{provide:zy,useValue:2}])}var G0=new H("");function Nj(n){return Pu(0,[{provide:G0,useExisting:Sj},{provide:ih,useExisting:n}])}function Pj(){return Pu(8,[o0,{provide:oh,useExisting:o0}])}function Oj(n){let e=[{provide:L0,useValue:mj},{provide:j0,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Pu(9,e)}var c0=new H("ROUTER_FORROOT_GUARD"),kj=[ls,{provide:Su,useClass:ys},dr,xu,{provide:Kr,useFactory:q0,deps:[dr]},$y,[]],C5=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[kj,[],{provide:bu,multi:!0,useValue:t},{provide:c0,useFactory:jj,deps:[[dr,new Vr,new sm]]},{provide:Nu,useValue:r||{}},r?.useHash?Vj():Lj(),Fj(),r?.preloadingStrategy?Nj(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Uj(r):[],r?.bindToComponentInputs?Pj().\u0275providers:[],r?.enableViewTransitions?Oj().\u0275providers:[],Bj()]}}static forChild(t){return{ngModule:n,providers:[{provide:bu,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(c0,8))}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Qt({})}}return n})();function Fj(){return{provide:$0,useFactory:()=>{let n=V(kb),e=V(_e),t=V(Nu),r=V(Hy),i=V(Su);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mj(i,r,n,e,t)}}}function Vj(){return{provide:ar,useClass:Ob}}function Lj(){return{provide:ar,useClass:Ym}}function jj(n){return"guarded"}function Uj(n){return[n.initialNavigation==="disabled"?Rj().\u0275providers:[],n.initialNavigation==="enabledBlocking"?xj().\u0275providers:[]]}var l0=new H("");function Bj(){return[{provide:l0,useFactory:H0},{provide:iu,multi:!0,useExisting:l0}]}var rA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ie(tr),ie(Mn))}}static{this.\u0275dir=Se({type:n})}}return n})(),mh=(()=>{class n extends rA{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,features:[pt]})}}return n})(),Ts=new H("");var $j={provide:Ts,useExisting:Pt(()=>iA),multi:!0};function qj(){let n=sr()?sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Hj=new H(""),iA=(()=>{class n extends rA{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!qj())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(tr),ie(Mn),ie(Hj,8))}}static{this.\u0275dir=Se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&nr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[en([$j]),pt]})}}return n})();function Yr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function oA(n){return n!=null&&typeof n.length=="number"}var Qi=new H(""),Jy=new H(""),zj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,W0=class{static min(e){return sA(e)}static max(e){return aA(e)}static required(e){return Gj(e)}static requiredTrue(e){return Wj(e)}static email(e){return Kj(e)}static minLength(e){return uA(e)}static maxLength(e){return cA(e)}static pattern(e){return Qj(e)}static nullValidator(e){return uh(e)}static compose(e){return gA(e)}static composeAsync(e){return yA(e)}};function sA(n){return e=>{if(Yr(e.value)||Yr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function aA(n){return e=>{if(Yr(e.value)||Yr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Gj(n){return Yr(n.value)?{required:!0}:null}function Wj(n){return n.value===!0?null:{required:!0}}function Kj(n){return Yr(n.value)||zj.test(n.value)?null:{email:!0}}function uA(n){return e=>Yr(e.value)||!oA(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function cA(n){return e=>oA(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Qj(n){if(!n)return uh;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Yr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function uh(n){return null}function lA(n){return n!=null}function dA(n){return Bi(n)?ge(n):n}function hA(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function fA(n,e){return e.map(t=>t(n))}function Yj(n){return!n.validate}function pA(n){return n.map(e=>Yj(e)?e:t=>e.validate(t))}function gA(n){if(!n)return null;let e=n.filter(lA);return e.length==0?null:function(t){return hA(fA(t,e))}}function mA(n){return n!=null?gA(pA(n)):null}function yA(n){if(!n)return null;let e=n.filter(lA);return e.length==0?null:function(t){let r=fA(t,e).map(dA);return Kp(r).pipe(J(hA))}}function vA(n){return n!=null?yA(pA(n)):null}function K0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _A(n){return n._rawValidators}function wA(n){return n._rawAsyncValidators}function Gy(n){return n?Array.isArray(n)?n:[n]:[]}function ch(n,e){return Array.isArray(n)?n.includes(e):n===e}function Q0(n,e){let t=Gy(e);return Gy(n).forEach(i=>{ch(t,i)||t.push(i)}),t}function Y0(n,e){return Gy(e).filter(t=>!ch(n,t))}var lh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Wi=class extends lh{get formDirective(){return null}get path(){return null}},Ki=class extends lh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Zj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$5=de(j({},Zj),{"[class.ng-submitted]":"isSubmitted"}),q5=(()=>{class n extends dh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Ki,2))}}static{this.\u0275dir=Se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&xd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[pt]})}}return n})(),H5=(()=>{class n extends dh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Wi,10))}}static{this.\u0275dir=Se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&xd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[pt]})}}return n})();var Ou="VALID",ah="INVALID",Is="PENDING",ku="DISABLED",Zr=class{},hh=class extends Zr{constructor(e,t){super(),this.value=e,this.source=t}},Fu=class extends Zr{constructor(e,t){super(),this.pristine=e,this.source=t}},Vu=class extends Zr{constructor(e,t){super(),this.touched=e,this.source=t}},Ds=class extends Zr{constructor(e,t){super(),this.status=e,this.source=t}},Wy=class extends Zr{constructor(e){super(),this.source=e}},Ky=class extends Zr{constructor(e){super(),this.source=e}};function Xy(n){return(yh(n)?n.validators:n)||null}function Jj(n){return Array.isArray(n)?mA(n):n||null}function ev(n,e){return(yh(e)?e.asyncValidators:n)||null}function Xj(n){return Array.isArray(n)?vA(n):n||null}function yh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function EA(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function IA(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var Cs=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ou(()=>this.statusReactive()),this.statusReactive=nu(void 0),this._pristine=ou(()=>this.pristineReactive()),this.pristineReactive=nu(!0),this._touched=ou(()=>this.touchedReactive()),this.touchedReactive=nu(!1),this._events=new Pe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return rr(this.statusReactive)}set status(e){rr(()=>this.statusReactive.set(e))}get valid(){return this.status===Ou}get invalid(){return this.status===ah}get pending(){return this.status==Is}get disabled(){return this.status===ku}get enabled(){return this.status!==ku}get pristine(){return rr(this.pristineReactive)}set pristine(e){rr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return rr(this.touchedReactive)}set touched(e){rr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Q0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Q0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Y0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Y0(e,this._rawAsyncValidators))}hasValidator(e){return ch(this._rawValidators,e)}hasAsyncValidator(e){return ch(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Vu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Vu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fu(!0,r))}markAsPending(e={}){this.status=Is;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ku,this.errors=null,this._forEachChild(i=>{i.disable(de(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hh(this.value,r)),this._events.next(new Ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ou,this._forEachChild(r=>{r.enable(de(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ou||this.status===Is)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hh(this.value,t)),this._events.next(new Ds(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ku:Ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Is,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=dA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ds(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?ku:this.errors?ah:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Is)?Is:this._anyControlsHaveStatus(ah)?ah:Ou}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Fu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Vu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Jj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Xj(this._rawAsyncValidators)}},fh=class extends Cs{constructor(e,t,r){super(Xy(t),ev(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IA(this,!0,e),Object.keys(e).forEach(r=>{EA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Qy=class extends fh{};var vh=new H("CallSetDisabledState",{providedIn:"root",factory:()=>_h}),_h="always";function DA(n,e){return[...e.path,n]}function Yy(n,e,t=_h){tv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),t2(n,e),r2(n,e),n2(n,e),e2(n,e)}function Z0(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ph(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function e2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function tv(n,e){let t=_A(n);e.validator!==null?n.setValidators(K0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=wA(n);e.asyncValidator!==null?n.setAsyncValidators(K0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ph(e._rawValidators,i),ph(e._rawAsyncValidators,i)}function gh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=_A(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=wA(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return ph(e._rawValidators,r),ph(e._rawAsyncValidators,r),t}function t2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CA(n,e)})}function n2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function CA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function r2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function i2(n,e){n==null,tv(n,e)}function o2(n,e){return gh(n,e)}function TA(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function s2(n){return Object.getPrototypeOf(n.constructor)===mh}function a2(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bA(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===iA?t=o:s2(o)?r=o:i=o}),i||r||t||null}function u2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function J0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function X0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Lu=class extends Cs{constructor(e=null,t,r){super(Xy(t),ev(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(X0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){J0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){J0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){X0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var c2=n=>n instanceof Lu;var l2={provide:Ki,useExisting:Pt(()=>d2)},eA=Promise.resolve(),d2=(()=>{class n extends Ki{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Lu,this._registered=!1,this.name="",this.update=new $e,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bA(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),TA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Yy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){eA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&qi(r);eA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?DA(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ie(Wi,9),ie(Qi,10),ie(Jy,10),ie(Ts,10),ie($i,8),ie(vh,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[en([l2]),pt,Sn]})}}return n})(),G5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),h2={provide:Ts,useExisting:Pt(()=>f2),multi:!0},f2=(()=>{class n extends mh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&nr("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[en([h2]),pt]})}}return n})();var AA=new H("");var p2={provide:Wi,useExisting:Pt(()=>g2)},g2=(()=>{class n extends Wi{get submitted(){return rr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=ou(()=>this._submittedReactive()),this._submittedReactive=nu(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new $e,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Yy(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Z0(t.control||null,t,!1),u2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),a2(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Wy(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Ky(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Z0(r||null,t),c2(i)&&(Yy(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);i2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&o2(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tv(this.form,this),this._oldForm&&gh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(ie(Qi,10),ie(Jy,10),ie(vh,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&nr("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[en([p2]),pt,Sn]})}}return n})();var m2={provide:Ki,useExisting:Pt(()=>y2)},y2=(()=>{class n extends Ki{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new $e,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bA(this,o)}ngOnChanges(t){this._added||this._setUpControl(),TA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return DA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(ie(Wi,13),ie(Qi,10),ie(Jy,10),ie(Ts,10),ie(AA,8))}}static{this.\u0275dir=Se({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[en([m2]),pt,Sn]})}}return n})(),v2={provide:Ts,useExisting:Pt(()=>MA),multi:!0};function SA(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _2(n){return n.split(":")[0]}var MA=(()=>{class n extends mh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=SA(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=_2(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&nr("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[en([v2]),pt]})}}return n})(),W5=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(SA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(ie(Mn),ie(tr),ie(MA,9))}}static{this.\u0275dir=Se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),w2={provide:Ts,useExisting:Pt(()=>xA),multi:!0};function tA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function E2(n){return n.split(":")[0]}var xA=(()=>{class n extends mh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=E2(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&nr("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[en([w2]),pt]})}}return n})(),K5=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(tA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(tA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(ie(Mn),ie(tr),ie(xA,9))}}static{this.\u0275dir=Se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function RA(n){return typeof n=="number"?n:parseInt(n,10)}function NA(n){return typeof n=="number"?n:parseFloat(n)}var wh=(()=>{class n{constructor(){this._validator=uh}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Se({type:n,features:[Sn]})}}return n})(),I2={provide:Qi,useExisting:Pt(()=>D2),multi:!0},D2=(()=>{class n extends wh{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>NA(t),this.createValidator=t=>aA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Br("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[en([I2]),pt]})}}return n})(),C2={provide:Qi,useExisting:Pt(()=>T2),multi:!0},T2=(()=>{class n extends wh{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>NA(t),this.createValidator=t=>sA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Br("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[en([C2]),pt]})}}return n})();var b2={provide:Qi,useExisting:Pt(()=>A2),multi:!0},A2=(()=>{class n extends wh{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>RA(t),this.createValidator=t=>uA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Br("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[en([b2]),pt]})}}return n})(),S2={provide:Qi,useExisting:Pt(()=>M2),multi:!0},M2=(()=>{class n extends wh{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>RA(t),this.createValidator=t=>cA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xt(n)))(i||n)}})()}static{this.\u0275dir=Se({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Br("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[en([S2]),pt]})}}return n})();var PA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Qt({})}}return n})(),Zy=class extends Cs{constructor(e,t,r){super(Xy(t),ev(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){IA(this,!1,e),e.forEach((r,i)=>{EA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function nA(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Q5=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return nA(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new fh(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Qy(i,r)}control(t,r,i){let o={};return this.useNonNullable?(nA(r)?o=r:(o.validators=r,o.asyncValidators=i),new Lu(t,de(j({},o),{nonNullable:!0}))):new Lu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Zy(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Lu)return t;if(t instanceof Cs)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Y5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vh,useValue:t.callSetDisabledState??_h}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Qt({imports:[PA]})}}return n})(),Z5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:AA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:vh,useValue:t.callSetDisabledState??_h}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Qt({imports:[PA]})}}return n})();var x2="firebase",R2="10.14.1";$t(x2,R2,"app");var ju=new Jn("ANGULARFIRE2_VERSION");function u6(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var N2=(n,e)=>{let t=e?[e]:Yc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zi=class{constructor(){return N2(P2)}},P2="app-check";function bs(){}var Eh=class{zone;delegate;constructor(e,t=zp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},nv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),t.pipe(Ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},As=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Eh(Zone.current)),this.insideAngular=t.run(()=>new Eh(Zone.current,Ai)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(_e))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function O2(n){return Uu().ngZone.runOutsideAngular(()=>n())}function Yi(n){return Uu().ngZone.run(()=>n())}function c6(n){return n.pipe(Nt(Uu().outsideAngular))}function At(n){return k2(Uu())(n)}function k2(n){return function(t){return t=t.lift(new nv(n.ngZone)),t.pipe(qt(n.outsideAngular),Nt(n.insideAngular))}}var F2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Yi(()=>n.apply(void 0,r))},OA=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs))),r[o]=F2(r[o],t));let i=O2(()=>n.apply(this,r));if(!e)if(i instanceof oe){let o=Uu();return i.pipe(qt(o.outsideAngular),Nt(o.insideAngular))}else return Yi(()=>i);return i instanceof oe?i.pipe(At):i instanceof Promise?Yi(()=>new Promise((o,s)=>i.then(a=>Yi(()=>o(a)),a=>Yi(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Yi(()=>i)};var Bu=class{constructor(e){return e}},rv=class{constructor(){return Yc()}};function V2(n){return n&&n.length===1?n[0]:new Bu(Fa())}var iv=new H("angularfire2._apps"),L2={provide:Bu,useFactory:V2,deps:[[new Vr,iv]]},j2={provide:rv,deps:[[new Vr,iv]]};function U2(n){return(e,t)=>{let r=t.get(at);$t("angularfire",ju.full,"core"),$t("angularfire",ju.full,"app"),$t("angular",Um.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Bu(i)}}function _6(n,...e){return Lr([L2,j2,{provide:iv,useFactory:U2(n),multi:!0,deps:[_e,Vt,As,...e]}])}var w6=OA(VI,!0);var B2="firebase",$2="10.14.1";wn.registerVersion(B2,$2,"app-compat");var q2=["ngOnDestroy"],VA=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(q2.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var ov=class{constructor(e){return e}},Ih=new H("angularfire2.app.options"),Dh=new H("angularfire2.app.name");function Ch(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=wn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>wn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;H2("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ov(s)}var H2=(n,...e)=>{$m()&&typeof console<"u"&&console[n](...e)};function Th(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return z2(i,s)||(FA("error",`${e} was already initialized on the ${t} Firebase App with different settings.${G2?" You may need to reload as Firebase is not HMR aware.":""}`),FA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function z2(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var G2=typeof module<"u"&&!!module.hot,FA=(n,...e)=>{$m()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bh=class{id;dni;edad;nombre;nroLicencia;pais;licenciaProfecional;constructor(e,t,r,i,o,s,a){this.id=e,this.dni=t,this.edad=r,this.nombre=i,this.nroLicencia=o,this.pais=s,this.licenciaProfecional=a}toJson(){return{id:this.id,dni:this.dni,edad:this.edad,nombre:this.nombre,nroLicencia:this.nroLicencia,pais:this.pais.toJson(),licenciaProfecional:this.licenciaProfecional}}};var W2=new Map,K2={activated:!1,tokenObservers:[]},Q2={initialized:!1,enabled:!1};function fn(n){return W2.get(n)||Object.assign({},K2)}function $A(){return Q2}var Y2="https://content-firebaseappcheck.googleapis.com/v1";var Z2="exchangeDebugToken",LA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},U6=24*60*60*1e3;var av=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Tp,this.pending.promise.catch(t=>{}),yield J2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Tp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function J2(n){return new Promise(e=>{setTimeout(e,n)})}var X2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jr=new kI("appCheck","AppCheck",X2);function qA(n){if(!fn(n).activated)throw Jr.create("use-before-activation",{appName:n.name})}function HA(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Jr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Jr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Jr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function zA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Y2}/projects/${t}/apps/${r}:${Z2}?key=${i}`,body:{debug_token:e}}}var eU="firebase-app-check-database",tU=1,uv="firebase-app-check-store";var Ah=null;function nU(){return Ah||(Ah=new Promise((n,e)=>{try{let t=indexedDB.open(eU,tU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Jr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(uv,{keyPath:"compositeKey"})}}}catch(t){e(Jr.create("storage-open",{originalErrorMessage:t?.message}))}}),Ah)}function rU(n,e){return iU(oU(n),e)}function iU(n,e){return N(this,null,function*(){let r=(yield nU()).transaction(uv,"readwrite"),o=r.objectStore(uv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Jr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function oU(n){return`${n.options.appId}-${n.name}`}var cv=new Qc("@firebase/app-check");function sv(n,e){return Kc()?rU(n,e).catch(t=>{cv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GA(){return $A().enabled}function WA(){return N(this,null,function*(){let n=$A();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var sU={error:"UNKNOWN_ERROR"};function aU(n){return RI.encodeString(JSON.stringify(n),!1)}function lv(n,e=!1){return N(this,null,function*(){let t=n.app;qA(t);let r=fn(t),i=r.token,o;if(i&&!$u(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&($u(u)?i=u:yield sv(t,void 0))}if(!e&&i&&$u(i))return{token:i.token};let s=!1;if(GA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HA(zA(t,yield WA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield sv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?cv.warn(u.message):cv.error(u),o=u}let a;return i?o?$u(i)?a={token:i.token,internalError:o}:a=UA(o):(a={token:i.token},r.token=i,yield sv(t,i)):a=UA(o),s&&dU(t,a),a})}function uU(n){return N(this,null,function*(){let e=n.app;qA(e);let{provider:t}=fn(e);if(GA()){let r=yield WA(),{token:i}=yield HA(zA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function cU(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&$u(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),jA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jA(n))}function KA(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jA(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=lU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lU(n){let{app:e}=n;return new av(()=>N(this,null,function*(){let t=fn(e),r;if(t.token?r=yield lv(n,!0):r=yield lv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},LA.RETRIAL_MIN_WAIT,LA.RETRIAL_MAX_WAIT)}function dU(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function $u(n){return n.expireTimeMillis-Date.now()>0}function UA(n){return{token:aU(sU),error:n}}var dv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)KA(this.app,t.next);return Promise.resolve()}};function hU(n,e){return new dv(n,e)}function fU(n){return{getToken:e=>lv(n,e),getLimitedUseToken:()=>uU(n),addTokenListener:e=>cU(n,"INTERNAL",e),removeTokenListener:e=>KA(n.app,e)}}var pU="@firebase/app-check",gU="0.8.8";var mU="app-check",BA="app-check-internal";function yU(){ka(new Di(mU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BA).initialize()})),ka(new Di(BA,n=>{let e=n.getProvider("app-check").getImmediate();return fU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$t(pU,gU)}yU();var vU=["localhost","0.0.0.0","127.0.0.1"],J6=typeof window<"u"&&vU.includes(window.location.hostname);var hv=new H("angularfire2.auth.use-emulator"),fv=new H("angularfire2.auth.settings"),pv=new H("angularfire2.auth.tenant-id"),gv=new H("angularfire2.auth.langugage-code"),mv=new H("angularfire2.auth.use-device-language"),yv=new H("angularfire.auth.persistence"),vv=(n,e,t,r,i,o,s,a)=>Th(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),YA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let D=new Pe,b=Z(void 0).pipe(Nt(s.outsideAngular),Oe(()=>o.runOutsideAngular(()=>import("./chunk-FUK65WA4.js"))),J(()=>Ch(t,o,r)),J(A=>vv(A,o,a,l,h,p,u,m)),Sl({bufferSize:1,refCount:!1}));if(qr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{b.pipe(Ht()).subscribe();let A=b.pipe(Oe(P=>P.getRedirectResult().then(G=>G,()=>null)),At,Sl({bufferSize:1,refCount:!1})),F=b.pipe(Oe(P=>new oe(G=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(Y=>G.next(Y),Y=>G.error(Y),()=>G.complete()))})))),B=b.pipe(Oe(P=>new oe(G=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(Y=>G.next(Y),Y=>G.error(Y),()=>G.complete()))}))));this.authState=A.pipe(Ml(F),qt(s.outsideAngular),Nt(s.insideAngular)),this.user=A.pipe(Ml(B),qt(s.outsideAngular),Nt(s.insideAngular)),this.idToken=this.user.pipe(Oe(P=>P?ge(P.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Oe(P=>P?ge(P.getIdTokenResult()):Z(null))),this.credential=Qp(A,D,this.authState.pipe(tt(P=>!P))).pipe(J(P=>P?.user?P:null),qt(s.outsideAngular),Nt(s.insideAngular))}return VA(this,b,o,{spy:{apply:(A,F,B)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&B.then(P=>D.next(P))}}})}static \u0275fac=function(r){return new(r||n)(L(Ih),L(Dh,8),L(at),L(_e),L(As),L(hv,8),L(fv,8),L(pv,8),L(gv,8),L(mv,8),L(yv,8),L(Zi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var ZA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JA={};var Xr,_v;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,S){for(var _=Array(arguments.length-2),$n=2;$n<arguments.length;$n++)_[$n-2]=arguments[$n];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var S=E.g[3],_=v+(S^w&(C^S))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=S+(C^v&(w^C))+I[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=C+(w^S&(v^w))+I[2]+606105819&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(v^C&(S^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(S^w&(C^S))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(C^v&(w^C))+I[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=C+(w^S&(v^w))+I[6]+2821735955&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(v^C&(S^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(S^w&(C^S))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(C^v&(w^C))+I[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=C+(w^S&(v^w))+I[10]+4294925233&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(v^C&(S^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(S^w&(C^S))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(C^v&(w^C))+I[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=C+(w^S&(v^w))+I[14]+2792965006&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(v^C&(S^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^S&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(v^w))+I[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(S^v))+I[11]+643717713&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(C^S))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^S&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(v^w))+I[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(S^v))+I[15]+3634488961&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(C^S))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^S&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(v^w))+I[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(S^v))+I[3]+4107603335&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(C^S))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^S&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(v^w))+I[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(S^v))+I[7]+1735328473&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(C^S))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^S)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^C)+I[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=C+(S^v^w)+I[11]+1839030562&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^S)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^C)+I[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=C+(S^v^w)+I[7]+4139469664&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^S)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^C)+I[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=C+(S^v^w)+I[3]+3572445317&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^S)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^C)+I[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=C+(S^v^w)+I[15]+530742520&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~S))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~C))+I[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=C+(v^(S|~w))+I[14]+2878612391&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~S))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~C))+I[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=C+(v^(S|~w))+I[10]+4293915773&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~S))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~C))+I[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=C+(v^(S|~w))+I[6]+2734768916&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~S))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~C))+I[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=C+(v^(S|~w))+I[2]+718787259&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,S=0;S<v;){if(C==0)for(;S<=w;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(I[C++]=E.charCodeAt(S++),C==this.blockSize){i(this,I),C=0;break}}else for(;S<v;)if(I[C++]=E[S++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var S=E[C]|0;I&&S==v||(w[C]=S,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return A(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return A(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var S=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(b(this))return-A(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(b(this))return"-"+A(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=G(w,v).g;w=F(w,C.j(v));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function b(E){return E.h==-1}n.l=function(E){return E=F(this,E),b(E)?-1:D(E)?0:1};function A(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return b(this)?A(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var S=I+(this.i(C)&65535)+(E.i(C)&65535),_=(S>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,S&=65535,_&=65535,w[C]=_<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(E,v){return E.add(A(v))}n.j=function(E){if(D(this)||D(E))return p;if(b(this))return b(E)?A(this).j(A(E)):A(A(this).j(E));if(b(E))return A(this.j(A(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var S=this.i(I)>>>16,_=this.i(I)&65535,$n=E.i(C)>>>16,ga=E.i(C)&65535;w[2*I+2*C]+=_*ga,B(w,2*I+2*C),w[2*I+2*C+1]+=S*ga,B(w,2*I+2*C+1),w[2*I+2*C+1]+=_*$n,B(w,2*I+2*C+1),w[2*I+2*C+2]+=S*$n,B(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function B(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function P(E,v){this.g=E,this.h=v}function G(E,v){if(D(v))throw Error("division by zero");if(D(E))return new P(p,p);if(b(E))return v=G(A(E),v),new P(A(v.g),A(v.h));if(b(v))return v=G(E,A(v)),new P(A(v.g),v.h);if(30<E.g.length){if(b(E)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=Y(w),I=Y(I);var C=K(w,1),S=K(I,1);for(I=K(I,2),w=K(w,2);!D(I);){var _=S.add(I);0>=_.l(E)&&(C=C.add(w),S=_),I=K(I,1),w=K(w,1)}return v=F(E,C.j(v)),new P(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(w),_=S.j(v);b(_)||0<_.l(E);)w-=I,S=l(w),_=S.j(v);D(S)&&(S=m),C=C.add(S),E=F(E,_)}return new P(C,E)}n.A=function(E){return G(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function Y(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function K(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],S=0;S<I;S++)C[S]=0<v?E.i(S+w)>>>v|E.i(S+w+1)<<32-v:E.i(S+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_v=JA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Xr=JA.Integer=s}).apply(typeof ZA<"u"?ZA:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hr={};var wv,wU,Ss,Ev,qu,Mh,Iv,Dv,Cv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,x){for(var U=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)U[Ce-2]=arguments[Ce];return d.prototype[T].apply(g,U)}}function b(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function A(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,x=g.length||0;c.length=T+x;for(let U=0;U<x;U++)c[T+U]=g[U]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function P(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var Y=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function K(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Xf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class $n{constructor(){this.h=this.g=null}add(d,f){let g=ga.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ga=new F(()=>new RR,c=>c.reset());class RR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ma,ya=!1,Xf=new $n,AE=()=>{let c=a.Promise.resolve(void 0);ma=()=>{c.then(NR)}};var NR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=ga;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ya=!1};function Ir(){this.s=this.s,this.C=this.C}Ir.prototype.s=!1,Ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var PR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function va(c,d){if(lt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Y){e:{try{G(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:OR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&va.aa.h.call(this)}}D(va,lt);var OR={2:"touch",3:"pen",4:"mouse"};va.prototype.h=function(){va.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _a="closure_listenable_"+(1e6*Math.random()|0),kR=0;function FR(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++kR,this.da=this.fa=!1}function xc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Rc(c){this.src=c,this.g={},this.h=0}Rc.prototype.add=function(c,d,f,g,T){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var U=tp(c,d,g,T);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new FR(d,this.src,x,!!g,T),d.fa=f,c.push(d)),d};function ep(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=T)&&Array.prototype.splice.call(g,T,1),x&&(xc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function tp(c,d,f,g){for(var T=0;T<c.length;++T){var x=c[T];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return T}return-1}var np="closure_lm_"+(1e6*Math.random()|0),rp={};function SE(c,d,f,g,T){if(g&&g.once)return xE(c,d,f,g,T);if(Array.isArray(d)){for(var x=0;x<d.length;x++)SE(c,d[x],f,g,T);return null}return f=ap(f),c&&c[_a]?c.K(d,f,l(g)?!!g.capture:!!g,T):ME(c,d,f,!1,g,T)}function ME(c,d,f,g,T,x){if(!d)throw Error("Invalid event type");var U=l(T)?!!T.capture:!!T,Ce=op(c);if(Ce||(c[np]=Ce=new Rc(c)),f=Ce.add(d,f,g,U,x),f.proxy)return f;if(g=VR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)PR||(T=U),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(NE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function VR(){function c(f){return d.call(c.src,c.listener,f)}let d=LR;return c}function xE(c,d,f,g,T){if(Array.isArray(d)){for(var x=0;x<d.length;x++)xE(c,d[x],f,g,T);return null}return f=ap(f),c&&c[_a]?c.L(d,f,l(g)?!!g.capture:!!g,T):ME(c,d,f,!0,g,T)}function RE(c,d,f,g,T){if(Array.isArray(d))for(var x=0;x<d.length;x++)RE(c,d[x],f,g,T);else g=l(g)?!!g.capture:!!g,f=ap(f),c&&c[_a]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=tp(x,f,g,T),-1<f&&(xc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=op(c))&&(d=c.g[d.toString()],c=-1,d&&(c=tp(d,f,g,T)),(f=-1<c?d[c]:null)&&ip(f))}function ip(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[_a])ep(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(NE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=op(d))?(ep(f,c),f.h==0&&(f.src=null,d[np]=null)):xc(c)}}}function NE(c){return c in rp?rp[c]:rp[c]="on"+c}function LR(c,d){if(c.da)c=!0;else{d=new va(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&ip(c),c=f.call(g,d)}return c}function op(c){return c=c[np],c instanceof Rc?c:null}var sp="__closure_events_fn_"+(1e9*Math.random()>>>0);function ap(c){return typeof c=="function"?c:(c[sp]||(c[sp]=function(d){return c.handleEvent(d)}),c[sp])}function dt(){Ir.call(this),this.i=new Rc(this),this.M=this,this.F=null}D(dt,Ir),dt.prototype[_a]=!0,dt.prototype.removeEventListener=function(c,d,f,g){RE(this,c,d,f,g)};function vt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new lt(d,c);else if(d instanceof lt)d.target=d.target||c;else{var T=d;d=new lt(g,c),I(d,T)}if(T=!0,f)for(var x=f.length-1;0<=x;x--){var U=d.g=f[x];T=Nc(U,g,!0,d)&&T}if(U=d.g=c,T=Nc(U,g,!0,d)&&T,T=Nc(U,g,!1,d)&&T,f)for(x=0;x<f.length;x++)U=d.g=f[x],T=Nc(U,g,!1,d)&&T}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)xc(f[g]);delete c.g[d],c.h--}}this.F=null},dt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},dt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Nc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,x=0;x<d.length;++x){var U=d[x];if(U&&!U.da&&U.capture==f){var Ce=U.listener,ot=U.ha||U.src;U.fa&&ep(c.i,U),T=Ce.call(ot,g)!==!1&&T}}return T&&!g.defaultPrevented}function PE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function OE(c){c.g=PE(()=>{c.g=null,c.i&&(c.i=!1,OE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class jR extends Ir{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:OE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(c){Ir.call(this),this.h=c,this.g={}}D(wa,Ir);var kE=[];function FE(c){K(c.g,function(d,f){this.g.hasOwnProperty(f)&&ip(d)},c),c.g={}}wa.prototype.N=function(){wa.aa.N.call(this),FE(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var up=a.JSON.stringify,UR=a.JSON.parse,BR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function cp(){}cp.prototype.h=null;function VE(c){return c.h||(c.h=c.i())}function LE(){}var Ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lp(){lt.call(this,"d")}D(lp,lt);function dp(){lt.call(this,"c")}D(dp,lt);var _i={},jE=null;function Pc(){return jE=jE||new dt}_i.La="serverreachability";function UE(c){lt.call(this,_i.La,c)}D(UE,lt);function Ia(c){let d=Pc();vt(d,new UE(d))}_i.STAT_EVENT="statevent";function BE(c,d){lt.call(this,_i.STAT_EVENT,c),this.stat=d}D(BE,lt);function _t(c){let d=Pc();vt(d,new BE(d,c))}_i.Ma="timingevent";function $E(c,d){lt.call(this,_i.Ma,c),this.size=d}D($E,lt);function Da(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function $R(c,d,f,g,T,x){c.info(function(){if(c.g)if(x)for(var U="",Ce=x.split("&"),ot=0;ot<Ce.length;ot++){var Ee=Ce[ot].split("=");if(1<Ee.length){var ht=Ee[0];Ee=Ee[1];var ft=ht.split("_");U=2<=ft.length&&ft[1]=="type"?U+(ht+"="+Ee+"&"):U+(ht+"=redacted&")}}else U=null;else U=x;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+U})}function qR(c,d,f,g,T,x,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+x+" "+U})}function To(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+zR(c,f)+(g?" "+g:"")})}function HR(c,d){c.info(function(){return"TIMEOUT: "+d})}Ca.prototype.info=function(){};function zR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var x=T[0];if(x!="noop"&&x!="stop"&&x!="close")for(var U=1;U<T.length;U++)T[U]=""}}}}return up(f)}catch{return d}}var Oc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hp;function kc(){}D(kc,cp),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},hp=new kc;function Dr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new wa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new HE}function HE(){this.i=null,this.g="",this.h=!1}var zE={},fp={};function pp(c,d,f){c.L=1,c.v=jc(qn(d)),c.m=f,c.P=!0,GE(c,null)}function GE(c,d){c.F=Date.now(),Fc(c),c.A=qn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),sI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new HE,c.g=CI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new jR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(kE[0]=T.toString()),T=kE);for(var x=0;x<T.length;x++){var U=SE(f,T[x],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ia(),$R(c.i,c.u,c.A,c.l,c.R,c.m)}Dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let ft=Hn(this.g);var d=this.g.Ba();let So=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||fI(this.g)))){this.J||ft!=4||d==7||(d==8||0>=So?Ia(3):Ia(2)),gp(this);var f=this.g.Z();this.X=f;t:if(WE(this)){var g=fI(this.g);c="";var T=g.length,x=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),Ta(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,qR(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,ot=this.g;if((Ce=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ce)){var Ee=Ce;break t}}Ee=null}if(f=Ee)To(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mp(this,f);else{this.o=!1,this.s=3,_t(12),wi(this),Ta(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<U.length;)if(sn=GR(this,U),sn==fp){ft==4&&(this.s=4,_t(14),f=!1),To(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==zE){this.s=4,_t(15),To(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else To(this.i,this.l,sn,null),mp(this,sn);if(WE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||U.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)To(this.i,this.l,U,"[Invalid Chunked Response]"),wi(this),Ta(this);else if(0<U.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Ip(ht),ht.M=!0,_t(11))}}else To(this.i,this.l,U,null),mp(this,U);ft==4&&wi(this),this.o&&!this.J&&(ft==4?wI(this.j,this):(this.o=!1,Fc(this)))}else cN(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),wi(this),Ta(this)}}}catch{}finally{}};function WE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function GR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?fp:(f=Number(d.substring(f,g)),isNaN(f)?zE:(g+=1,g+f>d.length?fp:(d=d.slice(g,g+f),c.C=g+f,d)))}Dr.prototype.cancel=function(){this.J=!0,wi(this)};function Fc(c){c.S=Date.now()+c.I,KE(c,c.I)}function KE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Da(m(c.ba,c),d)}function gp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(HR(this.i,this.A),this.L!=2&&(Ia(),_t(17)),wi(this),this.s=2,Ta(this)):KE(this,this.S-c)};function Ta(c){c.j.G==0||c.J||wI(c.j,c)}function wi(c){gp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,FE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function mp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||yp(f.h,c))){if(!c.K&&yp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Hc(f),$c(f);else break e;Ep(f),_t(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Da(m(f.Za,f),6e3));if(1>=ZE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ii(f,11)}else if((c.K||f.g==c)&&Hc(f),!B(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let Ee=T[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let ht=Ee[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=Ee[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let So=Ee[5];So!=null&&typeof So=="number"&&0<So&&(g=1.5*So,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let Gc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var x=g.h;x.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(vp(x,x.h),x.h=null))}if(g.D){let Dp=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dp&&(g.ya=Dp,xe(g.I,g.D,Dp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=c;if(g.qa=DI(g,g.J?g.ia:null,g.W),U.K){JE(g.h,U);var Ce=U,ot=g.L;ot&&(Ce.I=ot),Ce.B&&(gp(Ce),Fc(Ce)),g.g=U}else vI(g);0<f.i.length&&qc(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Ii(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ii(f,7):wp(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}Ia(4)}catch{}}var WR=class{constructor(c,d){this.g=c,this.map=d}};function QE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function YE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ZE(c){return c.h?1:c.g?c.g.size:0}function yp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function vp(c,d){c.g?c.g.add(d):c.h=d}function JE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}QE.prototype.cancel=function(){if(this.i=XE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function XE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return b(c.i)}function KR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function QR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function eI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=QR(c),g=KR(c),T=g.length,x=0;x<T;x++)d.call(void 0,g[x],f&&f[x],c)}var tI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var x=c[f].substring(0,g);T=c[f].substring(g+1)}else x=c[f];d(x,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ei(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ei){this.h=c.h,Vc(this,c.j),this.o=c.o,this.g=c.g,Lc(this,c.s),this.l=c.l;var d=c.i,f=new Sa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),nI(this,f),this.m=c.m}else c&&(d=String(c).match(tI))?(this.h=!1,Vc(this,d[1]||"",!0),this.o=ba(d[2]||""),this.g=ba(d[3]||"",!0),Lc(this,d[4]),this.l=ba(d[5]||"",!0),nI(this,d[6]||"",!0),this.m=ba(d[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}Ei.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Aa(d,rI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Aa(d,rI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Aa(f,f.charAt(0)=="/"?XR:JR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Aa(f,tN)),c.join("")};function qn(c){return new Ei(c)}function Vc(c,d,f){c.j=f?ba(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Lc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function nI(c,d,f){d instanceof Sa?(c.i=d,nN(c.i,c.h)):(f||(d=Aa(d,eN)),c.i=new Sa(d,c.h))}function xe(c,d,f){c.i.set(d,f)}function jc(c){return xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ba(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Aa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,ZR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ZR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var rI=/[#\/\?@]/g,JR=/[#\?:]/g,XR=/[#\?]/g,eN=/[#\?@]/g,tN=/#/g;function Sa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&YR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Sa.prototype,n.add=function(c,d){Cr(this),this.i=null,c=bo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function iI(c,d){Cr(c),d=bo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function oI(c,d){return Cr(c),d=bo(c,d),c.g.has(d)}n.forEach=function(c,d){Cr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){Cr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let x=0;x<T.length;x++)f.push(d[g])}return f},n.V=function(c){Cr(this);let d=[];if(typeof c=="string")oI(this,c)&&(d=d.concat(this.g.get(bo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Cr(this),this.i=null,c=bo(this,c),oI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function sI(c,d,f){iI(c,d),0<f.length&&(c.i=null,c.g.set(bo(c,d),b(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var T=x;U[g]!==""&&(T+="="+encodeURIComponent(String(U[g]))),c.push(T)}}return this.i=c.join("&")};function bo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function nN(c,d){d&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(iI(this,g),sI(this,T,f))},c)),c.j=d}function rN(c,d){let f=new Ca;if(a.Image){let g=new Image;g.onload=y(Tr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Tr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Tr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Tr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function iN(c,d){let f=new Ca,g=new AbortController,T=setTimeout(()=>{g.abort(),Tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(T),x.ok?Tr(f,"TestPingServer: ok",!0,d):Tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Tr(f,"TestPingServer: error",!1,d)})}function Tr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function oN(){this.g=new BR}function sN(c,d,f){let g=f||"";try{eI(c,function(T,x){let U=T;l(T)&&(U=up(T)),d.push(g+x+"="+encodeURIComponent(U))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ma(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Ma,cp),Ma.prototype.g=function(){return new Uc(this.l,this.j)},Ma.prototype.i=function(c){return function(){return c}}({});function Uc(c,d){dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Uc,dt),n=Uc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ra(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;aI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function aI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?xa(this):Ra(this),this.readyState==3&&aI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,xa(this))},n.Qa=function(c){this.g&&(this.response=c,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ra(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function uI(c){let d="";return K(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function _p(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=uI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):xe(c,d,f))}function je(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(je,dt);var aN=/^https?$/i,uN=["POST","PUT"];n=je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hp.g(),this.v=this.o?VE(this.o):VE(hp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){cI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uN,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,U]of f)this.g.setRequestHeader(x,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){cI(this,x)}};function cI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,lI(c),Bc(c)}function lI(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),Bc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bc(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?dI(this):this.bb())},n.bb=function(){dI(this)};function dI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)PE(c.Ea,0,c);else if(vt(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var T=String(c.D).match(tI)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!aN.test(T?T.toLowerCase():"")}f=g}if(f)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var x=2<Hn(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",lI(c)}}finally{Bc(c)}}}}function Bc(c,d){if(c.g){hI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||vt(c,"ready");try{f.onreadystatechange=g}catch{}}}function hI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),UR(d)}};function fI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function cN(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=C(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[T]||[];d[T]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function pI(c){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Na("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Na("baseRetryDelayMs",5e3,c),this.cb=Na("retryDelaySeedMs",1e4,c),this.Wa=Na("forwardChannelMaxRetries",2,c),this.wa=Na("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new QE(c&&c.concurrentRequestLimit),this.Da=new oN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=pI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){_t(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=DI(this,null,this.W),qc(this)};function wp(c){if(gI(c),c.G==3){var d=c.U++,f=qn(c.I);if(xe(f,"SID",c.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),Pa(c,f),d=new Dr(c,c.j,d),d.L=2,d.v=jc(qn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=CI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Fc(d)}II(c)}function $c(c){c.g&&(Ip(c),c.g.cancel(),c.g=null)}function gI(c){$c(c),c.u&&(a.clearTimeout(c.u),c.u=null),Hc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qc(c){if(!YE(c.h)&&!c.s){c.s=!0;var d=c.Ga;ma||AE(),ya||(ma(),ya=!0),Xf.add(d,c),c.B=0}}function lN(c,d){return ZE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Da(m(c.Ga,c,d),EI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Dr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(T.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=yI(this,T,d),f=qn(this.I),xe(f,"RID",c),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Pa(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(uI(x)))+"&"+d:this.m&&_p(f,this.m,x)),vp(this.h,T),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),T.T=!0,pp(T,f,null)):pp(T,f,d),this.G=2}}else this.G==3&&(c?mI(this,c):this.i.length==0||YE(this.h)||mI(this))};function mI(c,d){var f;d?f=d.l:f=c.U++;let g=qn(c.I);xe(g,"SID",c.K),xe(g,"RID",f),xe(g,"AID",c.T),Pa(c,g),c.m&&c.o&&_p(g,c.m,c.o),f=new Dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=yI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vp(c.h,f),pp(f,g,d)}function Pa(c,d){c.H&&K(c.H,function(f,g){xe(d,g,f)}),c.l&&eI({},function(f,g){xe(d,g,f)})}function yI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let x=-1;for(;;){let U=["count="+f];x==-1?0<f?(x=T[0].g,U.push("ofs="+x)):x=0:U.push("ofs="+x);let Ce=!0;for(let ot=0;ot<f;ot++){let Ee=T[ot].g,ht=T[ot].map;if(Ee-=x,0>Ee)x=Math.max(0,T[ot].g-100),Ce=!1;else try{sN(ht,U,"req"+Ee+"_")}catch{g&&g(ht)}}if(Ce){g=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function vI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ma||AE(),ya||(ma(),ya=!0),Xf.add(d,c),c.v=0}}function Ep(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Da(m(c.Fa,c),EI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,_I(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Da(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),$c(this),_I(this))};function Ip(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function _I(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=qn(c.qa);xe(d,"RID","rpc"),xe(d,"SID",c.K),xe(d,"AID",c.T),xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&xe(d,"TO",c.ja),xe(d,"TYPE","xmlhttp"),Pa(c,d),c.m&&c.o&&_p(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=jc(qn(d)),f.m=null,f.P=!0,GE(f,c)}n.Za=function(){this.C!=null&&(this.C=null,$c(this),Ep(this),_t(19))};function Hc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function wI(c,d){var f=null;if(c.g==d){Hc(c),Ip(c),c.g=null;var g=2}else if(yp(c.h,d))f=d.D,JE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=Pc(),vt(g,new $E(g,f)),qc(c)}else vI(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&lN(c,d)||g==2&&Ep(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function EI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ii(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new Ei(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vc(g,"https"),jc(g),T?rN(g.toString(),f):iN(g.toString(),f)}else _t(2);c.G=0,c.l&&c.l.sa(d),II(c),gI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function II(c){if(c.G=0,c.ka=[],c.l){let d=XE(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function DI(c,d,f){var g=f instanceof Ei?qn(f):new Ei(f);if(g.g!="")d&&(g.g=d+"."+g.g),Lc(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var x=new Ei(null);g&&Vc(x,g),d&&(x.g=d),T&&Lc(x,T),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&xe(g,f,d),xe(g,"VER",c.la),Pa(c,g),g}function CI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new je(new Ma({eb:f})):new je(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function TI(){}n=TI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zc(){}zc.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){dt.call(this),this.g=new pI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ao(this)}D(Ft,dt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){wp(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=up(c),c=f);d.i.push(new WR(d.Ya++,c)),d.G==3&&qc(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,wp(this.g),delete this.g,Ft.aa.N.call(this)};function bI(c){lp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(bI,lp);function AI(){dp.call(this),this.status=1}D(AI,dp);function Ao(c){this.g=c}D(Ao,TI),Ao.prototype.ua=function(){vt(this.g,"a")},Ao.prototype.ta=function(c){vt(this.g,new bI(c))},Ao.prototype.sa=function(c){vt(this.g,new AI)},Ao.prototype.ra=function(){vt(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Cv=hr.createWebChannelTransport=function(){return new zc},Dv=hr.getStatEventTarget=function(){return Pc()},Iv=hr.Event=_i,Mh=hr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,qu=hr.ErrorCode=Oc,qE.COMPLETE="complete",Ev=hr.EventType=qE,LE.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ss=hr.WebChannel=LE,wU=hr.FetchXmlHttpFactory=Ma,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,wv=hr.XhrIo=je}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});var XA="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var oa="10.14.0";var si=new Qc("@firebase/firestore");function Ps(){return si.logLevel}function nM(n){si.setLogLevel(n)}function k(n,...e){if(si.logLevel<=_n.DEBUG){let t=e.map(Mw);si.debug(`Firestore (${oa}): ${n}`,...t)}}function qe(n,...e){if(si.logLevel<=_n.ERROR){let t=e.map(Mw);si.error(`Firestore (${oa}): ${n}`,...t)}}function pn(n,...e){if(si.logLevel<=_n.WARN){let t=e.map(Mw);si.warn(`Firestore (${oa}): ${n}`,...t)}}function Mw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+n;throw qe(e),new Error(e)}function Q(n,e){n||z()}function rM(n,e){n||z()}function $(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends OI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var jh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},Rv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nv=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new jh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Je(e)}},Pv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ov=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Pv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function EU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Uh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=EU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function $s(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iM(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Bh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},IU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class n extends Bh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return IU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var qs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Vv(n){return n.fields.find(e=>e.kind===2)}function Xi(n){return n.fields.filter(e=>e.kind!==2)}qs.UNKNOWN_ID=-1;var js=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var tc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function oM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new rn(i,q.empty(),e)}function sM(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),q.empty(),-1)}static max(){return new n(ee.max(),q.empty(),-1)}};function xw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var aM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$h=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==aM)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var qh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new oo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Rw(r.target.error);this.V.reject(new oo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new oo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new jv(t)}},ai=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Oa())===12.2&&qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),eo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kc())return!1;if(n.v())return!0;let e=Oa(),t=n.S(e),r=0<t&&t<10,i=uM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new oo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new oo(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=qh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Lv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return eo(this.B.delete())}},oo=class extends O{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function yi(n){return n.name==="IndexedDbTransactionError"}var jv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eo(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),eo(this.store.add(e))}get(e){return eo(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),eo(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),eo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=Rw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Lv(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let h=l.catch(p=>(u.done(),M.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function eo(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Rw(r.target.error);t(i)}})}var eS=!1;function Rw(n){let e=ai.S(Oa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eS||(eS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Uv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){yi(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield mi(t)}yield this.X(6e4)}))}},Bv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=sM(o);xw(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ut=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ic(n){return n==null}function nc(n){return n===0&&1/n==-1/0}function cM(n){return typeof n=="number"&&Number.isInteger(n)&&!nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tS(e)),e=DU(n.get(t),e);return tS(e)}function DU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function tS(n){return n+""}function Nn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ye(r)}var nS=["userId","batchId"];function Oh(n,e){return[n,St(e)]}function lM(n,e,t){return[n,St(e),t]}var CU={},TU=["prefixPath","collectionGroup","readTime","documentId"],bU=["prefixPath","collectionGroup","documentId"],AU=["collectionGroup","readTime","prefixPath","documentId"],SU=["canonicalId","targetId"],MU=["targetId","path"],xU=["path","targetId"],RU=["collectionId","parent"],NU=["indexId","uid"],PU=["uid","sequenceNumber"],OU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kU=["indexId","uid","orderedDocumentKey"],FU=["userId","collectionPath","documentId"],VU=["userId","collectionPath","largestBatchId"],LU=["userId","collectionGroup","largestBatchId"],dM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jU=[...dM,"documentOverlays"],hM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fM=hM,Nw=[...fM,"indexConfiguration","indexState","indexEntries"],UU=Nw,BU=[...Nw,"globals"];var rc=class extends $h{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function rt(n,e){let t=$(n);return ai.F(t._e,e)}function rS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ls(this.root,e,this.comparator,!0)}},Ls=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var be=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hh(this.data.getIterator())}getIteratorFrom(e){return new Hh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Hh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ms(n){return n.hasNext()?n.getNext():void 0}var Bt=class n{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new n([])}unionWith(e){let t=new be(He.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function gM(){return typeof atob<"u"}var Ge=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var $U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Q(!!n),typeof n=="string"){let e=0,t=$U.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ui(n){return typeof n=="string"?Ge.fromBase64String(n):Ge.fromUint8Array(n)}function Vf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Pw(n){let e=n.mapValue.fields.__previous_value__;return Vf(e)?Pw(e):e}function ic(n){let e=gr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var $v=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ci=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kh={nullValue:"NULL_VALUE"};function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vf(n)?4:mM(n)?9007199254740991:Lf(n)?10:11:z()}function Vn(n,e){if(n===e)return!0;let t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ic(n).isEqual(ic(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ui(i.bytesValue).isEqual(ui(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?nc(s)===nc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return $s(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rS(s)!==rS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Vn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function oc(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function li(n,e){if(n===e)return 0;let t=so(n),r=so(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return iS(n.timestampValue,e.timestampValue);case 4:return iS(ic(n),ic(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ui(o),u=ui(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(ke(o.latitude),ke(s.latitude));return a!==0?a:re(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(u=m.value)===null||u===void 0?void 0:u.arrayValue,b=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:oS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ii.mapValue&&s===ii.mapValue)return 0;if(o===ii.mapValue)return 1;if(s===ii.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=re(u[p],h[p]);if(m!==0)return m;let y=li(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function iS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=gr(n),r=gr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function oS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=li(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Hs(n){return qv(n)}function qv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ui(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=qv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${qv(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hv(n){return!!n&&"integerValue"in n}function sc(n){return!!n&&"arrayValue"in n}function sS(n){return!!n&&"nullValue"in n}function aS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fh(n){return!!n&&"mapValue"in n}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Yu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var yM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qU(n){return"nullValue"in n?kh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ao(ci.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Lf(n)?yM:{mapValue:{}}:z()}function HU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ao(ci.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?yM:"mapValue"in n?Lf(n)?{mapValue:{}}:ii:z()}function uS(n,e){let t=li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cS(n,e){let t=li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var yt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=He.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Yu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Fh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Yu(this.value))}};function vM(n){let e=[];return vo(n.fields,(t,r)=>{let i=new He([t]);if(Fh(r)){let o=vM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bt(e)}var Xe=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),yt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),yt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function lS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=li(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var uo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function zU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gh=class{},pe=class n extends Gh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Wv(e,t,r):t==="array-contains"?new Yv(e,r):t==="in"?new Wh(e,r):t==="not-in"?new Zv(e,r):t==="array-contains-any"?new Jv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Kv(e,r):new Qv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(li(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(li(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class n extends Gh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return zs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function zs(n){return n.op==="and"}function zv(n){return n.op==="or"}function Ow(n){return _M(n)&&zs(n)}function _M(n){for(let e of n.filters)if(e instanceof De)return!1;return!0}function Gv(n){if(n instanceof pe)return n.field.canonicalString()+n.op.toString()+Hs(n.value);if(Ow(n))return n.filters.map(e=>Gv(e)).join(",");{let e=n.filters.map(t=>Gv(t)).join(",");return`${n.op}(${e})`}}function wM(n,e){return n instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(n,e):n instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&wM(s,i.filters[a]),!0):!1}(n,e):void z()}function EM(n,e){let t=n.filters.concat(e);return De.create(t,n.op)}function IM(n){return n instanceof pe?function(t){return`${t.field.canonicalString()} ${t.op} ${Hs(t.value)}`}(n):n instanceof De?function(t){return t.op.toString()+" {"+t.getFilters().map(IM).join(" ,")+"}"}(n):"Filter"}var Wv=class extends pe{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Kv=class extends pe{constructor(e,t){super(e,"in",t),this.keys=DM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Qv=class extends pe{constructor(e,t){super(e,"not-in",t),this.keys=DM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var Yv=class extends pe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sc(t)&&oc(t.arrayValue,this.value)}},Wh=class extends pe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}},Zv=class extends pe{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!oc(this.value.arrayValue,t)}},Jv=class extends pe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}};var Xv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function e_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Xv(n,e,t,r,i,o,s)}function co(n){let e=$(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hs(r)).join(",")),e.ue=t}return e.ue}function Dc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dS(n.startAt,e.startAt)&&dS(n.endAt,e.endAt)}function Kh(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Qh(n,e){return n.filters.filter(t=>t instanceof pe&&t.field.isEqual(e))}function hS(n,e,t){let r=kh,i=!0;for(let o of Qh(n,e)){let s=kh,a=!0;switch(o.op){case"<":case"<=":s=qU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=kh}uS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];uS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function fS(n,e,t){let r=ii,i=!0;for(let o of Qh(n,e)){let s=ii,a=!0;switch(o.op){case">=":case">":s=HU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ii}cS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];cS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function CM(n,e,t,r,i,o,s,a){return new gn(n,e,t,r,i,o,s,a)}function sa(n){return new gn(n)}function pS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function Us(n){let e=$(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new be(He.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new uo(o,r))}),t.has(He.keyField().canonicalString())||e.ce.push(new uo(He.keyField(),r))}return e.ce}function Mt(n){let e=$(n);return e.le||(e.le=GU(e,Us(n))),e.le}function GU(n,e){if(n.limitType==="F")return e_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new uo(i.field,o)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return e_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function t_(n,e){let t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yh(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cc(n,e){return Dc(Mt(n),Mt(e))&&n.limitType===e.limitType}function TM(n){return`${co(Mt(n))}|lt:${n.limitType}`}function Os(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IM(i)).join(", ")}]`),Ic(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hs(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function Tc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=lS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Us(r),i)||r.endAt&&!function(s,a,u){let l=lS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Us(r),i))}(n,e)}function bM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AM(n){return(e,t)=>{let r=!1;for(let i of Us(n)){let o=WU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function WU(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?li(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var jn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return pM(this.inner)}size(){return this.innerSize}};var KU=new Ne(q.comparator);function kt(){return KU}var SM=new Ne(q.comparator);function Ku(...n){let e=SM;for(let t of n)e=e.insert(t.key,t);return e}function MM(n){let e=SM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pn(){return Zu()}function xM(){return Zu()}function Zu(){return new jn(n=>n.toString(),(n,e)=>n.isEqual(e))}var QU=new Ne(q.comparator),YU=new be(q.comparator);function ue(...n){let e=YU;for(let t of n)e=e.add(t);return e}var ZU=new be(re);function Fw(){return ZU}function Vw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function RM(n){return{integerValue:""+n}}function NM(n,e){return cM(e)?RM(e):Vw(n,e)}var Gs=class{constructor(){this._=void 0}};function JU(n,e,t){return n instanceof di?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vf(o)&&(o=Pw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof mr?OM(n,e):n instanceof yr?kM(n,e):function(i,o){let s=PM(i,o),a=gS(s)+gS(i.Pe);return Hv(s)&&Hv(i.Pe)?RM(a):Vw(i.serializer,a)}(n,e)}function XU(n,e,t){return n instanceof mr?OM(n,e):n instanceof yr?kM(n,e):t}function PM(n,e){return n instanceof hi?function(r){return Hv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var di=class extends Gs{},mr=class extends Gs{constructor(e){super(),this.elements=e}};function OM(n,e){let t=FM(e);for(let r of n.elements)t.some(i=>Vn(i,r))||t.push(r);return{arrayValue:{values:t}}}var yr=class extends Gs{constructor(e){super(),this.elements=e}};function kM(n,e){let t=FM(e);for(let r of n.elements)t=t.filter(i=>!Vn(i,r));return{arrayValue:{values:t}}}var hi=class extends Gs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function gS(n){return ke(n.integerValue||n.doubleValue)}function FM(n){return sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var lo=class{constructor(e,t){this.field=e,this.transform=t}};function eB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mr&&i instanceof mr||r instanceof yr&&i instanceof yr?$s(r.elements,i.elements,Vn):r instanceof hi&&i instanceof hi?Vn(r.Pe,i.Pe):r instanceof di&&i instanceof di}(n.transform,e.transform)}var n_=class{constructor(e,t){this.version=e,this.transformResults=t}},Be=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ws=class{};function VM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pi(n.key,Be.none()):new fi(n.key,n.data,Be.none());{let t=n.data,r=yt.empty(),i=new be(He.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mn(n.key,r,new Bt(i.toArray()),Be.none())}}function tB(n,e,t){n instanceof fi?function(i,o,s){let a=i.value.clone(),u=yS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mn?function(i,o,s){if(!Vh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ju(n,e,t,r){return n instanceof fi?function(o,s,a,u){if(!Vh(o.precondition,s))return a;let l=o.value.clone(),h=vS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof mn?function(o,s,a,u){if(!Vh(o.precondition,s))return a;let l=vS(o.fieldTransforms,u,s),h=s.data;return h.setAll(LM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Vh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function nB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=PM(r.transform,i||null);o!=null&&(t===null&&(t=yt.empty()),t.set(r.field,o))}return t||null}function mS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$s(r,i,(o,s)=>eB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var fi=class extends Ws{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends Ws{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function yS(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,XU(s,a,t[i]))}return r}function vS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,JU(o,s,e))}return r}var pi=class extends Ws{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ac=class extends Ws{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&tB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=VM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(t,r)=>mS(t,r))&&$s(this.baseMutations,e.baseMutations,(t,r)=>mS(t,r))}},r_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return QU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var i_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ye,me;function jM(n){switch(n){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function UM(n){if(n===void 0)return qe("GRPC error has no .code"),R.UNKNOWN;switch(n){case Ye.OK:return R.OK;case Ye.CANCELLED:return R.CANCELLED;case Ye.UNKNOWN:return R.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return R.INTERNAL;case Ye.UNAVAILABLE:return R.UNAVAILABLE;case Ye.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ye.NOT_FOUND:return R.NOT_FOUND;case Ye.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ye.ABORTED:return R.ABORTED;case Ye.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ye.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(me=Ye||(Ye={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var _S=null;function BM(){return new TextEncoder}var rB=new Xr([4294967295,4294967295],0);function wS(n){let e=BM().encode(n),t=new _v;return t.update(e),new Uint8Array(t.digest())}function ES(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xr([t,r],0),new Xr([i,o],0)]}var o_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new io(`Invalid padding: ${t}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new io(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xr.fromNumber(r)));return i.compare(rB)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=wS(e),[r,i]=ES(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=wS(e),[r,i]=ES(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},io=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var lc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Ne(re),kt(),ue())}},dc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var Bs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Zh=class{constructor(e,t){this.targetId=e,this.me=t}},Jh=class{constructor(e,t,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Xh=class{constructor(){this.fe=0,this.ge=DS(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new dc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=DS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},s_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kt(),this.qe=IS(),this.Qe=new Ne(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Kh(o))if(r===0){let s=new q(o.path);this.Ue(t,s,Xe.newNoDocument(s,ee.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}_S?.et(function(h,p,m,y,D){var b,A,F,B,P,G;let Y={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(Y.bloomFilter={applied:D===0,hashCount:(b=K?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(B=(F=(A=K?.bits)===null||A===void 0?void 0:A.bitmap)===null||F===void 0?void 0:F.length)!==null&&B!==void 0?B:0,padding:(G=(P=K?.bits)===null||P===void 0?void 0:P.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Y}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ui(r).toUint8Array()}catch(u){if(u instanceof zh)return pn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new o_(s,i,o)}catch(u){return pn(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Kh(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Xe.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new lc(e,t,this.Qe,this.ke,r);return this.ke=kt(),this.qe=IS(),this.Qe=new Ne(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new be(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function IS(){return new Ne(q.comparator)}function DS(){return new Ne(q.comparator)}var iB={asc:"ASCENDING",desc:"DESCENDING"},oB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sB={and:"AND",or:"OR"},a_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function u_(n,e){return n.useProto3Json||Ic(e)?e:{value:e}}function Ks(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $M(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aB(n,e){return Ks(n,e.toTimestamp())}function ze(n){return Q(!!n),ee.fromTimestamp(function(t){let r=gr(t);return new Ve(r.seconds,r.nanos)}(n))}function Lw(n,e){return c_(n,e).canonicalString()}function c_(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qM(n){let e=ye.fromString(n);return Q(XM(e)),e}function hc(n,e){return Lw(n.databaseId,e.path)}function kn(n,e){let t=qM(e);if(t.get(1)!==n.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(GM(t))}function HM(n,e){return Lw(n.databaseId,e)}function zM(n){let e=qM(n);return e.length===4?ye.emptyPath():GM(e)}function l_(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GM(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function CS(n,e,t){return{name:hc(n,e),fields:t.value.mapValue.fields}}function WM(n,e,t){let r=kn(n,e.name),i=ze(e.updateTime),o=e.createTime?ze(e.createTime):ee.min(),s=new yt({mapValue:{fields:e.fields}}),a=Xe.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function uB(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=ze(i.found.updateTime),a=i.found.createTime?ze(i.found.createTime):ee.min(),u=new yt({mapValue:{fields:i.found.fields}});return Xe.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=kn(r,i.missing),s=ze(i.readTime);return Xe.newNoDocument(o,s)}(n,e):z()}function cB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),Ge.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ge.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:UM(l.code);return new O(h,l.message||"")}(s);t=new Jh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=ze(r.document.updateTime),s=r.document.createTime?ze(r.document.createTime):ee.min(),a=new yt({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Bs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?ze(r.readTime):ee.min(),s=Xe.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Bs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new Bs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new i_(i,o),a=r.targetId;t=new Zh(a,s)}}return t}function fc(n,e){let t;if(e instanceof fi)t={update:CS(n,e.key,e.value)};else if(e instanceof pi)t={delete:hc(n,e.key)};else if(e instanceof mn)t={update:CS(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof ac))return z();t={verify:hc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof di)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function d_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Be.updateTime(ze(o.updateTime)):o.exists!==void 0?Be.exists(o.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new di;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new mr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new yr(h)}else"increment"in a?u=new hi(s,a.increment):z();let l=He.fromServerFormat(a.fieldPath);return new lo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new yt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Bt(l.map(h=>He.fromServerFormat(h)))}(e.updateMask);return new mn(i,o,s,t,r)}return new fi(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new pi(i,t)}if(e.verify){let i=kn(n,e.verify);return new ac(i,t)}return z()}function lB(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ze(i.updateTime):ze(o);return s.isEqual(ee.min())&&(s=ze(o)),new n_(s,i.transformResults||[])}(t,e))):[]}function KM(n,e){return{documents:[HM(n,e.path)]}}function QM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HM(n,i);let o=function(l){if(l.length!==0)return JM(De.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ks(m.field),direction:hB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=u_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function YM(n){let e=zM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=ZM(p);return m instanceof De&&Ow(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new uo(Fs(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ic(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Ln(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Ln(y,m)}(t.endAt)),CM(e,i,s,o,a,"F",u,l)}function dB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Fs(t.unaryFilter.field);return pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Fs(t.unaryFilter.field);return pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Fs(t.unaryFilter.field);return pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Fs(t.unaryFilter.field);return pe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return pe.create(Fs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return De.create(t.compositeFilter.filters.map(r=>ZM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function hB(n){return iB[n]}function fB(n){return oB[n]}function pB(n){return sB[n]}function ks(n){return{fieldPath:n.canonicalString()}}function Fs(n){return He.fromServerFormat(n.fieldPath)}function JM(n){return n instanceof pe?function(t){if(t.op==="=="){if(aS(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NAN"}};if(sS(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aS(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NAN"}};if(sS(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(t.field),op:fB(t.op),value:t.value}}}(n):n instanceof De?function(t){let r=t.getFilters().map(i=>JM(i));return r.length===1?r[0]:{compositeFilter:{op:pB(t.op),filters:r}}}(n):z()}function gB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Qs=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ef=class{constructor(e){this.ct=e}};function mB(n,e){let t;if(e.document)t=WM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=fo(e.noDocument.readTime);t=Xe.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=q.fromSegments(e.unknownDocument.path),i=fo(e.unknownDocument.version);t=Xe.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function TS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:hc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ks(o,s.version.toTimestamp()),createTime:Ks(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ho(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:ho(e.version)}}return r}function tf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ho(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fo(n){let e=new Ve(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function to(n,e){let t=(e.baseMutations||[]).map(o=>d_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>d_(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,i,t,r)}function Qu(n){let e=fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?fo(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Mt(sa(zM(o.documents[0])))}(n.query):function(o){return Mt(YM(o))}(n.query),new Qs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ge.fromBase64String(n.resumeToken))}function ex(n,e){let t=ho(e.snapshotVersion),r=ho(e.lastLimboFreeSnapshotVersion),i;i=Kh(e.target)?KM(n.ct,e.target):QM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jw(n){let e=YM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yh(e,e.limit,"L"):e}function Tv(n,e){return new cc(e.largestBatchId,d_(n.ct,e.overlayMutation))}function bS(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function AS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ho(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var h_=class{getBundleMetadata(e,t){return SS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:fo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return SS(e).put(function(i){return{bundleId:i.id,createTime:ho(ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return MS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:jw(o.bundledQuery),readTime:fo(o.readTime)}}(r)})}saveNamedQuery(e,t){return MS(e).put(function(i){return{name:i.name,readTime:ho(ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function SS(n){return rt(n,"bundles")}function MS(n){return rt(n,"namedQueries")}var nf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Hu(e).get(bS(this.userId,t)).next(r=>r?Tv(this.serializer,r):null)}getOverlays(e,t){let r=Pn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new cc(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(St(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Hu(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Pn(),o=St(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Hu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Tv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Pn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Tv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Hu(e).put(function(i,o,s){let[a,u,l]=bS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Hu(n){return rt(n,"documentOverlays")}var f_=class{Pt(e){return rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ge.fromUint8Array(r):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var fr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),nc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ui(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?mM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Lf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};fr.vt=new fr;function yB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function xS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=yB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var p_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=xS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=xS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},g_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},m_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},no=class{constructor(){this.jt=new p_,this.Ht=new g_(this.jt),this.Jt=new m_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ro=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ei(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=RS(n.arrayValue,e.arrayValue),t!==0?t:(t=RS(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function RS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var rf=class{constructor(e){this.Xt=new be((t,r)=>He.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Vv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Xi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new be(He.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new js(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new js(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new js(r.field,r.dir==="asc"?0:1)));return new qs(qs.UNKNOWN_ID,this.collectionId,t,tc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function tx(n){var e,t;if(Q(n instanceof pe||n instanceof De),n instanceof pe){if(n instanceof Wh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>pe.create(n.field,"==",o)))||[];return De.create(i,"or")}return n}let r=n.filters.map(i=>tx(i));return De.create(r,n.op)}function vB(n){if(n.getFilters().length===0)return[];let e=__(tx(n));return Q(nx(e)),y_(e)||v_(e)?[e]:e.getFilters()}function y_(n){return n instanceof pe}function v_(n){return n instanceof De&&Ow(n)}function nx(n){return y_(n)||v_(n)||function(t){if(t instanceof De&&zv(t)){for(let r of t.getFilters())if(!y_(r)&&!v_(r))return!1;return!0}return!1}(n)}function __(n){if(Q(n instanceof pe||n instanceof De),n instanceof pe)return n;if(n.filters.length===1)return __(n.filters[0]);let e=n.filters.map(r=>__(r)),t=De.create(e,n.op);return t=of(t),nx(t)?t:(Q(t instanceof De),Q(zs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>Uw(r,i)))}function Uw(n,e){let t;return Q(n instanceof pe||n instanceof De),Q(e instanceof pe||e instanceof De),t=n instanceof pe?e instanceof pe?function(i,o){return De.create([i,o],"and")}(n,e):NS(n,e):e instanceof pe?NS(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),zs(i)&&zs(o))return EM(i,o.getFilters());let s=zv(i)?i:o,a=zv(i)?o:i,u=s.filters.map(l=>Uw(l,a));return De.create(u,"or")}(n,e),of(t)}function NS(n,e){if(zs(e))return EM(e,n.getFilters());{let t=e.filters.map(r=>Uw(n,r));return De.create(t,"or")}}function of(n){if(Q(n instanceof pe||n instanceof De),n instanceof pe)return n;let e=n.getFilters();if(e.length===1)return of(e[0]);if(_M(n))return n;let t=e.map(i=>of(i)),r=[];return t.forEach(i=>{i instanceof pe?r.push(i):i instanceof De&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,n.op)}var w_=class{constructor(){this.un=new pc}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(rn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},pc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new be(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(ye.comparator)).toArray()}};var xh=new Uint8Array(0),E_=class{constructor(e,t){this.databaseId=t,this.cn=new pc,this.ln=new jn(r=>co(r),(r,i)=>Dc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:St(i)};return PS(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[iM(t),""],!1,!0);return PS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Nn(s.parent))}return r})}addFieldIndex(e,t){let r=zu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Rs(e);return o.next(a=>{s.put(AS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=zu(e),i=Rs(e),o=xs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=zu(e),r=xs(e),i=Rs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new rf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=xs(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return M.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${co(t)}`);let h=function(P,G){let Y=Vv(G);if(Y===void 0)return null;for(let K of Qh(P,Y.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,u),p=function(P,G){let Y=new Map;for(let K of Xi(G))for(let E of Qh(P,K.fieldPath))switch(E.op){case"==":case"in":Y.set(K.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Y.set(K.fieldPath.canonicalString(),E.value),Array.from(Y.values())}return null}(l,u),m=function(P,G){let Y=[],K=!0;for(let E of Xi(G)){let v=E.kind===0?hS(P,E.fieldPath,P.startAt):fS(P,E.fieldPath,P.startAt);Y.push(v.value),K&&(K=v.inclusive)}return new Ln(Y,K)}(l,u),y=function(P,G){let Y=[],K=!0;for(let E of Xi(G)){let v=E.kind===0?fS(P,E.fieldPath,P.endAt):hS(P,E.fieldPath,P.endAt);Y.push(v.value),K&&(K=v.inclusive)}return new Ln(Y,K)}(l,u),D=this.In(u,l,m),b=this.In(u,l,y),A=this.Tn(u,l,p),F=this.En(u.indexId,h,D,m.inclusive,b,y.inclusive,A);return M.forEach(F,B=>r.G(B,t.limit).next(P=>{P.forEach(G=>{let Y=q.fromSegments(G.documentKey);s.has(Y)||(s=s.add(Y),a.push(Y))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=vB(De.create(e.filters,"and")).map(r=>e_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):xh,y=this.An(e,m,r[p%l],i),D=this.Rn(e,m,o[p%l],s),b=a.map(A=>this.An(e,m,A,!0));h.push(...this.createRange(y,D,b))}return h}An(e,t,r,i){let o=new ro(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ro(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new rf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new be(He.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new no;for(let i of Xi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);fr.vt.It(o,s)}return r.zt()}dn(e){let t=new no;return fr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new no;return fr.vt.It(ao(this.databaseId,t),r.Yt(function(o){let s=Xi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new no);let o=0;for(let s of Xi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&sc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);fr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new no;u.seed(a.zt()),fr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof pe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=zu(e),i=Rs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new tc(p.sequenceNumber,new rn(fo(p.readTime),new q(Nn(p.documentKey)),p.largestBatchId)):tc.empty(),y=h.fields.map(([D,b])=>new js(He.fromServerFormat(D),b));return new qs(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=zu(e),o=Rs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>o.put(AS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?M.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return xs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return xs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=xs(e),o=new be(ei);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ro(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new be(ei),i=this.Vn(t,e);if(i==null)return r;let o=Vv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(sc(s))for(let a of s.arrayValue.values||[])r=r.add(new ro(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ro(t.indexId,e.key,xh,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),D=l.getIterator(),b=Ms(y),A=Ms(D);for(;b||A;){let F=!1,B=!1;if(b&&A){let P=h(b,A);P<0?B=!0:P>0&&(F=!0)}else b!=null?B=!0:F=!0;F?(p(A),A=Ms(D)):B?(m(b),b=Ms(y)):(b=Ms(y),A=Ms(D))}}(i,o,ei,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return Rs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ei(s,a)).filter((s,a,u)=>!a||ei(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ei(s,e),u=ei(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,xh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,xh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ei(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(OS)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(OS)}};function PS(n){return rt(n,"collectionParents")}function xs(n){return rt(n,"indexEntries")}function zu(n){return rt(n,"indexConfiguration")}function Rs(n){return rt(n,"indexState")}function OS(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function rx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let p=lM(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return M.waitFor(o).next(()=>l)}function sf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var af=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Vs(e),s=ti(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new uc(a,t,r,i),l=function(y,D,b){let A=b.baseMutations.map(B=>fc(y.ct,B)),F=b.mutations.map(B=>fc(y.ct,B));return{userId:D,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:A,mutations:F}}(this.serializer,this.userId,u),h=[],p=new be((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=lM(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,CU))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),M.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return ti(e).get(t).next(r=>r?(Q(r.userId===this.userId),to(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ti(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=to(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ti(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).U("userMutationsIndex",t).next(r=>r.map(i=>to(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Oh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Vs(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Nn(h);if(l===this.userId&&t.path.isEqual(m))return ti(e).get(p).next(y=>{if(!y)throw z();Q(y.userId===this.userId),o.push(to(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(re),i=[];return t.forEach(o=>{let s=Oh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Vs(e).J({range:a},(l,h,p)=>{let[m,y,D]=l,b=Nn(y);m===this.userId&&o.path.isEqual(b)?r=r.add(D):p.done()});i.push(u)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Oh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new be(re);return Vs(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,D=Nn(m);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ti(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(to(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Vs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Nn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return ix(e,this.userId,t)}Nn(e){return ox(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ix(n,e,t){let r=Oh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Vs(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function ti(n){return rt(n,"mutations")}function Vs(n){return rt(n,"documentMutations")}function ox(n){return rt(n,"mutationQueues")}var Ys=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var I_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ys(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ns(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ns(e).J((s,a)=>{let u=Qu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ns(e).J((r,i)=>{let o=Qu(i);t(o)})}qn(e){return FS(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return FS(e).put("targetGlobalKey",t)}Kn(e,t){return Ns(e).put(ex(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=co(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ns(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Qu(a);Dc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ni(e);return t.forEach(s=>{let a=St(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=ni(e);return M.forEach(t,o=>{let s=St(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ni(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ni(e),o=ue();return i.J({range:r,H:!0},(s,a,u)=>{let l=Nn(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=St(t.path),i=IDBKeyRange.bound([r],[iM(r)],!1,!0),o=0;return ni(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ns(e).get(t).next(r=>r?Qu(r):null)}};function Ns(n){return rt(n,"targets")}function FS(n){return rt(n,"targetGlobal")}function ni(n){return rt(n,"targetDocuments")}function VS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var D_=class{constructor(e){this.Un=e,this.buffer=new be(VS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();VS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},C_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){yi(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield mi(t)}yield this.Hn(3e5)}))}},T_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Ut.oe);let r=new D_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(kS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ps()<=_n.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function _B(n,e){return new T_(n,e)}var b_=class{constructor(e,t){this.db=e,this.garbageCollector=_B(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Rh(e,r)}removeReference(e,t,r){return Rh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Rh(e,t)}nr(e,t){return function(i,o){let s=!1;return ox(i).Y(a=>ix(i,a,o).next(u=>(u&&(s=!0),M.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),ni(e).delete(function(p){return[0,St(p.path)]}(s))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Rh(e,t)}tr(e,t){let r=ni(e),i,o=Ut.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Ut.oe&&t(new q(Nn(i)),o),o=l,i=u):o=Ut.oe}).next(()=>{o!==Ut.oe&&t(new q(Nn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Rh(n,e){return ni(n).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var uf=class{constructor(){this.changes=new jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var A_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ji(e).put(r)}removeEntry(e,t,r){return Ji(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Xe.newInvalidDocument(t);return Ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Xe.newInvalidDocument(t)};return Ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(t))},(i,o)=>{r={document:this.ir(t,o),size:sf(o)}}).next(()=>r)}getEntries(e,t){let r=kt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=kt(),i=new Ne(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,sf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new be(US);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Gu(i.first()),Gu(i.last())),s=i.getIterator(),a=s.getNext();return Ji(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&US(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Gu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),tf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ji(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=kt();for(let p of l){let m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Tc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=kt(),s=jS(t,r),a=jS(t,rn.max());return Ji(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new S_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LS(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return LS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=mB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return Xe.newInvalidDocument(e)}};function sx(n){return new A_(n)}var S_=class extends uf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new jn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new be((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=TS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=sf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=TS(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function LS(n){return rt(n,"remoteDocumentGlobal")}function Ji(n){return rt(n,"remoteDocumentsV14")}function Gu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jS(n,e){let t=e.documentKey.path.toArray();return[n,tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function US(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var M_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var cf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ju(r.mutation,i,Bt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Pn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ku();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Pn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=kt(),s=Zu(),a=function(){return Zu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ju(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new M_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Zu(),i=new Ne((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Bt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=xM();h.forEach(m=>{if(!o.has(m)){let y=VM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Pn()),a=-1,u=o;return s.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:MM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Ku();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ku();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=function(p,m){return new gn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Xe.newInvalidDocument(h)))});let a=Ku();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ju(h.mutation,l,Bt.empty(),Ve.now()),Tc(t,l)&&(a=a.insert(u,l))}),a})}};var x_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ze(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:jw(i.bundledQuery),readTime:ze(i.readTime)}}(t)),M.resolve()}};var R_=class{constructor(){this.overlays=new Ne(q.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Pn();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Pn(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Pn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Pn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var N_=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var gc=class{constructor(){this.Tr=new be(Ze.Er),this.dr=new be(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new ye([])),r=new Ze(t,e),i=new Ze(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new ye([])),r=new Ze(t,e),i=new Ze(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||q.comparator(e.key,t.key)}};var P_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new be(Ze.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(re);return t.forEach(i=>{let o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new q(o),0),a=new be(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new Ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ze(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var O_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(t))}getEntries(e,t){let r=kt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xe.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kt(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xw(sM(h),r)<=0||(i.has(h.key)||Tc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k_(this)}getSize(e){return M.resolve(this.size)}},k_=class extends uf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var F_=class{constructor(e){this.persistence=e,this.Nr=new jn(t=>co(t),Dc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gc,this.targetCount=0,this.kr=Ys.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ys(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var lf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ut(0),this.Kr=!1,this.Kr=!0,this.$r=new N_,this.referenceDelegate=e(this),this.Ur=new F_(this),this.indexManager=new w_,this.remoteDocumentCache=function(i){return new O_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ef(t),this.Gr=new x_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new P_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new V_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},V_=class extends $h{constructor(e){super(),this.currentSequenceNumber=e}},df=class n{constructor(e){this.persistence=e,this.Jr=new gc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var L_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new qh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nS,{unique:!0}),u.createObjectStore("documentMutations")}(e),BS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),BS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return M.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:FU});l.createIndex("collectionPathOverlayIndex",VU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",LU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:TU});l.createIndex("documentKeyIndex",bU),l.createIndex("collectionGroupIndex",AU)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:NU}).createIndex("sequenceNumberIndex",PU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:OU}).createIndex("documentKeyIndex",kU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=sf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,u=>{Q(u.userId===o.userId);let l=to(this.serializer,u);return rx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ye(s),l=function(p){return[0,St(p)]}(u);o.push(t.get(l).next(h=>h?M.resolve():(p=>t.put({targetId:0,path:St(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:RU});let r=t.store("collectionParents"),i=new pc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:St(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ye(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Nn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Qu(i),s=ex(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new q(ye.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=sx(this.serializer),o=new lf(df.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ue();to(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),M.forEach(a,(u,l)=>{let h=new Je(l),p=nf.lt(this.serializer,h),m=o.getIndexManager(h),y=af.lt(h,this.serializer,m,o.referenceDelegate);return new cf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new rc(t,Ut.oe),u).next()})})}};function BS(n){n.createObjectStore("targetDocuments",{keyPath:MU}).createIndex("documentTargetsIndex",xU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SU,{unique:!0}),n.createObjectStore("targetGlobal")}var bv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",j_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new O(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new b_(this,i),this.Ai=t+"main",this.serializer=new ef(u),this.Ri=new ai(this.Ai,this.hi,new L_(this.serializer)),this.$r=new f_,this.Ur=new I_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sx(this.serializer),this.Gr=new h_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,bv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ut(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(yi(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Wu(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return Nh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=rt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Wu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,bv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new rc(e,Ut.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Nh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return af.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?BU:u===16?UU:u===15?Nw:u===14?fM:u===13?hM:u===12?jU:u===11?dM:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new rc(a,this.Qr?this.Qr.next():Ut.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(R.FAILED_PRECONDITION,aM);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Wu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(R.FAILED_PRECONDITION,bv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put("owner",t)}static D(){return ai.D()}bi(e){let t=Wu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(qe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;bp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Wu(n){return rt(n,"owner")}function Nh(n){return rt(n,"clientMetadata")}function Bw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var U_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var B_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bp()?8:uM(Oa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new B_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ps()<=_n.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Os(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Ps()<=_n.DEBUG&&k("QueryEngine","Query:",Os(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ps()<=_n.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Os(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):M.resolve())}Yi(e,t){if(pS(t))return M.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Yh(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Yh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return pS(t)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(Ps()<=_n.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Os(t)),this.rs(e,s,t,oM(i,-1)).next(a=>a))})}ts(e,t){let r=new be(AM(e));return t.forEach((i,o)=>{Tc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ps()<=_n.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Os(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(re),this._s=new jn(o=>co(o),Dc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function ax(n,e,t,r){return new $_(n,e,t,r)}function ux(n,e){return N(this,null,function*(){let t=$(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function wB(n,e){let t=$(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(b=>{let A=l.docVersions.get(D);Q(A!==null),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cx(n){let e=$(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function EB(n,e){let t=$(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ge.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(b,A,F){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=kt(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function lx(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function IB(n,e){let t=$(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zs(n,e){let t=$(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Qs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Js(n,e,t){return N(this,null,function*(){let r=$(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!yi(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ff(n,e,t){let r=$(n),i=ee.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=$(u),m=p._s.get(h);return m!==void 0?M.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ue())).next(a=>(fx(r,bM(e),a),{documents:a,Ts:o})))}function dx(n,e){let t=$(n),r=$(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function hx(n,e){let t=$(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,oM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fx(t,e,i),i))}function fx(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function DB(n,e,t,r){return N(this,null,function*(){let i=$(n),o=ue(),s=kt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Zs(i,function(h){return Mt(sa(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>lx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function CB(r,i){return N(this,arguments,function*(n,e,t=ue()){let o=yield Zs(n,Mt(jw(e.bundledQuery))),s=$(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=ze(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ge.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function $S(n,e){return`firestore_clients_${n}_${e}`}function qS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Av(n,e){return`firestore_targets_${n}_${e}`}var pf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Xu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Fw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=cM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},q_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},mc=class{constructor(){this.activeTargetIds=Fw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ec=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=$S(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new mc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem($S(this.persistenceKey,r));if(i){let o=gf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Av(this.persistenceKey,e));if(i){let o=Xu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Av(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Ut.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){qe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Ut.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new pf(this.currentUser,e,t,r),o=qS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=qS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Av(this.persistenceKey,e),o=new Xu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return gf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return pf.Rs(new Je(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Xu.Rs(i,t)}Ls(e){return q_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Fw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},mf=class{constructor(){this.so=new mc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var H_=class{_o(e){}shutdown(){}};var yf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ph=null;function Sv(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}var TB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var z_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var mt="WebChannelConnection",G_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Sv(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw pn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=TB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Sv();return new Promise((s,a)=>{let u=new wv;u.setWithCredentials(!0),u.listenOnce(Ev.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qu.NO_ERROR:let h=u.getResponseJson();k(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case qu.TIMEOUT:k(mt,`RPC '${e}' ${o} timed out`),a(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:let p=u.getStatus();if(k(mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(A){let F=A.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(F)>=0?F:R.UNKNOWN}(y.status);a(new O(D,y.message))}else a(new O(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(mt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Sv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cv(),a=Dv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,D=new z_({Io:A=>{y?k(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(k(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(mt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},To:()=>p.close()}),b=(A,F,B)=>{A.listen(F,P=>{try{B(P)}catch(G){setTimeout(()=>{throw G},0)}})};return b(p,Ss.EventType.OPEN,()=>{y||(k(mt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),b(p,Ss.EventType.CLOSE,()=>{y||(y=!0,k(mt,`RPC '${e}' stream ${i} transport closed`),D.So())}),b(p,Ss.EventType.ERROR,A=>{y||(y=!0,pn(mt,`RPC '${e}' stream ${i} transport errored:`,A),D.So(new O(R.UNAVAILABLE,"The operation could not be completed")))}),b(p,Ss.EventType.MESSAGE,A=>{var F;if(!y){let B=A.data[0];Q(!!B);let P=B,G=P.error||((F=P[0])===null||F===void 0?void 0:F.error);if(G){k(mt,`RPC '${e}' stream ${i} received error:`,G);let Y=G.status,K=function(w){let I=Ye[w];if(I!==void 0)return UM(I)}(Y),E=G.message;K===void 0&&(K=R.INTERNAL,E="Unknown error status: "+Y+" with message "+G.message),y=!0,D.So(new O(K,E)),p.close()}else k(mt,`RPC '${e}' stream ${i} received:`,B),D.bo(B)}}),b(a,Iv.STAT_EVENT,A=>{A.stat===Mh.PROXY?k(mt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Mh.NOPROXY&&k(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function px(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function bc(n){return new a_(n,!0)}var yc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var vf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(qe(t.toString()),qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},W_=class extends vf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=cB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?ze(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=l_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Kh(u)?{documents:KM(o,u)}:{query:QM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$M(o,s.resumeToken);let l=u_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Ks(o,s.snapshotVersion.toTimestamp());let l=u_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=dB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=l_(this.serializer),t.removeTarget=e,this.a_(t)}},K_=class extends vf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=lB(e.writeResults,e.commitTime),r=ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=l_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>fc(this.serializer,r))};this.a_(t)}};var Q_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,c_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,c_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Y_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qe(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Z_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){vi(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=$(u);l.L_.add(4),yield aa(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ac(l)})}(this))}))}),this.q_=new Y_(r,i)}};function Ac(n){return N(this,null,function*(){if(vi(n))for(let e of n.B_)yield e(!0)})}function aa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function jf(n,e){let t=$(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Hw(t)?qw(t):ca(t).r_()&&$w(t,e))}function Xs(n,e){let t=$(n),r=ca(t);t.N_.delete(e),r.r_()&&gx(t,e),t.N_.size===0&&(r.r_()?r.o_():vi(t)&&t.q_.set("Unknown"))}function $w(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).A_(e)}function gx(n,e){n.Q_.xe(e),ca(n).R_(e)}function qw(n){n.Q_=new s_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.q_.v_()}function Hw(n){return vi(n)&&!ca(n).n_()&&n.N_.size>0}function vi(n){return $(n).L_.size===0}function mx(n){n.Q_=void 0}function bB(n){return N(this,null,function*(){n.q_.set("Online")})}function AB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{$w(n,e)})})}function SB(n,e){return N(this,null,function*(){mx(n),Hw(n)?(n.q_.M_(e),qw(n)):n.q_.set("Unknown")})}function MB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Jh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _f(n,r)}else if(e instanceof Bs?n.Q_.Ke(e):e instanceof Zh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield cx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),gx(o,u);let p=new Qs(h.target,u,l,h.sequenceNumber);$w(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield _f(n,r)}})}function _f(n,e,t){return N(this,null,function*(){if(!yi(e))throw e;n.L_.add(1),yield aa(n),n.q_.set("Offline"),t||(t=()=>cx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ac(n)}))})}function yx(n,e){return e().catch(t=>_f(n,t,e))}function ua(n){return N(this,null,function*(){let e=$(n),t=gi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xB(e);)try{let i=yield IB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,RB(e,i)}catch(i){yield _f(e,i)}vx(e)&&_x(e)})}function xB(n){return vi(n)&&n.O_.length<10}function RB(n,e){n.O_.push(e);let t=gi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function vx(n){return vi(n)&&!gi(n).n_()&&n.O_.length>0}function _x(n){gi(n).start()}function NB(n){return N(this,null,function*(){gi(n).p_()})}function PB(n){return N(this,null,function*(){let e=gi(n);for(let t of n.O_)e.m_(t.mutations)})}function OB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=r_.from(r,e,t);yield yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ua(n)})}function kB(n,e){return N(this,null,function*(){e&&gi(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return jM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();gi(r).s_(),yield yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ua(r)}})}(n,e)),vx(n)&&_x(n)})}function HS(n,e){return N(this,null,function*(){let t=$(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=vi(t);t.L_.add(3),yield aa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ac(t)})}function J_(n,e){return N(this,null,function*(){let t=$(n);e?(t.L_.delete(2),yield Ac(t)):e||(t.L_.add(2),yield aa(t),t.q_.set("Unknown"))})}function ca(n){return n.K_||(n.K_=function(t,r,i){let o=$(t);return o.w_(),new W_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:bB.bind(null,n),Ro:AB.bind(null,n),mo:SB.bind(null,n),d_:MB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Hw(n)?qw(n):n.q_.set("Unknown")):(yield n.K_.stop(),mx(n))}))),n.K_}function gi(n){return n.U_||(n.U_=function(t,r,i){let o=$(t);return o.w_(),new K_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NB.bind(null,n),mo:kB.bind(null,n),f_:PB.bind(null,n),g_:OB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ua(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var X_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function la(n,e){if(qe("AsyncQueue",`${e}: ${n}`),yi(n))return new O(R.UNAVAILABLE,`${e}: ${n}`);throw n}var wf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Ku(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ef=class{constructor(){this.W_=new Ne(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ea=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,wf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ew=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},tw=class{constructor(){this.queries=zS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=$(t),o=i.queries;i.queries=zS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new O(R.ABORTED,"Firestore shutting down"))}};function zS(){return new jn(n=>TM(n),Cc)}function zw(n,e){return N(this,null,function*(){let t=$(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ew,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=la(s,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Ww(t)})}function Gw(n,e){return N(this,null,function*(){let t=$(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function FB(n,e){let t=$(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Ww(t)}function VB(n,e,t){let r=$(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Ww(n){n.Y_.forEach(e=>{e.next()})}var nw,GS;(GS=nw||(nw={})).ea="default",GS.Cache="cache";var vc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nw.Cache}};var rw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var If=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?WM(this.serializer,e.document,!1):Xe.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ze(e)}},iw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new If(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ue()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield DB(this.localStore,new If(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield CB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function wx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Df=class{constructor(e){this.key=e}},Cf=class{constructor(e){this.key=e}},Tf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=AM(e),this.Ra=new wf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ef,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Tc(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?D!==b&&(r.track({type:3,doc:y}),A=!0):this.ga(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,D){let b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return b(y)-b(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ea(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ef,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Cf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Df(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ow=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sw=class{constructor(e){this.key=e,this.va=!1}},aw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new jn(a=>TM(a),Cc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(q.comparator),this.Na=new Map,this.La=new gc,this.Ba={},this.ka=new Map,this.qa=Ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function LB(n,e,t=!0){return N(this,null,function*(){let r=Uf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Ex(r,e,t,!0),i})}function jB(n,e){return N(this,null,function*(){let t=Uf(n);yield Ex(t,e,!0,!1)})}function Ex(n,e,t,r){return N(this,null,function*(){let i=yield Zs(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Kw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&jf(n.remoteStore,i),a})}function Kw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(b,A,F,B){return N(this,null,function*(){let P=A.view.ma(F);P.ns&&(P=yield ff(b.localStore,A.query,!1).then(({documents:E})=>A.view.ma(E,P)));let G=B&&B.targetChanges.get(A.targetId),Y=B&&B.targetMismatches.get(A.targetId)!=null,K=A.view.applyChanges(P,b.isPrimaryClient,G,Y);return uw(b,A.targetId,K.wa),K.snapshot})}(n,p,m,y);let o=yield ff(n.localStore,e,!0),s=new Tf(e,o.Ts),a=s.ma(o.documents),u=dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);uw(n,t,l.wa);let h=new ow(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function UB(n,e,t){return N(this,null,function*(){let r=$(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Cc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Js(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Xs(r.remoteStore,i.targetId),ta(r,i.targetId)}).catch(mi))):(ta(r,i.targetId),yield Js(r.localStore,i.targetId,!0))})}function BB(n,e){return N(this,null,function*(){let t=$(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xs(t.remoteStore,r.targetId))})}function $B(n,e,t){return N(this,null,function*(){let r=Jw(n);try{let i=yield function(s,a){let u=$(s),l=Ve.now(),h=a.reduce((y,D)=>y.add(D.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=kt(),b=ue();return u.cs.getEntries(y,h).next(A=>{D=A,D.forEach((F,B)=>{B.isValidDocument()||(b=b.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(A=>{p=A;let F=[];for(let B of a){let P=nB(B,p.get(B.key).overlayedDocument);P!=null&&F.push(new mn(B.key,P,vM(P.value.mapValue),Be.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(A=>{m=A;let F=A.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(y,A.batchId,F)})}).then(()=>({batchId:m.batchId,changes:MM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield wr(r,i.changes),yield ua(r.remoteStore)}catch(i){let o=la(i,"Failed to persist write");t.reject(o)}})}function Ix(n,e){return N(this,null,function*(){let t=$(n);try{let r=yield EB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield wr(t,r,e)}catch(r){yield mi(r)}})}function WS(n,e,t){let r=$(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=$(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Ww(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qB(n,e,t){return N(this,null,function*(){let r=$(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne(q.comparator);s=s.insert(o,Xe.newNoDocument(o,ee.min()));let a=ue().add(o),u=new lc(ee.min(),new Map,new Ne(re),s,a);yield Ix(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Zw(r)}else yield Js(r.localStore,e,!1).then(()=>ta(r,e,t)).catch(mi)})}function HB(n,e){return N(this,null,function*(){let t=$(n),r=e.batch.batchId;try{let i=yield wB(t.localStore,e);Yw(t,r,null),Qw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wr(t,i)}catch(i){yield mi(i)}})}function zB(n,e,t){return N(this,null,function*(){let r=$(n);try{let i=yield function(s,a){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Q(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Yw(r,e,t),Qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wr(r,i)}catch(i){yield mi(i)}})}function GB(n,e){return N(this,null,function*(){let t=$(n);vi(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=la(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Qw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Yw(n,e,t){let r=$(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ta(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Dx(n,r)})}function Dx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Xs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Zw(n))}function uw(n,e,t){for(let r of t)r instanceof Df?(n.La.addReference(r.key,e),WB(n,r)):r instanceof Cf?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Dx(n,r.key)):z()}function WB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Zw(n))}function Zw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new sw(t)),n.Oa=n.Oa.insert(t,r),jf(n.remoteStore,new Qs(Mt(sa(t.path)),r,"TargetPurposeLimboResolution",Ut.oe))}}function wr(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=U_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=$(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!yi(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,b)}}})}(r.localStore,o))})}function KB(n,e){return N(this,null,function*(){let t=$(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield ux(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new O(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wr(t,r.hs)}})}function QB(n,e){let t=$(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function YB(n,e){return N(this,null,function*(){let t=$(n),r=yield ff(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&uw(t,e.targetId,i.wa),i})}function ZB(n,e){return N(this,null,function*(){let t=$(n);return hx(t.localStore,e).then(r=>wr(t,r))})}function JB(n,e,t,r){return N(this,null,function*(){let i=$(n),o=yield function(a,u){let l=$(a),h=$(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ua(i.remoteStore):t==="acknowledged"||t==="rejected"?(Yw(i,e,r||null),Qw(i,e),function(a,u){$($(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield wr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function XB(n,e){return N(this,null,function*(){let t=$(n);if(Uf(t),Jw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield KS(t,r.toArray());t.Qa=!0,yield J_(t.remoteStore,!0);for(let o of i)jf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ta(t,s),Js(t.localStore,s,!0))),Xs(t.remoteStore,s)}),yield i,yield KS(t,r),function(s){let a=$(s);a.Na.forEach((u,l)=>{Xs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne(q.comparator)}(t),t.Qa=!1,yield J_(t.remoteStore,!1)}})}function KS(n,e,t){return N(this,null,function*(){let r=$(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Zs(r.localStore,Mt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield YB(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield dx(r.localStore,s);a=yield Zs(r.localStore,l),yield Kw(r,Cx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Cx(n){return CM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function e$(n){return function(t){return $($(t).persistence).Qi()}($(n).localStore)}function t$(n,e,t,r){return N(this,null,function*(){let i=$(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield hx(i.localStore,bM(o[0])),a=lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ge.EMPTY_BYTE_STRING);yield wr(i,s,a);break}case"rejected":yield Js(i.localStore,e,!0),ta(i,e,r);break;default:z()}})}function n$(n,e,t){return N(this,null,function*(){let r=Uf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield dx(r.localStore,i),s=yield Zs(r.localStore,o);yield Kw(r,Cx(o),s.targetId,!1,s.resumeToken),jf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Js(r.localStore,i,!1).then(()=>{Xs(r.remoteStore,i),ta(r,i)}).catch(mi))}})}function Uf(n){let e=$(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qB.bind(null,e),e.Ca.d_=FB.bind(null,e.eventManager),e.Ca.$a=VB.bind(null,e.eventManager),e}function Jw(n){let e=$(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zB.bind(null,e),e}function r$(n,e,t){let r=$(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let b=$(y),A=ze(D.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",F=>b.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(wx(u));let l=new iw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield wr(o,p.Ia,void 0),yield function(y,D){let b=$(y);return b.persistence.runTransaction("Save bundle","readwrite",A=>b.Gr.saveBundleMetadata(A,D))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return pn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var cw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=bc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return ax(this.persistence,new hf,t.initialUser,this.serializer)}Ga(t){return new lf(df.Zr,this.serializer)}Wa(t){return new mf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var bf=class n extends cw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Cp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Jw(this.Ja.syncEngine),yield ua(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return ax(this.persistence,new hf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new C_(r,e.asyncQueue,t)}Ha(e,t){let r=new Bv(t,this.persistence);return new Uv(e.asyncQueue,r)}Ga(e){let t=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new j_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,px(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new mf}},lw=class n extends bf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Cp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof ec&&(this.sharedClientState.syncEngine={no:JB.bind(null,t),ro:t$.bind(null,t),io:n$.bind(null,t),Qi:e$.bind(null,t),eo:ZB.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield XB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=px();if(!ec.D(t))throw new O(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ec(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Xw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KB.bind(null,this.syncEngine),yield J_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new tw}()}createDatastore(t){let r=bc(t.databaseInfo.databaseId),i=function(s){return new G_(s)}(t.databaseInfo);return function(s,a,u,l){return new Q_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Z_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>WS(this.syncEngine,r,0),function(){return yf.D()?new yf:new H_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new aw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=$(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield aa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function QS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var na=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qe("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var dw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new nt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new rw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var hw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=$(i),a={documents:o.map(p=>hc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=uB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new ac(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=$(r),s={writes:i.map(a=>fc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Be.exists(!1):Be.updateTime(t):Be.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new O(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(t)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var fw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new yc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new hw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ic(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!jM(t)}return!1}};var pw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=Uh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=la(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Mv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield ux(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function YS(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield eE(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>HS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>HS(e.remoteStore,i)),n._onlineComponents=e})}function eE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pn("Error using user provided cache. Falling back to memory cache: "+t),yield Mv(n,new cw)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Mv(n,new cw);return n._offlineComponents})}function Bf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield YS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield YS(n,new Xw))),n._onlineComponents})}function Tx(n){return eE(n).then(e=>e.persistence)}function tE(n){return eE(n).then(e=>e.localStore)}function bx(n){return Bf(n).then(e=>e.remoteStore)}function nE(n){return Bf(n).then(e=>e.syncEngine)}function i$(n){return Bf(n).then(e=>e.datastore)}function ra(n){return N(this,null,function*(){let e=yield Bf(n),t=e.eventManager;return t.onListen=LB.bind(null,e.syncEngine),t.onUnlisten=UB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BB.bind(null,e.syncEngine),t})}function o$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Tx(n),t=yield bx(n);return e.setNetworkEnabled(!0),function(i){let o=$(i);return o.L_.delete(0),Ac(o)}(t)}))}function s$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Tx(n),t=yield bx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=$(i);o.L_.add(0),yield aa(o),o.q_.set("Offline")})}(t)}))}function a$(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=$(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=la(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function Ax(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new na({next:m=>{h.Za(),s.enqueueAndForget(()=>Gw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vc(sa(a.path),h,{includeMetadataChanges:!0,_a:!0});return zw(o,p)}(yield ra(n),n.asyncQueue,e,t,r)})),r.promise}function u$(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield ff(i,o,!0),u=new Tf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=la(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield tE(n),e,t)})),t.promise}function Sx(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new na({next:m=>{h.Za(),s.enqueueAndForget(()=>Gw(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vc(a,h,{includeMetadataChanges:!0,_a:!0});return zw(o,p)}(yield ra(n),n.asyncQueue,e,t,r)})),r.promise}function c$(n,e){let t=new na(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.add(o),o.next()}(yield ra(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.delete(o)}(yield ra(n),t)}))}}function l$(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?BM().encode(s):s,function(h,p){return new dw(h,p)}(function(h,p){if(h instanceof Uint8Array)return QS(h,p);if(h instanceof ArrayBuffer)return QS(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,bc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){r$(yield nE(n),i,r)}))}function d$(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=$(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield tE(n),e)}))}function Mx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ZS=new Map;function rE(n,e,t){if(!t)throw new O(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iE(n,e,t,r){if(e===!0&&r===!0)throw new O(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JS(n){if(!q.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XS(n){if(q.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $f(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$f(n);throw new O(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xx(n,e){if(e<=0)throw new O(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Af=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},po=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Af({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Af(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xv;switch(r.type){case"firstParty":return new Ov(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ZS.get(t);r&&(k("ComponentProvider","Removing Datastore"),ZS.delete(t),r.terminate())}(this),Promise.resolve()}};function oE(n,e,t,r={}){var i;let o=(n=we(n,po))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=PI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}n._authCredentials=new Rv(new jh(a,u))}}var ut=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Fn=class n extends ut{constructor(e,t,r){super(e,t,sa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function sE(n,e,...t){if(n=Fe(n),rE("collection","path",e),n instanceof po){let r=ye.fromString(e,...t);return XS(r),new Fn(n,null,r)}{if(!(n instanceof Me||n instanceof Fn))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return XS(r),new Fn(n.firestore,null,r)}}function Rx(n,e){if(n=we(n,po),rE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ut(n,null,function(r){return new gn(ye.emptyPath(),r)}(e))}function Sc(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Uh.newId()),rE("doc","path",e),n instanceof po){let r=ye.fromString(e,...t);return JS(r),new Me(n,null,new q(r))}{if(!(n instanceof Me||n instanceof Fn))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return JS(r),new Me(n.firestore,n instanceof Fn?n.converter:null,new q(r))}}function aE(n,e){return n=Fe(n),e=Fe(e),(n instanceof Me||n instanceof Fn)&&(e instanceof Me||e instanceof Fn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uE(n,e){return n=Fe(n),e=Fe(e),n instanceof ut&&e instanceof ut&&n.firestore===e.firestore&&Cc(n._query,e._query)&&n.converter===e.converter}var Sf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yc(this,"async_queue_retry"),this.Vu=()=>{let r=Lh();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new nt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yi(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw qe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=X_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function gw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var mw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Nx=-1,Le=class extends po{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Sf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sf(e),this._firestoreClient=void 0,yield e}})}};function SW(n,e){let t=typeof n=="object"?n:Fa(),r=typeof n=="string"?n:e||"(default)",i=Sp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=NI("firestore");o&&oE(i,...o)}return i}function ct(n){if(n._terminated)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Px(n),n._firestoreClient}function Px(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new $v(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Mx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new pw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function Ox(n,e){pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return Fx(n,Xw.provider,{build:r=>new bf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function kx(n){return N(this,null,function*(){pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();Fx(n,Xw.provider,{build:t=>new lw(t,e.cacheSizeBytes)})})}function Fx(n,e,t){if((n=we(n,Le))._firestoreClient||n._terminated)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Px(n)}function Vx(n){if(n._initialized&&!n._terminated)throw new O(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!ai.D())return Promise.resolve();let i=r+"main";yield ai.delete(i)})}(Bw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Lx(n){return function(t){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return GB(yield nE(t),r)})),r.promise}(ct(n=we(n,Le)))}function jx(n){return o$(ct(n=we(n,Le)))}function Ux(n){return s$(ct(n=we(n,Le)))}function Bx(n,e){let t=ct(n=we(n,Le)),r=new mw;return l$(t,n._databaseId,e,r),r}function $x(n,e){return d$(ct(n=we(n,Le)),e).then(t=>t?new ut(n,null,t.query):null)}var Un=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ge.fromBase64String(e))}catch(t){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vr=class{constructor(e){this._methodName=e}};var go=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var _c=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var h$=/^__.*__$/,yw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new fi(e,this.data,t,this.fieldTransforms)}},Mf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function qx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var xf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qx(this.Cu)&&h$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},vw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bc(e)}Qu(e,t,r,i=!1){return new xf({Cu:e,methodName:t,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _o(n){let e=n._freezeSettings(),t=bc(n._databaseId);return new vw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);dE("Data must be an object, but it was:",s,r);let a=Gx(r,s),u,l;if(o.merge)u=new Bt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Dw(e,p,t);if(!s.contains(m))throw new O(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Kx(h,m)||h.push(m)}u=new Bt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new yw(new yt(a),u,l)}var wc=class n extends vr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Hx(n,e,t){return new xf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var _w=class n extends vr{_toFieldTransform(e){return new lo(e.path,new di)}isEqual(e){return e instanceof n}},ww=class n extends vr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Hx(this,e,!0),r=this.Ku.map(o=>wo(o,t)),i=new mr(r);return new lo(e.path,i)}isEqual(e){return e instanceof n&&Ap(this.Ku,e.Ku)}},Ew=class n extends vr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Hx(this,e,!0),r=this.Ku.map(o=>wo(o,t)),i=new yr(r);return new lo(e.path,i)}isEqual(e){return e instanceof n&&Ap(this.Ku,e.Ku)}},Iw=class n extends vr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new hi(e.serializer,NM(e.serializer,this.$u));return new lo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function cE(n,e,t,r){let i=n.Qu(1,e,t);dE("Data must be an object, but it was:",i,r);let o=[],s=yt.empty();vo(r,(u,l)=>{let h=hE(e,u,t);l=Fe(l);let p=i.Nu(h);if(l instanceof wc)o.push(h);else{let m=wo(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Bt(o);return new Mf(s,a,i.fieldTransforms)}function lE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Dw(e,r,t)],u=[i];if(o.length%2!=0)throw new O(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Dw(e,o[m])),u.push(o[m+1]);let l=[],h=yt.empty();for(let m=a.length-1;m>=0;--m)if(!Kx(l,a[m])){let y=a[m],D=u[m];D=Fe(D);let b=s.Nu(y);if(D instanceof wc)l.push(y);else{let A=wo(D,b);A!=null&&(l.push(y),h.set(y,A))}}let p=new Bt(l);return new Mf(h,p,s.fieldTransforms)}function zx(n,e,t,r=!1){return wo(t,n.Qu(r?4:3,e))}function wo(n,e){if(Wx(n=Fe(n)))return dE("Unsupported field value:",e,n),Gx(n,e);if(n instanceof vr)return function(r,i){if(!qx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=wo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:Ks(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ks(i.serializer,o)}}if(r instanceof go)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:$M(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Lw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _c)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Vw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$f(r)}`)}(n,e)}function Gx(n,e){let t={};return pM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,(r,i)=>{let o=wo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Wx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof go||n instanceof Un||n instanceof Me||n instanceof vr||n instanceof _c)}function dE(n,e,t){if(!Wx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=$f(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Dw(n,e,t){if((e=Fe(e))instanceof yn)return e._internalPath;if(typeof e=="string")return hE(n,e);throw Rf("Field path arguments must be of type string or ",n,!1,void 0,t)}var f$=new RegExp("[~\\*/\\[\\]]");function hE(n,e,t){if(e.search(f$)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yn(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(R.INVALID_ARGUMENT,a+n+u)}function Kx(n,e){return n.some(t=>t.isEqual(e))}var mo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Hf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Cw=class extends mo{data(){return super.data()}};function Hf(n,e){return typeof e=="string"?hE(n,e):e instanceof yn?e._internalPath:e._delegate._internalPath}function Qx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ec=class{},yo=class extends Ec{};function Er(n,e,...t){let r=[];e instanceof Ec&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Tw).length,a=o.filter(u=>u instanceof Nf).length;if(s>1||s>0&&a>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Nf=class n extends yo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return oR(e._query,t),new ut(e.firestore,e.converter,t_(e._query,t))}_parse(e){let t=_o(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tM(p,h);let y=[];for(let D of p)y.push(eM(u,o,D));m={arrayValue:{values:y}}}else m=eM(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tM(p,h),m=zx(a,s,p,h==="in"||h==="not-in");return pe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Yx(n,e,t){let r=e,i=Hf("where",n);return Nf._create(i,r,t)}var Tw=class n extends Ec{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:De.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)oR(s,u),s=t_(s,u)}(e._query,t),new ut(e.firestore,e.converter,t_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bw=class n extends yo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uo(o,s)}(e._query,this._field,this._direction);return new ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Zx(n,e="asc"){let t=e,r=Hf("orderBy",n);return bw._create(r,t)}var Pf=class n extends yo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ut(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}};function Jx(n){return xx("limit",n),Pf._create("limit",n,"F")}function Xx(n){return xx("limitToLast",n),Pf._create("limitToLast",n,"L")}var Of=class n extends yo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=iR(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function eR(...n){return Of._create("startAt",n,!0)}function tR(...n){return Of._create("startAfter",n,!1)}var kf=class n extends yo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=iR(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function nR(...n){return kf._create("endBefore",n,!1)}function rR(...n){return kf._create("endAt",n,!0)}function iR(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof mo)return function(o,s,a,u,l){if(!u)throw new O(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Us(o))if(p.field.isKeyField())h.push(ao(s,u.key));else{let m=u.data.field(p.field);if(Vf(m))throw new O(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new O(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=_o(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new O(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let b=h[D];if(m[D].field.isKeyField()){if(typeof b!="string")throw new O(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!kw(s)&&b.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let A=s.path.child(ye.fromString(b));if(!q.isDocumentKey(A))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let F=new q(A);y.push(ao(a,F))}else{let A=zx(u,l,b);y.push(A)}}return new Ln(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eM(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!q.isDocumentKey(r))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ao(n,new q(r))}if(t instanceof Me)return ao(n,t._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$f(t)}.`)}function tM(n,e){if(!Array.isArray(n)||n.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ia=class{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return vo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new _c(o)}convertGeoPoint(e){return new go(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Pw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){let t=gr(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);Q(XM(r));let i=new ci(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||qe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function zf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Aw=class extends ia{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var pr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends mo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},oi=class extends on{data(e={}){return super.data(e)}},vn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oi(this._firestore,this._userDataWriter,r.key,r,new pr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new oi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new oi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:p$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function p$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function fE(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vn&&e instanceof vn&&n._firestore===e._firestore&&uE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sR(n){n=we(n,Me);let e=we(n.firestore,Le);return Ax(ct(e),n._key).then(t=>yE(e,n,t))}var _r=class extends ia{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function aR(n){n=we(n,Me);let e=we(n.firestore,Le),t=ct(e),r=new _r(e);return a$(t,n._key).then(i=>new on(e,r,n._key,i,new pr(i!==null&&i.hasLocalMutations,!0),n.converter))}function uR(n){n=we(n,Me);let e=we(n.firestore,Le);return Ax(ct(e),n._key,{source:"server"}).then(t=>yE(e,n,t))}function cR(n){n=we(n,ut);let e=we(n.firestore,Le),t=ct(e),r=new _r(e);return Qx(n._query),Sx(t,n._query).then(i=>new vn(e,r,n,i))}function lR(n){n=we(n,ut);let e=we(n.firestore,Le),t=ct(e),r=new _r(e);return u$(t,n._query).then(i=>new vn(e,r,n,i))}function dR(n){n=we(n,ut);let e=we(n.firestore,Le),t=ct(e),r=new _r(e);return Sx(t,n._query,{source:"server"}).then(i=>new vn(e,r,n,i))}function pE(n,e,t){n=we(n,Me);let r=we(n.firestore,Le),i=zf(n.converter,e,t);return da(r,[qf(_o(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Be.none())])}function gE(n,e,t,...r){n=we(n,Me);let i=we(n.firestore,Le),o=_o(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof yn?lE(o,"updateDoc",n._key,e,t,r):cE(o,"updateDoc",n._key,e),da(i,[s.toMutation(n._key,Be.exists(!0))])}function hR(n){return da(we(n.firestore,Le),[new pi(n._key,Be.none())])}function fR(n,e){let t=we(n.firestore,Le),r=Sc(n),i=zf(n.converter,e);return da(t,[qf(_o(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function mE(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Me)l=we(n.firestore,Le),h=sa(n._key.path),u={next:p=>{e[s]&&e[s](yE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,ut);l=we(p.firestore,Le),h=p._query;let m=new _r(l);u={next:y=>{e[s]&&e[s](new vn(l,m,p,y))},error:e[s+1],complete:e[s+2]},Qx(n._query)}return function(m,y,D,b){let A=new na(b),F=new vc(y,A,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return zw(yield ra(m),F)})),()=>{A.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Gw(yield ra(m),F)}))}}(ct(l),h,a,u)}function pR(n,e){return c$(ct(n=we(n,Le)),gw(e)?e:{next:e})}function da(n,e){return function(r,i){let o=new nt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return $B(yield nE(r),i,o)})),o.promise}(ct(n),e)}function yE(n,e,t){let r=t.docs.get(e._key),i=new _r(n);return new on(n,i,e._key,r,new pr(t.hasPendingWrites,t.fromCache),e.converter)}var g$={maxAttempts:5};var Ff=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_o(e)}set(e,t,r){this._verifyNotCommitted();let i=ri(e,this._firestore),o=zf(i.converter,t,r),s=qf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Be.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=ri(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof yn?lE(this._dataReader,"WriteBatch.update",o._key,t,r,i):cE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=ri(e,this._firestore);return this._mutations=this._mutations.concat(new pi(t._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ri(n,e){if((n=Fe(n)).firestore!==e)throw new O(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Sw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=_o(t)}get(t){let r=ri(t,this._firestore),i=new Aw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new mo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new mo(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=ri(t,this._firestore),s=zf(o.converter,r,i),a=qf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=ri(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof yn?lE(this._dataReader,"Transaction.update",s._key,r,i,o):cE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=ri(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=ri(e,this._firestore),r=new _r(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new pr(!1,!1),t.converter))}};function gR(n,e,t){n=we(n,Le);let r=Object.assign(Object.assign({},g$),t);return function(o){if(o.maxAttempts<1)throw new O(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new nt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield i$(o);new fw(o.asyncQueue,l,a,s,u).au()})),u.promise}(ct(n),i=>e(new Sw(n,i)),r)}function mR(){return new wc("deleteField")}function yR(){return new _w("serverTimestamp")}function vR(...n){return new ww("arrayUnion",n)}function _R(...n){return new Ew("arrayRemove",n)}function wR(n){return new Iw("increment",n)}(function(e,t=!0){(function(i){oa=i})(FI),ka(new Di("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Le(new Nv(r.getProvider("auth-internal")),new Fv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ci(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$t(XA,"4.7.3",e),$t(XA,"4.7.3","esm2017")})();var m$="@firebase/firestore-compat",y$="0.3.38";function DE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ER(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function IR(){if(!gM())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Gf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return IR(),new n(Un.fromBase64String(e))}static fromUint8Array(e){return ER(),new n(Un.fromUint8Array(e))}toBase64(){return IR(),this._delegate.toBase64()}toUint8Array(){return ER(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function vE(n){return v$(n,["next","error","complete"])}function v$(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var _E=class{enableIndexedDbPersistence(e,t){return Ox(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return kx(e._delegate)}clearIndexedDbPersistence(e){return Vx(e._delegate)}},Wf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ci||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){oE(this._delegate,e,t,r)}enableNetwork(){return jx(this._delegate)}disableNetwork(){return Ux(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Lx(this._delegate)}onSnapshotsInSync(e){return pR(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pa(this,sE(this._delegate,e))}catch(t){throw xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Sc(this._delegate,e))}catch(t){throw xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Co(this,Rx(this._delegate,e))}catch(t){throw xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return gR(this._delegate,t=>e(new Kf(this,t)))}batch(){return ct(this._delegate),new Qf(new Ff(this._delegate,e=>da(this._delegate,e)))}loadBundle(e){return Bx(this._delegate,e)}namedQuery(e){return $x(this._delegate,e).then(t=>t?new Co(this,t):null)}},ha=class extends ia{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gf(new Un(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function _$(n){nM(n)}var Kf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ha(e)}get(e){let t=Eo(e);return this._delegate.get(t).then(r=>new Io(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Eo(e);return r?(DE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Eo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Eo(e);return this._delegate.delete(t),this}},Qf=class{constructor(e){this._delegate=e}set(e,t,r){let i=Eo(e);return r?(DE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Eo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Eo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},fa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new oi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Do(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ha(e),t),i.set(t,o)),o}};fa.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ha(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pa(this.firestore,sE(this._delegate,e))}catch(t){throw xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Me?aE(this._delegate,e):!1}set(e,t){t=DE("DocumentReference.set",t);try{return t?pE(this._delegate,e,t):pE(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?gE(this._delegate,e):gE(this._delegate,e,t,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return hR(this._delegate)}onSnapshot(...e){let t=DR(e),r=CR(e,i=>new Io(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=aR(this._delegate):e?.source==="server"?t=uR(this._delegate):t=sR(this._delegate),t.then(r=>new Io(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(n,e,t){return n.message=n.message.replace(e,t),n}function DR(n){for(let e of n)if(typeof e=="object"&&!vE(e))return e;return{}}function CR(n,e){var t,r;let i;return vE(n[0])?i=n[0]:vE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Io=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fE(this._delegate,e._delegate)}},Do=class extends Io{data(e){let t=this._delegate.data(e);return this._delegate._converter||rM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Co=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ha(e)}where(e,t,r){try{return new n(this.firestore,Er(this._delegate,Yx(e,t,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Er(this._delegate,Zx(e,t)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Er(this._delegate,Jx(e)))}catch(t){throw xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Er(this._delegate,Xx(e)))}catch(t){throw xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Er(this._delegate,eR(...e)))}catch(t){throw xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Er(this._delegate,tR(...e)))}catch(t){throw xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Er(this._delegate,nR(...e)))}catch(t){throw xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Er(this._delegate,rR(...e)))}catch(t){throw xt(t,"endAt()","Query.endAt()")}}isEqual(e){return uE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=lR(this._delegate):e?.source==="server"?t=dR(this._delegate):t=cR(this._delegate),t.then(r=>new Mc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=DR(e),r=CR(e,i=>new Mc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},wE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Do(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Mc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Co(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Do(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Do(this._firestore,r))})}isEqual(e){return fE(this._delegate,e._delegate)}},pa=class n extends Co{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Sc(this._delegate)):new Bn(this.firestore,Sc(this._delegate,e))}catch(t){throw xt(t,"doc()","CollectionReference.doc()")}}add(e){return fR(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return aE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Eo(n){return we(n,Me)}var EE=class n{constructor(...e){this._delegate=new yn(...e)}static documentId(){return new n(He.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var IE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=yR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=mR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=vR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=_R(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=wR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var w$={Firestore:Wf,GeoPoint:go,Timestamp:Ve,Blob:Gf,Transaction:Kf,WriteBatch:Qf,DocumentReference:Bn,DocumentSnapshot:Io,Query:Co,QueryDocumentSnapshot:Do,QuerySnapshot:Mc,CollectionReference:pa,FieldPath:EE,FieldValue:IE,setLogLevel:_$,CACHE_SIZE_UNLIMITED:Nx};function E$(n,e){n.INTERNAL.registerComponent(new Di("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},w$)))}function I$(n){E$(n,(e,t)=>new Wf(e,t,new _E)),n.registerVersion(m$,y$)}I$(wn);function D$(n,e=Ai){return new oe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function TR(n,e){return D$(n,e)}function C$(n,e){return TR(n,e).pipe(xi(void 0),qa(),J(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function bE(n,e){return TR(n,e).pipe(J(t=>({payload:t,type:"query"})))}var Yf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=SR(r,t);return new Jf(i,o,this.afs)}snapshotChanges(){return C$(this.ref,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:t})=>e.idField?de(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ge(this.ref.get(e)).pipe(At)}};function Zf(n,e){return bE(n,e).pipe(xi(void 0),qa(),J(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function bR(n,e,t){return Zf(n,t).pipe(Mi((r,i)=>T$(r,i.map(o=>o.payload),e),[]),Zp(),J(r=>r.map(i=>({type:i.type,payload:i}))))}function T$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=b$(n,r))}),n}function CE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function b$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return CE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return CE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CE(n,e.oldIndex,1);break}return n}function AR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Jf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(J(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xi(void 0),qa(),tt(([r,i])=>i.length>0||!r),J(([,r])=>r),At)}auditTrail(e){return this.stateChanges(e).pipe(Mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=AR(e);return bR(this.query,t,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.payload.docs.map(r=>e.idField?de(j({},r.data()),{[e.idField]:r.id}):r.data())),At)}get(e){return ge(this.query.get(e)).pipe(At)}add(e){return this.ref.add(e)}doc(e){return new Yf(this.ref.doc(e),this.afs)}},TE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Zf(this.query,this.afs.schedulers.outsideAngular).pipe(At):Zf(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.filter(r=>e.indexOf(r.type)>-1)),tt(t=>t.length>0),At)}auditTrail(e){return this.stateChanges(e).pipe(Mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=AR(e);return bR(this.query,t,this.afs.schedulers.outsideAngular).pipe(At)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(J(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),At)}get(e){return ge(this.query.get(e)).pipe(At)}},A$=new H("angularfire2.enableFirestorePersistence"),S$=new H("angularfire2.firestore.persistenceSettings"),M$=new H("angularfire2.firestore.settings"),x$=new H("angularfire2.firestore.use-emulator");function SR(n,e=t=>t){return{query:e(n),ref:n}}var MR=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,D,b,A,F,B){this.schedulers=u;let P=Ch(t,a,r),G=h;p&&vv(P,a,m,D,b,A,y,F),[this.firestore,this.persistenceEnabled$]=Th(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let Y=a.runOutsideAngular(()=>P.firestore());if(o&&Y.settings(o),G&&Y.useEmulator(...G),i&&!qr(s)){let K=()=>{try{return ge(Y.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Z(!1)}};return[Y,a.runOutsideAngular(K)]}else return[Y,Z(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=SR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Jf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new TE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Yf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(Ih),L(Dh,8),L(A$,8),L(M$,8),L(at),L(_e),L(As),L(S$,8),L(x$,8),L(YA,8),L(hv,8),L(fv,8),L(pv,8),L(gv,8),L(mv,8),L(yv,8),L(Zi,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var xR=class n{constructor(e){this.angularF=e;this.productoColeccion=this.angularF.collection(this.dbPath),this.choferes=this.productoColeccion.valueChanges(this.dbPath)}dbPath="/chofer";productoColeccion;choferes;chofer;guardarChofer(e,t,r,i,o,s){let a=this.angularF.createId(),u=new bh(a,e,t,r,i,s,o);this.angularF.collection(this.dbPath).doc(a).set(u.toJson())}obtenerChofer(){let e=[];return this.choferes.forEach(t=>{t.forEach(r=>{e.push(r)})}),e}static \u0275fac=function(t){return new(t||n)(L(MR))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};export{oe as a,ge as b,Z as c,J as d,VN as e,Oe as f,W as g,H as h,L as i,Vr as j,EC as k,Lr as l,x3 as m,R3 as n,N3 as o,P3 as p,Vt as q,$e as r,_e as s,at as t,GO as u,O3 as v,ie as w,H1 as x,nF as y,hb as z,fb as A,jm as B,L3 as C,nr as D,j3 as E,_F as F,U3 as G,EF as H,mb as I,IF as J,B3 as K,DF as L,vb as M,$3 as N,p8 as O,g8 as P,JF as Q,uV as R,M8 as S,t5 as T,wL as U,dr as V,I5 as W,D5 as X,C5 as Y,iA as Z,W0 as _,q5 as $,H5 as aa,d2 as ba,G5 as ca,f2 as da,g2 as ea,y2 as fa,MA as ga,W5 as ha,K5 as ia,D2 as ja,T2 as ka,A2 as la,M2 as ma,Q5 as na,Y5 as oa,Z5 as pa,ju as qa,u6 as ra,N2 as sa,Zi as ta,As as ua,c6 as va,At as wa,OA as xa,Bu as ya,rv as za,_6 as Aa,w6 as Ba,Ih as Ca,Dh as Da,Ch as Ea,Th as Fa,YA as Ga,SW as Ha,MR as Ia,xR as Ja};
