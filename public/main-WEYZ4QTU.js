import{A as fs,B as yd,C as ht,D as tn,E as Em,a as $,b as ye,c as mm,d as M,e as Tb,f as ld,g as Ab,h as Sb,i as Rb,j as ym,k as vm,l as dd,m as $u,n as _m,o as hd,p as fd,q as Mb,r as wm,s as Te,t as Rn,u as qn,v as pd,w as io,x as gd,y as md,z as xb}from"./chunk-UUEULNQS.js";function Nb(n,e){return Object.is(n,e)}var ft=null,vd=!1,_d=1,Er=Symbol("SIGNAL");function De(n){let e=ft;return ft=n,e}function Pb(){return ft}var Hu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bm(n){if(vd)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(n);let e=ft.nextProducerIndex++;if(Dd(ft),e<ft.producerNode.length&&ft.producerNode[e]!==n&&qu(ft)){let t=ft.producerNode[e];Id(t,ft.producerIndexOfThis[e])}ft.producerNode[e]!==n&&(ft.producerNode[e]=n,ft.producerIndexOfThis[e]=qu(ft)?Vb(n,ft,e):0),ft.producerLastReadVersion[e]=n.version}function lk(){_d++}function kb(n){if(!(qu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===_d)){if(!n.producerMustRecompute(n)&&!Tm(n)){n.dirty=!1,n.lastCleanEpoch=_d;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=_d}}function Ob(n){if(n.liveConsumerNode===void 0)return;let e=vd;vd=!0;try{for(let t of n.liveConsumerNode)t.dirty||dk(t)}finally{vd=e}}function Fb(){return ft?.consumerAllowSignalWrites!==!1}function dk(n){n.dirty=!0,Ob(n),n.consumerMarkedDirty?.(n)}function Ed(n){return n&&(n.nextProducerIndex=0),De(n)}function Cm(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Id(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Tm(n){Dd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(kb(t),r!==t.version))return!0}return!1}function Am(n){if(Dd(n),qu(n))for(let e=0;e<n.producerNode.length;e++)Id(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Vb(n,e,t){if(Lb(n),n.liveConsumerNode.length===0&&jb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Vb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Id(n,e){if(Lb(n),n.liveConsumerNode.length===1&&jb(n))for(let r=0;r<n.producerNode.length;r++)Id(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Dd(i),i.producerIndexOfThis[r]=e}}function qu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Dd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Lb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function jb(n){return n.producerNode!==void 0}function Ub(n){let e=Object.create(hk);e.computation=n;let t=()=>{if(kb(e),bm(e),e.value===wd)throw e.error;return e.value};return t[Er]=e,t}var Im=Symbol("UNSET"),Dm=Symbol("COMPUTING"),wd=Symbol("ERRORED"),hk=ye($({},Hu),{value:Im,dirty:!0,error:null,equal:Nb,producerMustRecompute(n){return n.value===Im||n.value===Dm},producerRecomputeValue(n){if(n.value===Dm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Dm;let t=Ed(n),r;try{r=n.computation()}catch(i){r=wd,n.error=i}finally{Cm(n,t)}if(e!==Im&&e!==wd&&r!==wd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function fk(){throw new Error}var Bb=fk;function $b(){Bb()}function qb(n){Bb=n}var pk=null;function Hb(n){let e=Object.create(zb);e.value=n;let t=()=>(bm(e),e.value);return t[Er]=e,t}function Sm(n,e){Fb()||$b(),n.equal(n.value,e)||(n.value=e,gk(n))}function Gb(n,e){Fb()||$b(),Sm(n,e(n.value))}var zb=ye($({},Hu),{equal:Nb,value:void 0});function gk(n){n.version++,lk(),Ob(n),pk?.()}function oe(n){return typeof n=="function"}function ps(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bd=ps(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function oo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ye=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof bd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Wb(o)}catch(s){e=e??[],s instanceof bd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&oo(t,e)}remove(e){let{_finalizers:t}=this;t&&oo(t,e),e instanceof n&&e._removeParent(this)}};Ye.EMPTY=(()=>{let n=new Ye;return n.closed=!0,n})();var Rm=Ye.EMPTY;function Cd(n){return n instanceof Ye||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function Wb(n){oe(n)?n():n.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gs={setTimeout(n,e,...t){let{delegate:r}=gs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=gs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Td(n){gs.setTimeout(()=>{let{onUnhandledError:e}=Mn;if(e)e(n);else throw n})}function Gu(){}var Kb=Mm("C",void 0,void 0);function Qb(n){return Mm("E",void 0,n)}function Yb(n){return Mm("N",n,void 0)}function Mm(n,e,t){return{kind:n,value:e,error:t}}var so=null;function ms(n){if(Mn.useDeprecatedSynchronousErrorHandling){let e=!so;if(e&&(so={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=so;if(so=null,t)throw r}}else n()}function Zb(n){Mn.useDeprecatedSynchronousErrorHandling&&so&&(so.errorThrown=!0,so.error=n)}var ao=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cd(e)&&e.add(this)):this.destination=vk}static create(e,t,r){return new Ir(e,t,r)}next(e){this.isStopped?Nm(Yb(e),this):this._next(e)}error(e){this.isStopped?Nm(Qb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nm(Kb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mk=Function.prototype.bind;function xm(n,e){return mk.call(n,e)}var Pm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ad(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ad(r)}else Ad(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ad(t)}}},Ir=class extends ao{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Mn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xm(e.next,o),error:e.error&&xm(e.error,o),complete:e.complete&&xm(e.complete,o)}):i=e}this.destination=new Pm(i)}};function Ad(n){Mn.useDeprecatedSynchronousErrorHandling?Zb(n):Td(n)}function yk(n){throw n}function Nm(n,e){let{onStoppedNotification:t}=Mn;t&&gs.setTimeout(()=>t(n,e))}var vk={closed:!0,next:Gu,error:yk,complete:Gu};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jt(n){return n}function km(...n){return Om(n)}function Om(n){return n.length===0?jt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=wk(t)?t:new Ir(t,r,i);return ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Jb(r),new r((i,o)=>{let s=new Ir({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ys](){return this}pipe(...t){return Om(t)(this)}toPromise(t){return t=Jb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Jb(n){var e;return(e=n??Mn.Promise)!==null&&e!==void 0?e:Promise}function _k(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function wk(n){return n&&n instanceof ao||_k(n)&&Cd(n)}function Fm(n){return oe(n?.lift)}function ce(n){return e=>{if(Fm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new Vm(n,e,t,r,i)}var Vm=class extends ao{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vs(){return ce((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _s=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return vs()(this)}};var Xb=ps(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Sd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Xb}next(t){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rm:(this.currentObservers=null,o.push(t),new Ye(()=>{this.currentObservers=null,oo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new Sd(e,t),n})(),Sd=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rm}};var Et=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zu={now(){return(zu.delegate||Date).now()},delegate:void 0};var Rd=class extends Ue{constructor(e=1/0,t=1/0,r=zu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Md=class extends Ye{constructor(e,t){super()}schedule(e,t=0){return this}};var Wu={setInterval(n,e,...t){let{delegate:r}=Wu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ws=class extends Md{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Wu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,oo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Es=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Es.now=zu.now;var Is=class extends Es{constructor(e,t=Es.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var uo=new Is(ws);var xd=class extends ws{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nd=class extends Is{};var Lm=new Nd(xd);var Ut=new ae(n=>n.complete());function eC(n){return n&&oe(n.schedule)}function jm(n){return n[n.length-1]}function Pd(n){return oe(jm(n))?n.pop():void 0}function Hn(n){return eC(jm(n))?n.pop():void 0}function tC(n,e){return typeof jm(n)=="number"?n.pop():e}var kd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Od(n){return oe(n?.then)}function Fd(n){return oe(n[ys])}function Vd(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Ld(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ek(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jd=Ek();function Ud(n){return oe(n?.[jd])}function Bd(n){return Ab(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ld(t.read());if(i)return yield ld(void 0);yield yield ld(r)}}finally{t.releaseLock()}})}function $d(n){return oe(n?.getReader)}function Ve(n){if(n instanceof ae)return n;if(n!=null){if(Fd(n))return Ik(n);if(kd(n))return Dk(n);if(Od(n))return bk(n);if(Vd(n))return nC(n);if(Ud(n))return Ck(n);if($d(n))return Tk(n)}throw Ld(n)}function Ik(n){return new ae(e=>{let t=n[ys]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Dk(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function bk(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Td)})}function Ck(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function nC(n){return new ae(e=>{Ak(n,e).catch(t=>e.error(t))})}function Tk(n){return nC(Bd(n))}function Ak(n,e){var t,r,i,o;return Tb(this,void 0,void 0,function*(){try{for(t=Sb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Zt(n,e=0){return ce((t,r)=>{t.subscribe(le(r,i=>Yt(r,n,()=>r.next(i),e),()=>Yt(r,n,()=>r.complete(),e),i=>Yt(r,n,()=>r.error(i),e)))})}function fn(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rC(n,e){return Ve(n).pipe(fn(e),Zt(e))}function iC(n,e){return Ve(n).pipe(fn(e),Zt(e))}function oC(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sC(n,e){return new ae(t=>{let r;return Yt(t,e,()=>{r=n[jd](),Yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function qd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{Yt(t,e,()=>{let r=n[Symbol.asyncIterator]();Yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function aC(n,e){return qd(Bd(n),e)}function uC(n,e){if(n!=null){if(Fd(n))return rC(n,e);if(kd(n))return oC(n,e);if(Od(n))return iC(n,e);if(Vd(n))return qd(n,e);if(Ud(n))return sC(n,e);if($d(n))return aC(n,e)}throw Ld(n)}function fe(n,e){return e?uC(n,e):Ve(n)}function ee(...n){let e=Hn(n);return fe(n,e)}function Ds(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function Um(n){return!!n&&(n instanceof ae||oe(n.lift)&&oe(n.subscribe))}var Dr=ps(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Sk}=Array;function Rk(n,e){return Sk(e)?n(...e):n(e)}function Hd(n){return ne(e=>Rk(n,e))}var{isArray:Mk}=Array,{getPrototypeOf:xk,prototype:Nk,keys:Pk}=Object;function Gd(n){if(n.length===1){let e=n[0];if(Mk(e))return{args:e,keys:null};if(kk(e)){let t=Pk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function kk(n){return n&&typeof n=="object"&&xk(n)===Nk}function zd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ku(...n){let e=Hn(n),t=Pd(n),{args:r,keys:i}=Gd(n);if(r.length===0)return fe([],e);let o=new ae(Ok(r,e,i?s=>zd(i,s):jt));return t?o.pipe(Hd(t)):o}function Ok(n,e,t=jt){return r=>{cC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)cC(e,()=>{let l=fe(n[u],e),d=!1;l.subscribe(le(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cC(n,e,t){n?Yt(t,n,e):e()}function lC(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=C=>l<r?I(C):u.push(C),I=C=>{o&&e.next(C),l++;let D=!1;Ve(t(C,d++)).subscribe(le(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;u.length&&l<r;){let k=u.shift();s?Yt(e,s,()=>I(k)):I(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(le(e,y,()=>{f=!0,g()})),()=>{a?.()}}function it(n,e,t=1/0){return oe(e)?it((r,i)=>ne((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>lC(r,i,n,t)))}function ei(n=1/0){return it(jt,n)}function dC(){return ei(1)}function bs(...n){return dC()(fe(n,Hn(n)))}function Wd(n){return new ae(e=>{Ve(n()).subscribe(e)})}function Bm(...n){let e=Pd(n),{args:t,keys:r}=Gd(n),i=new ae(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Ve(t[d]).subscribe(le(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?zd(r,a):a),o.complete())}))}});return e?i.pipe(Hd(e)):i}function $m(...n){let e=Hn(n),t=tC(n,1/0),r=n;return r.length?r.length===1?Ve(r[0]):ei(t)(fe(r,e)):Ut}function pt(n,e){return ce((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ti(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=Ve(n(s,ti(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function hC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(le(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function br(n,e){return oe(e)?it(n,e,1):it(n,1)}function qm(n,e=uo){return ce((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(le(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function ni(n){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Cr(n){return n<=0?()=>Ut:ce((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hm(n){return ne(()=>n)}function Gm(n,e=jt){return n=n??Fk,ce((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Fk(n,e){return n===e}function Kd(n=Vk){return ce((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Vk(){return new Dr}function co(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):jt,Cr(1),t?ni(e):Kd(()=>new Dr))}function Cs(n){return n<=0?()=>Ut:ce((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):jt,Cs(1),t?ni(e):Kd(()=>new Dr))}function Qu(){return ce((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function lo(n,e){return ce(hC(n,e,arguments.length>=2,!0))}function fC(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},I=()=>{let C=s;y(),C?.unsubscribe()};return ce((C,D)=>{l++,!f&&!d&&g();let k=u=u??e();D.add(()=>{l--,l===0&&!f&&!d&&(a=Wm(I,i))}),k.subscribe(D),!s&&l>0&&(s=new Ir({next:j=>k.next(j),error:j=>{f=!0,g(),a=Wm(y,t,j),k.error(j)},complete:()=>{d=!0,g(),a=Wm(y,r),k.complete()}}),Ve(C).subscribe(s))})(o)}}function Wm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ir({next:()=>{r.unsubscribe(),n()}});return Ve(e(...t)).subscribe(r)}function Qd(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,fC({connector:()=>new Rd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ho(...n){let e=Hn(n);return ce((t,r)=>{(e?bs(n,t,e):bs(n,t)).subscribe(r)})}function xe(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,u=>{i?.unsubscribe();let l=0,d=o++;Ve(n(u,d)).subscribe(i=le(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yd(n,e){return oe(e)?xe(()=>n,e):xe(()=>n)}function Km(n){return ce((e,t)=>{Ve(n).subscribe(le(t,()=>t.complete(),Gu)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):jt}var XC="https://g.co/ng/security#xss",re=class extends Error{constructor(e,t){super(xh(e,t)),this.code=e}};function xh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ic(n){return{toString:n}.toString()}var Zd="__parameters__";function Lk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function eT(n,e,t){return ic(()=>{let r=Lk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(Zd)?u[Zd]:Object.defineProperty(u,Zd,{value:[]})[Zd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var uy=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function jk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $t(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map($t).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function pC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Uk=Ne({__forward_ref__:Ne});function Zn(n){return n.__forward_ref__=Zn,n.toString=function(){return $t(this())},n}function Bt(n){return tT(n)?n():n}function tT(n){return typeof n=="function"&&n.hasOwnProperty(Uk)&&n.__forward_ref__===Zn}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nh(n){return gC(n,rT)||gC(n,iT)}function nT(n){return Nh(n)!==null}function gC(n,e){return n.hasOwnProperty(e)?n[e]:null}function Bk(n){let e=n&&(n[rT]||n[iT]);return e||null}function mC(n){return n&&(n.hasOwnProperty(yC)||n.hasOwnProperty($k))?n[yC]:null}var rT=Ne({\u0275prov:Ne}),yC=Ne({\u0275inj:Ne}),iT=Ne({ngInjectableDef:Ne}),$k=Ne({ngInjectorDef:Ne}),B=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oT(n){return n&&!!n.\u0275providers}var qk=Ne({\u0275cmp:Ne}),Hk=Ne({\u0275dir:Ne}),Gk=Ne({\u0275pipe:Ne}),zk=Ne({\u0275mod:Ne}),ah=Ne({\u0275fac:Ne}),Zu=Ne({__NG_ELEMENT_ID__:Ne}),vC=Ne({__NG_ENV_ID__:Ne});function Ph(n){return typeof n=="string"?n:n==null?"":String(n)}function Wk(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ph(n)}function Kk(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new re(-200,n)}function Xy(n,e){throw new re(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),cy;function sT(){return cy}function gn(n){let e=cy;return cy=n,e}function aT(n,e,t){let r=Nh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;Xy(n,"Injector")}var Qk={},Ju=Qk,ly="__NG_DI_FLAG__",uh="ngTempTokenPath",Yk="ngTokenPath",Zk=/\n/gm,Jk="\u0275",_C="__source",Ms;function Xk(){return Ms}function ri(n){let e=Ms;return Ms=n,e}function eO(n,e=pe.Default){if(Ms===void 0)throw new re(-203,!1);return Ms===null?aT(n,void 0,e):Ms.get(n,e&pe.Optional?null:void 0,e)}function F(n,e=pe.Default){return(sT()||eO)(Bt(n),e)}function L(n,e=pe.Default){return F(n,kh(e))}function kh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function dy(n){let e=[];for(let t=0;t<n.length;t++){let r=Bt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=tO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function uT(n,e){return n[ly]=e,n.prototype[ly]=e,n}function tO(n){return n[ly]}function nO(n,e,t,r){let i=n[uh];throw e[_C]&&i.unshift(e[_C]),n.message=rO(`
`+n.message,i,t,r),n[Yk]=i,n[uh]=null,n}function rO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Jk?n.slice(2):n;let i=$t(e);if(Array.isArray(e))i=e.map($t).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):$t(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Zk,`
  `)}`}var Dt=uT(eT("Optional"),8);var ev=uT(eT("SkipSelf"),4);function Ns(n,e){let t=n.hasOwnProperty(ah);return t?n[ah]:null}function tv(n,e){n.forEach(t=>Array.isArray(t)?tv(t,e):e(t))}function cT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ch(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function iO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function oO(n,e,t){let r=oc(n,e);return r>=0?n[r|1]=t:(r=~r,iO(n,r,e,t)),r}function Qm(n,e){let t=oc(n,e);if(t>=0)return n[t|1]}function oc(n,e){return sO(n,e,1)}function sO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ps={},mn=[],ks=new B(""),lT=new B("",-1),dT=new B(""),lh=class{get(e,t=Ju){if(t===Ju){let r=new Error(`NullInjectorError: No provider for ${$t(e)}!`);throw r.name="NullInjectorError",r}return t}},hT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(hT||{}),Wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wn||{}),si=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(si||{});function aO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function hy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];uO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fT(n){return n===3||n===4||n===6}function uO(n){return n.charCodeAt(0)===64}function Xu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?wC(n,t,i,null,e[++r]):wC(n,t,i,null,null))}}return n}function wC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var pT="ng-template";function cO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(nv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function nv(n){return n.type===4&&n.value!==pT}function lO(n,e,t){let r=n.type===4&&!t?pT:n.value;return e===r}function dO(n,e,t){let r=4,i=n.attrs,o=i!==null?pO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!xn(r)&&!xn(u))return!1;if(s&&xn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!lO(n,u,t)||u===""&&e.length===1){if(xn(r))return!1;s=!0}}else if(r&8){if(i===null||!cO(n,i,u,t)){if(xn(r))return!1;s=!0}}else{let l=e[++a],d=hO(u,i,nv(n),t);if(d===-1){if(xn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(xn(r))return!1;s=!0}}}}return xn(r)||s}function xn(n){return(n&1)===0}function hO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gO(e,n)}function fO(n,e,t=!1){for(let r=0;r<e.length;r++)if(dO(n,e[r],t))return!0;return!1}function pO(n){for(let e=0;e<n.length;e++){let t=n[e];if(fT(t))return e}return n.length}function gO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function EC(n,e){return n?":not("+e.trim()+")":e}function mO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!xn(s)&&(e+=EC(o,i),i=""),r=s,o=o||!xn(r);t++}return i!==""&&(e+=EC(o,i)),e}function yO(n){return n.map(mO).join(",")}function vO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!xn(i))break;i=o}r++}return{attrs:e,classes:t}}function xt(n){return ic(()=>{let e=_T(n),t=ye($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===hT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wn.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});wT(t);let r=n.dependencies;return t.directiveDefs=DC(r,!1),t.pipeDefs=DC(r,!0),t.id=EO(t),t})}function _O(n){return ai(n)||gT(n)}function wO(n){return n!==null}function rn(n){return ic(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function IC(n,e){if(n==null)return Ps;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=si.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==si.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Xe(n){return ic(()=>{let e=_T(n);return wT(e),e})}function ai(n){return n[qk]||null}function gT(n){return n[Hk]||null}function mT(n){return n[Gk]||null}function yT(n){let e=ai(n)||gT(n)||mT(n);return e!==null?e.standalone:!1}function vT(n,e){let t=n[zk]||null;if(!t&&e===!0)throw new Error(`Type ${$t(n)} does not have '\u0275mod' property.`);return t}function _T(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ps,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IC(n.inputs,e),outputs:IC(n.outputs),debugInfo:null}}function wT(n){n.features?.forEach(e=>e(n))}function DC(n,e){if(!n)return null;let t=e?mT:_O;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(wO)}function EO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _n(n){return{\u0275providers:n}}function IO(...n){return{\u0275providers:ET(!0,n),\u0275fromNgModule:!0}}function ET(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return tv(e,s=>{let a=s;fy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&IT(i,o),t}function IT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rv(i,o=>{e(o,r)})}}function fy(n,e,t,r){if(n=Bt(n),!n)return!1;let i=null,o=mC(n),s=!o&&ai(n);if(!o&&!s){let u=n.ngModule;if(o=mC(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)fy(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{tv(o.imports,d=>{fy(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&IT(l,e)}if(!a){let l=Ns(i)||(()=>new i);e({provide:i,useFactory:l,deps:mn},i),e({provide:dT,useValue:i,multi:!0},i),e({provide:ks,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;rv(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rv(n,e){for(let t of n)oT(t)&&(t=t.\u0275providers),Array.isArray(t)?rv(t,e):e(t)}var DO=Ne({provide:String,useValue:Ne});function DT(n){return n!==null&&typeof n=="object"&&DO in n}function bO(n){return!!(n&&n.useExisting)}function CO(n){return!!(n&&n.useFactory)}function Os(n){return typeof n=="function"}function TO(n){return!!n.useClass}var Oh=new B(""),nh={},AO={},Ym;function iv(){return Ym===void 0&&(Ym=new lh),Ym}var qt=class{},ec=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gy(e,s=>this.processProvider(s)),this.records.set(lT,Ts(void 0,this)),i.has("environment")&&this.records.set(qt,Ts(void 0,this));let o=this.records.get(Oh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dT,mn,pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ri(this),r=gn(void 0),i;try{return e()}finally{ri(t),gn(r)}}get(e,t=Ju,r=pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vC))return e[vC](this);r=kh(r);let i,o=ri(this),s=gn(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=NO(e)&&Nh(e);l&&this.injectableDefInScope(l)?u=Ts(py(e),nh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?iv():this.parent;return t=r&pe.Optional&&t===Ju?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[uh]=a[uh]||[]).unshift($t(e)),o)throw a;return nO(a,e,"R3InjectorError",this.source)}else throw a}finally{gn(s),ri(o)}}resolveInjectorInitializers(){let e=De(null),t=ri(this),r=gn(void 0),i;try{let o=this.get(ks,mn,pe.Self);for(let s of o)s()}finally{ri(t),gn(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=Bt(e);let t=Os(e)?e:Bt(e&&e.provide),r=RO(e);if(!Os(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ts(void 0,nh,!0),i.factory=()=>dy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===nh&&(t.value=AO,t.value=t.factory()),typeof t.value=="object"&&t.value&&xO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Bt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function py(n){let e=Nh(n),t=e!==null?e.factory:Ns(n);if(t!==null)return t;if(n instanceof B)throw new re(204,!1);if(n instanceof Function)return SO(n);throw new re(204,!1)}function SO(n){if(n.length>0)throw new re(204,!1);let t=Bk(n);return t!==null?()=>t.factory(n):()=>new n}function RO(n){if(DT(n))return Ts(void 0,n.useValue);{let e=bT(n);return Ts(e,nh)}}function bT(n,e,t){let r;if(Os(n)){let i=Bt(n);return Ns(i)||py(i)}else if(DT(n))r=()=>Bt(n.useValue);else if(CO(n))r=()=>n.useFactory(...dy(n.deps||[]));else if(bO(n))r=()=>F(Bt(n.useExisting));else{let i=Bt(n&&(n.useClass||n.provide));if(MO(n))r=()=>new i(...dy(n.deps));else return Ns(i)||py(i)}return r}function Ts(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MO(n){return!!n.deps}function xO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function NO(n){return typeof n=="function"||typeof n=="object"&&n instanceof B}function gy(n,e){for(let t of n)Array.isArray(t)?gy(t,e):t&&oT(t)?gy(t.\u0275providers,e):e(t)}function wn(n,e){n instanceof ec&&n.assertNotDestroyed();let t,r=ri(n),i=gn(void 0);try{return e()}finally{ri(r),gn(i)}}function CT(){return sT()!==void 0||Xk()!=null}function PO(n){if(!CT())throw new re(-203,!1)}function kO(n){return typeof n=="function"}var Rr=0,ve=1,se=2,Ht=3,Nn=4,kn=5,dh=6,hh=7,Pn=8,Fs=9,Kn=10,ot=11,tc=12,bC=13,Gs=14,Qn=15,Vs=16,As=17,Ls=18,Fh=19,TT=20,ii=21,Zm=22,yn=23,ui=25,AT=1;var po=7,fh=8,ph=9,vn=10,gh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(gh||{});function oi(n){return Array.isArray(n)&&typeof n[AT]=="object"}function Mr(n){return Array.isArray(n)&&n[AT]===!0}function ST(n){return(n.flags&4)!==0}function Vh(n){return n.componentOffset>-1}function ov(n){return(n.flags&1)===1}function ci(n){return!!n.template}function my(n){return(n[se]&512)!==0}var yy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function RT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function xr(){return MT}function MT(n){return n.type.prototype.ngOnChanges&&(n.setInput=FO),OO}xr.ngInherit=!0;function OO(){let n=NT(this),e=n?.current;if(e){let t=n.previous;if(t===Ps)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function FO(n,e,t,r,i){let o=this.declaredInputs[r],s=NT(n)||VO(n,{previous:Ps,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new yy(l&&l.currentValue,t,u===Ps),RT(n,e,i,t)}var xT="__ngSimpleChanges__";function NT(n){return n[xT]||null}function VO(n,e){return n[xT]=e}var CC=null;var Gn=function(n,e,t){CC?.(n,e,t)},LO="svg",jO="math";function Yn(n){for(;Array.isArray(n);)n=n[Rr];return n}function PT(n,e){return Yn(e[n])}function En(n,e){return Yn(e[n.index])}function kT(n,e){return n.data[e]}function di(n,e){let t=e[n];return oi(t)?t:t[Rr]}function sv(n){return(n[se]&128)===128}function UO(n){return Mr(n[Ht])}function mh(n,e){return e==null?null:n[e]}function OT(n){n[As]=0}function FT(n){n[se]&1024||(n[se]|=1024,sv(n)&&jh(n))}function BO(n,e){for(;n>0;)e=e[Gs],n--;return e}function Lh(n){return!!(n[se]&9216||n[yn]?.dirty)}function vy(n){n[Kn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Lh(n)&&jh(n)}function jh(n){n[Kn].changeDetectionScheduler?.notify(0);let e=go(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!sv(e)));)e=go(e)}function VT(n,e){if((n[se]&256)===256)throw new re(911,!1);n[ii]===null&&(n[ii]=[]),n[ii].push(e)}function $O(n,e){if(n[ii]===null)return;let t=n[ii].indexOf(e);t!==-1&&n[ii].splice(t,1)}function go(n){let e=n[Ht];return Mr(e)?e[Ht]:e}var _e={lFrame:zT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LT=!1;function qO(){return _e.lFrame.elementDepthCount}function HO(){_e.lFrame.elementDepthCount++}function GO(){_e.lFrame.elementDepthCount--}function jT(){return _e.bindingsEnabled}function zO(){return _e.skipHydrationRootTNode!==null}function WO(n){return _e.skipHydrationRootTNode===n}function KO(){_e.skipHydrationRootTNode=null}function ke(){return _e.lFrame.lView}function Jt(){return _e.lFrame.tView}function av(n){return _e.lFrame.contextLView=n,n[Pn]}function uv(n){return _e.lFrame.contextLView=null,n}function Gt(){let n=UT();for(;n!==null&&n.type===64;)n=n.parent;return n}function UT(){return _e.lFrame.currentTNode}function QO(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function sc(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function BT(){return _e.lFrame.isParent}function YO(){_e.lFrame.isParent=!1}function $T(){return LT}function TC(n){LT=n}function ZO(n){return _e.lFrame.bindingIndex=n}function Uh(){return _e.lFrame.bindingIndex++}function JO(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XO(){return _e.lFrame.inI18n}function eF(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,_y(e)}function tF(){return _e.lFrame.currentDirectiveIndex}function _y(n){_e.lFrame.currentDirectiveIndex=n}function nF(n){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function qT(n){_e.lFrame.currentQueryIndex=n}function rF(n){let e=n[ve];return e.type===2?e.declTNode:e.type===1?n[kn]:null}function HT(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=rF(o),i===null||(o=o[Gs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=_e.lFrame=GT();return r.currentTNode=e,r.lView=n,!0}function cv(n){let e=GT(),t=n[ve];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function GT(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?zT(n):e}function zT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WT(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KT=WT;function lv(){let n=WT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function iF(n){return(_e.lFrame.contextLView=BO(n,_e.lFrame.contextLView))[Pn]}function zs(){return _e.lFrame.selectedIndex}function mo(n){_e.lFrame.selectedIndex=n}function Bh(){let n=_e.lFrame;return kT(n.tView,n.selectedIndex)}function oF(){return _e.lFrame.currentNamespace}var QT=!0;function dv(){return QT}function hv(n){QT=n}function sF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function fv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function rh(n,e,t){YT(n,e,3,t)}function ih(n,e,t,r){(n[se]&3)===t&&YT(n,e,t,r)}function Jm(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function YT(n,e,t,r){let i=r!==void 0?n[As]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[As]+=65536),(a<o||o==-1)&&(aF(n,t,e,u),n[As]=(n[As]&4294901760)+u+2),u++}function AC(n,e){Gn(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),Gn(5,n,e)}}function aF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[As]>>16&&(n[se]&3)===e&&(n[se]+=16384,AC(a,o)):AC(a,o)}var xs=-1,yo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function uF(n){return n instanceof yo}function cF(n){return(n.flags&8)!==0}function lF(n){return(n.flags&16)!==0}var Xm={},wy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kh(r);let i=this.injector.get(e,Xm,r);return i!==Xm||t===Xm?i:this.parentInjector.get(e,t,r)}};function ZT(n){return n!==xs}function yh(n){return n&32767}function dF(n){return n>>16}function vh(n,e){let t=dF(n),r=e;for(;t>0;)r=r[Gs],t--;return r}var Ey=!0;function SC(n){let e=Ey;return Ey=n,e}var hF=256,JT=hF-1,XT=5,fF=0,zn={};function pF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Zu)&&(r=t[Zu]),r==null&&(r=t[Zu]=fF++);let i=r&JT,o=1<<i;e.data[n+(i>>XT)]|=o}function _h(n,e){let t=eA(n,e);if(t!==-1)return t;let r=e[ve];r.firstCreatePass&&(n.injectorIndex=e.length,ey(r.data,n),ey(e,null),ey(r.blueprint,null));let i=pv(n,e),o=n.injectorIndex;if(ZT(i)){let s=yh(i),a=vh(i,e),u=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ey(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oA(i),r===null)return xs;if(t++,i=i[Gs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xs}function Iy(n,e,t){pF(n,e,t)}function gF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(fT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tA(n,e,t){if(t&pe.Optional||n!==void 0)return n;Xy(e,"NodeInjector")}function nA(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),!(t&(pe.Self|pe.Host))){let i=n[Fs],o=gn(void 0);try{return i?i.get(e,r,t&pe.Optional):aT(e,r,t&pe.Optional)}finally{gn(o)}}return tA(r,e,t)}function rA(n,e,t,r=pe.Default,i){if(n!==null){if(e[se]&2048&&!(r&pe.Self)){let s=wF(n,e,t,r,zn);if(s!==zn)return s}let o=iA(n,e,t,r,zn);if(o!==zn)return o}return nA(e,t,r,i)}function iA(n,e,t,r,i){let o=vF(t);if(typeof o=="function"){if(!HT(e,n,r))return r&pe.Host?tA(i,t,r):nA(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))Xy(t);else return s}finally{KT()}}else if(typeof o=="number"){let s=null,a=eA(n,e),u=xs,l=r&pe.Host?e[Qn][kn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?pv(n,e):e[a+8],u===xs||!MC(r,!1)?a=-1:(s=e[ve],a=yh(u),e=vh(u,e)));a!==-1;){let d=e[ve];if(RC(o,a,d.data)){let f=mF(a,e,t,s,r,l);if(f!==zn)return f}u=e[a+8],u!==xs&&MC(r,e[ve].data[a+8]===l)&&RC(o,a,e)?(s=d,a=yh(u),e=vh(u,e)):a=-1}}return i}function mF(n,e,t,r,i,o){let s=e[ve],a=s.data[n+8],u=r==null?Vh(a)&&Ey:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,d=yF(a,s,t,u,l);return d!==null?js(e,s,d,a):zn}function yF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let I=s[y];if(y<u&&t===I||y>=u&&I.type===t)return y}if(i){let y=s[u];if(y&&ci(y)&&y.type===t)return u}return null}function js(n,e,t,r){let i=n[t],o=e.data;if(uF(i)){let s=i;s.resolving&&Kk(Wk(o[t]));let a=SC(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?gn(s.injectImpl):null,d=HT(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&sF(t,o[t],e)}finally{l!==null&&gn(l),SC(a),s.resolving=!1,KT()}}return i}function vF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Zu)?n[Zu]:void 0;return typeof e=="number"?e>=0?e&JT:_F:e}function RC(n,e,t){let r=1<<n;return!!(t[e+(n>>XT)]&r)}function MC(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var fo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rA(this._tNode,this._lView,e,kh(r),t)}};function _F(){return new fo(Gt(),ke())}function hi(n){return ic(()=>{let e=n.prototype.constructor,t=e[ah]||Dy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ah]||Dy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Dy(n){return tT(n)?()=>{let e=Dy(Bt(n));return e&&e()}:Ns(n)}function wF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=iA(o,s,t,r|pe.Self,zn);if(a!==zn)return a;let u=o.parent;if(!u){let l=s[TT];if(l){let d=l.get(t,zn,r);if(d!==zn)return d}u=oA(s),s=s[Gs]}o=u}return i}function oA(n){let e=n[ve],t=e.type;return t===2?e.declTNode:t===1?n[kn]:null}function gv(n){return gF(Gt(),n)}function xC(n,e=null,t=null,r){let i=sA(n,e,t,r);return i.resolveInjectorInitializers(),i}function sA(n,e=null,t=null,r,i=new Set){let o=[t||mn,IO(n)];return r=r||(typeof n=="object"?void 0:$t(n)),new ec(o,e||iv(),r||null,i)}var It=class n{static{this.THROW_IF_NOT_FOUND=Ju}static{this.NULL=new lh}static create(e,t){if(Array.isArray(e))return xC({name:""},t,e,"");{let r=e.name??"";return xC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>F(lT)})}static{this.__NG_ELEMENT_ID__=-1}};var EF=new B("");EF.__NG_ELEMENT_ID__=n=>{let e=Gt();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new re(204,!1)};var IF="ngOriginalError";function ty(n){return n[IF]}var aA=!0,mv=(()=>{class n{static{this.__NG_ELEMENT_ID__=DF}static{this.__NG_ENV_ID__=t=>t}}return n})(),by=class extends mv{constructor(e){super(),this._lView=e}onDestroy(e){return VT(this._lView,e),()=>$O(this._lView,e)}};function DF(){return new by(ke())}var fi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Cy=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,CT()&&(this.destroyRef=L(mv,{optional:!0})??void 0,this.pendingTasks=L(fi,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ye&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=Cy;function wh(...n){}function uA(n){let e,t;function r(){n=wh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function NC(n){return queueMicrotask(()=>n()),()=>{n=wh}}var yv="isAngularZone",Eh=yv+"_ID",bF=0,ge=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=aA}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,AF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CF,wh,wh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},CF={};function vv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function TF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uA(()=>{n.callbackScheduled=!1,Ty(n),n.isCheckStableRunning=!0,vv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ty(n)}function AF(n){let e=()=>{TF(n)},t=bF++;n._inner=n._inner.fork({name:"angular",properties:{[yv]:!0,[Eh]:t,[Eh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(SF(u))return r.invokeTask(o,s,a,u);try{return PC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),kC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return PC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!RF(u)&&e(),kC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ty(n),vv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ty(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kC(n){n._nesting--,vv(n)}var Ay=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function SF(n){return cA(n,"__ignore_ng_zone__")}function RF(n){return cA(n,"__scheduler_tick__")}function cA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ty(e);for(;t&&ty(t);)t=ty(t);return t||null}},MF=new B("",{providedIn:"root",factory:()=>{let n=L(ge),e=L(Tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function xF(){return $h(Gt(),ke())}function $h(n,e){return new Jn(En(n,e))}var Jn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=xF}}return n})();function lA(n){return(n.flags&128)===128}var dA=new Map,NF=0;function PF(){return NF++}function kF(n){dA.set(n[Fh],n)}function Sy(n){dA.delete(n[Fh])}var OC="__ngContext__";function vo(n,e){oi(e)?(n[OC]=e[Fh],kF(e)):n[OC]=e}function hA(n){return pA(n[tc])}function fA(n){return pA(n[Nn])}function pA(n){for(;n!==null&&!Mr(n);)n=n[Nn];return n}var Ry;function gA(n){Ry=n}function OF(){if(Ry!==void 0)return Ry;if(typeof document<"u")return document;throw new re(210,!1)}var _v=new B("",{providedIn:"root",factory:()=>FF}),FF="ng",wv=new B(""),gt=new B("",{providedIn:"platform",factory:()=>"unknown"});var Ev=new B("",{providedIn:"root",factory:()=>OF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var VF="h",LF="b";var jF=()=>null;function Iv(n,e,t=!1){return jF(n,e,t)}var mA=!1,UF=new B("",{providedIn:"root",factory:()=>mA});var Jd;function BF(){if(Jd===void 0&&(Jd=null,uy.trustedTypes))try{Jd=uy.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jd}function FC(n){return BF()?.createScriptURL(n)||n}var Ih=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${XC})`}};function ac(n){return n instanceof Ih?n.changingThisBreaksApplicationSecurity:n}function Dv(n,e){let t=$F(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${XC})`)}return t===e}function $F(n){return n instanceof Ih&&n.getTypeName()||null}var qF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yA(n){return n=String(n),n.match(qF)?n:"unsafe:"+n}var qh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qh||{});function Ws(n){let e=_A();return e?e.sanitize(qh.URL,n)||"":Dv(n,"URL")?ac(n):yA(Ph(n))}function HF(n){let e=_A();if(e)return FC(e.sanitize(qh.RESOURCE_URL,n)||"");if(Dv(n,"ResourceURL"))return FC(ac(n));throw new re(904,!1)}function GF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?HF:Ws}function vA(n,e,t){return GF(e,t)(n)}function _A(){let n=ke();return n&&n[Kn].sanitizer}function wA(n){return n instanceof Function?n():n}function zF(n){return(n??L(It)).get(gt)==="browser"}var Ar=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ar||{}),WF;function bv(n,e){return WF(n,e)}function Ss(n,e,t,r,i){if(r!=null){let o,s=!1;Mr(r)?o=r:oi(r)&&(s=!0,r=r[Rr]);let a=Yn(r);n===0&&t!==null?i==null?CA(e,t,a):Dh(e,t,a,i||null,!0):n===1&&t!==null?Dh(e,t,a,i||null,!0):n===2?uV(e,a,s):n===3&&e.destroyNode(a),o!=null&&lV(e,n,o,t,i)}}function KF(n,e){return n.createText(e)}function QF(n,e,t){n.setValue(e,t)}function EA(n,e,t){return n.createElement(e,t)}function YF(n,e){IA(n,e),e[Rr]=null,e[kn]=null}function ZF(n,e,t,r,i,o){r[Rr]=i,r[kn]=e,Hh(n,r,t,1,i,o)}function IA(n,e){e[Kn].changeDetectionScheduler?.notify(9),Hh(n,e,e[ot],2,null,null)}function JF(n){let e=n[tc];if(!e)return ny(n[ve],n);for(;e;){let t=null;if(oi(e))t=e[tc];else{let r=e[vn];r&&(t=r)}if(!t){for(;e&&!e[Nn]&&e!==n;)oi(e)&&ny(e[ve],e),e=e[Ht];e===null&&(e=n),oi(e)&&ny(e[ve],e),t=e&&e[Nn]}e=t}}function XF(n,e,t,r){let i=vn+r,o=t.length;r>0&&(t[i-1][Nn]=e),r<o-vn?(e[Nn]=t[i],cT(t,vn+r,e)):(t.push(e),e[Nn]=null),e[Ht]=t;let s=e[Vs];s!==null&&t!==s&&DA(s,e);let a=e[Ls];a!==null&&a.insertView(n),vy(e),e[se]|=128}function DA(n,e){let t=n[ph],r=e[Ht];if(oi(r))n[se]|=gh.HasTransplantedViews;else{let i=r[Ht][Qn];e[Qn]!==i&&(n[se]|=gh.HasTransplantedViews)}t===null?n[ph]=[e]:t.push(e)}function Cv(n,e){let t=n[ph],r=t.indexOf(e);t.splice(r,1)}function My(n,e){if(n.length<=vn)return;let t=vn+e,r=n[t];if(r){let i=r[Vs];i!==null&&i!==n&&Cv(i,r),e>0&&(n[t-1][Nn]=r[Nn]);let o=ch(n,vn+e);YF(r[ve],r);let s=o[Ls];s!==null&&s.detachView(o[ve]),r[Ht]=null,r[Nn]=null,r[se]&=-129}return r}function bA(n,e){if(!(e[se]&256)){let t=e[ot];t.destroyNode&&Hh(n,e,t,3,null,null),JF(e)}}function ny(n,e){if(e[se]&256)return;let t=De(null);try{e[se]&=-129,e[se]|=256,e[yn]&&Am(e[yn]),tV(n,e),eV(n,e),e[ve].type===1&&e[ot].destroy();let r=e[Vs];if(r!==null&&Mr(e[Ht])){r!==e[Ht]&&Cv(r,e);let i=e[Ls];i!==null&&i.detachView(n)}Sy(e)}finally{De(t)}}function eV(n,e){let t=n.cleanup,r=e[hh];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[hh]=null);let i=e[ii];if(i!==null){e[ii]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function tV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof yo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Gn(4,a,u);try{u.call(a)}finally{Gn(5,a,u)}}else{Gn(4,i,o);try{o.call(i)}finally{Gn(5,i,o)}}}}}function nV(n,e,t){return rV(n,e.parent,t)}function rV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Rr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Wn.None||o===Wn.Emulated)return null}return En(r,t)}}function Dh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function CA(n,e,t){n.appendChild(e,t)}function VC(n,e,t,r,i){r!==null?Dh(n,e,t,r,i):CA(n,e,t)}function TA(n,e){return n.parentNode(e)}function iV(n,e){return n.nextSibling(e)}function oV(n,e,t){return aV(n,e,t)}function sV(n,e,t){return n.type&40?En(n,t):null}var aV=sV,LC;function Tv(n,e,t,r){let i=nV(n,r,e),o=e[ot],s=r.parent||e[kn],a=oV(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)VC(o,i,t[u],a,!1);else VC(o,i,t,a,!1);LC!==void 0&&LC(o,r,e,t,i)}function Yu(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return xy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Yu(n,r);{let i=n[e.index];return Mr(i)?xy(-1,i):Yn(i)}}else{if(t&128)return Yu(n,e.next);if(t&32)return bv(e,n)()||Yn(n[e.index]);{let r=AA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=go(n[Qn]);return Yu(i,r)}else return Yu(n,e.next)}}}return null}function AA(n,e){if(e!==null){let r=n[Qn][kn],i=e.projection;return r.projection[i]}return null}function xy(n,e){let t=vn+n+1;if(t<e.length){let r=e[t],i=r[ve].firstChild;if(i!==null)return Yu(r,i)}return e[po]}function uV(n,e,t){n.removeChild(null,e,t)}function Av(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&vo(Yn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Av(n,e,t.child,r,i,o,!1),Ss(e,n,i,a,o);else if(u&32){let l=bv(t,r),d;for(;d=l();)Ss(e,n,i,d,o);Ss(e,n,i,a,o)}else u&16?cV(n,e,r,t,i,o):Ss(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hh(n,e,t,r,i,o){Av(t,r,n.firstChild,e,i,o,!1)}function cV(n,e,t,r,i,o){let s=t[Qn],u=s[kn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Ss(e,n,i,d,o)}else{let l=u,d=s[Ht];lA(r)&&(l.flags|=128),Av(n,e,l,d,i,o,!0)}}function lV(n,e,t,r,i){let o=t[po],s=Yn(t);o!==s&&Ss(e,n,r,o,i);for(let a=vn;a<t.length;a++){let u=t[a];Hh(u[ve],u,n,e,r,o)}}function dV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ar.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ar.Important),n.setStyle(t,r,i,o))}}function hV(n,e,t){n.setAttribute(e,"style",t)}function SA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&hy(n,e,r),i!==null&&SA(n,e,i),o!==null&&hV(n,e,o)}var Eo={};function me(n=1){MA(Jt(),ke(),zs()+n,!1)}function MA(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&rh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ih(e,o,0,t)}mo(t)}function J(n,e=pe.Default){let t=ke();if(t===null)return F(n,e);let r=Gt();return rA(r,t,Bt(n),e)}function xA(){let n="invalid";throw new Error(n)}function NA(n,e,t,r,i,o){let s=De(null);try{let a=null;i&si.SignalBased&&(a=e[r][Er]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&si.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):RT(e,a,r,o)}finally{De(s)}}function fV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mo(~i);else{let o=i,s=t[++r],a=t[++r];eF(s,o);let u=e[o];a(2,u)}}}finally{mo(-1)}}function Gh(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Rr]=i,f[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(f[se]|=2048),OT(f),f[Ht]=f[Gs]=n,f[Pn]=t,f[Kn]=s||n&&n[Kn],f[ot]=a||n&&n[ot],f[Fs]=u||n&&n[Fs]||null,f[kn]=o,f[Fh]=PF(),f[dh]=d,f[TT]=l,f[Qn]=e.type==2?n[Qn]:f,f}function zh(n,e,t,r,i){let o=n.data[e];if(o===null)o=pV(n,e,t,r,i),XO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=QO();o.injectorIndex=s===null?-1:s.injectorIndex}return sc(o,!0),o}function pV(n,e,t,r,i){let o=UT(),s=BT(),a=s?o:o&&o.parent,u=n.data[e]=_V(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function PA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kA(n,e,t,r,i){let o=zs(),s=r&2;try{mo(-1),s&&e.length>ui&&MA(n,e,ui,!1),Gn(s?2:0,i),t(r,i)}finally{mo(o),Gn(s?3:1,i)}}function OA(n,e,t){if(ST(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{De(r)}}}function FA(n,e,t){jT()&&(CV(n,e,t,En(t,e)),(t.flags&64)===64&&BA(n,e,t))}function VA(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function LA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Sv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Sv(n,e,t,r,i,o,s,a,u,l,d){let f=ui+r,g=f+i,y=gV(f,g),I=typeof l=="function"?l():l;return y[ve]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:d}}function gV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Eo);return t}function mV(n,e,t,r){let o=r.get(UF,mA)||t===Wn.ShadowDom,s=n.selectRootElement(e,o);return yV(s),s}function yV(n){vV(n)}var vV=()=>null;function _V(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zO()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=si.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?UC(r,t,l,a,u):UC(r,t,l,a)}return r}function UC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function wV(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,I=g?g.outputs:null;u=jC(0,f.inputs,d,u,y),l=jC(1,f.outputs,d,l,I);let C=u!==null&&s!==null&&!nv(e)?FV(u,d,s):null;a.push(C)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function EV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Rv(n,e,t,r,i,o,s,a){let u=En(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Mv(n,t,d,r,i),Vh(e)&&IV(t,e.index)):e.type&3?(r=EV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function IV(n,e){let t=di(e,n);t[se]&16||(t[se]|=64)}function jA(n,e,t,r){if(jT()){let i=r===null?null:{"":-1},o=AV(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&UA(n,e,t,s,i,a),i&&SV(t,r,i)}t.mergedAttrs=Xu(t.mergedAttrs,t.attrs)}function UA(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Iy(_h(t,e),n,r[l].type);MV(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=PA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Xu(t.mergedAttrs,d.hostAttrs),xV(n,t,e,u,d),RV(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}wV(n,t,o)}function DV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;bV(s)!=a&&s.push(a),s.push(t,r,o)}}function bV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CV(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Vh(t)&&NV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_h(t,e),vo(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=js(e,n,a,t);if(vo(l,e),s!==null&&OV(e,a-i,l,u,t,s),ci(u)){let d=di(t.index,e);d[Pn]=js(e,n,a,t)}}}function BA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=tF();try{mo(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];_y(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&TV(u,l)}}finally{mo(-1),_y(s)}}function TV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function AV(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(fO(e,s.selectors,!1))if(r||(r=[]),ci(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Ny(n,e,u)}else r.unshift(s),Ny(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ny(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SV(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}}function RV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ci(e)&&(t[""]=n)}}function MV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function xV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ns(i.type,!0)),s=new yo(o,ci(i),J);n.blueprint[r]=s,t[r]=s,DV(n,e,r,PA(n,t,i.hostVars,Eo),i)}function NV(n,e,t){let r=En(e,n),i=LA(t),o=n[Kn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Wh(n,Gh(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function PV(n,e,t,r,i,o){let s=En(n,e);kV(e[ot],s,o,n.value,t,r,i)}function kV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ph(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function OV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];NA(r,t,u,l,d,f)}}function FV(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function $A(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function qA(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];qT(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function Wh(n,e){return n[tc]?n[bC][Nn]=e:n[tc]=e,n[bC]=e,e}function Py(n,e,t){qT(0);let r=De(null);try{e(n,t)}finally{De(r)}}function VV(n){return n[hh]??=[]}function LV(n){return n.cleanup??=[]}function HA(n,e){let t=n[Fs],r=t?t.get(Tr,null):null;r&&r.handleError(e)}function Mv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];NA(d,l,r,a,u,i)}}function jV(n,e,t){let r=PT(e,n);QF(n[ot],r,t)}function UV(n,e){let t=di(e,n),r=t[ve];BV(r,t);let i=t[Rr];i!==null&&t[dh]===null&&(t[dh]=Iv(i,t[Fs])),xv(r,t,t[Pn])}function BV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xv(n,e,t){cv(e);try{let r=n.viewQuery;r!==null&&Py(1,r,t);let i=n.template;i!==null&&kA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ls]?.finishViewCreation(n),n.staticContentQueries&&qA(n,e),n.staticViewQueries&&Py(2,n.viewQuery,t);let o=n.components;o!==null&&$V(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,lv()}}function $V(n,e){for(let t=0;t<e.length;t++)UV(n,e[t])}function qV(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=Gh(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Vs]=l;let d=n[Ls];return d!==null&&(u[Ls]=d.createEmbeddedView(o)),xv(o,u,t),u}finally{De(i)}}function BC(n,e){return!e||e.firstChild===null||lA(n)}function HV(n,e,t,r=!0){let i=e[ve];if(XF(i,e,n,t),r){let s=xy(t,n),a=e[ot],u=TA(a,n[po]);u!==null&&ZF(i,n[kn],a,e,u,s)}let o=e[dh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function bh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Yn(o)),Mr(o)&&GV(o,r);let s=t.type;if(s&8)bh(n,e,t.child,r);else if(s&32){let a=bv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=AA(e,t);if(Array.isArray(a))r.push(...a);else{let u=go(e[Qn]);bh(u[ve],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function GV(n,e){for(let t=vn;t<n.length;t++){let r=n[t],i=r[ve].firstChild;i!==null&&bh(r[ve],r,i,e)}n[po]!==n[Rr]&&e.push(n[po])}var GA=[];function zV(n){return n[yn]??WV(n)}function WV(n){let e=GA.pop()??Object.create(QV);return e.lView=n,e}function KV(n){n.lView[yn]!==n&&(n.lView=null,GA.push(n))}var QV=ye($({},Hu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jh(n.lView)},consumerOnSignalRead(){this.lView[yn]=this}});function YV(n){let e=n[yn]??Object.create(ZV);return e.lView=n,e}var ZV=ye($({},Hu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=go(n.lView);for(;e&&!zA(e[ve]);)e=go(e);e&&FT(e)},consumerOnSignalRead(){this.lView[yn]=this}});function zA(n){return n.type!==2}var JV=100;function WA(n,e=!0,t=0){let r=n[Kn],i=r.rendererFactory,o=!1;o||i.begin?.();try{XV(n,t)}catch(s){throw e&&HA(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function XV(n,e){let t=$T();try{TC(!0),ky(n,e);let r=0;for(;Lh(n);){if(r===JV)throw new re(103,!1);r++,ky(n,1)}}finally{TC(t)}}function eL(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Kn].inlineEffectRunner?.flush(),cv(e);let a=!0,u=null,l=null;o||(zA(n)?(l=zV(e),u=Ed(l)):Pb()===null?(a=!1,l=YV(e),u=Ed(l)):e[yn]&&(Am(e[yn]),e[yn]=null));try{OT(e),ZO(n.bindingStartIndex),t!==null&&kA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&rh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&ih(e,y,0,null),Jm(e,0)}if(s||tL(e),KA(e,0),n.contentQueries!==null&&qA(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&rh(e,y)}else{let y=n.contentHooks;y!==null&&ih(e,y,1),Jm(e,1)}fV(n,e);let f=n.components;f!==null&&YA(e,f,0);let g=n.viewQuery;if(g!==null&&Py(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&rh(e,y)}else{let y=n.viewHooks;y!==null&&ih(e,y,2),Jm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Zm]){for(let y of e[Zm])y();e[Zm]=null}o||(e[se]&=-73)}catch(d){throw o||jh(e),d}finally{l!==null&&(Cm(l,u),a&&KV(l)),lv()}}function KA(n,e){for(let t=hA(n);t!==null;t=fA(t))for(let r=vn;r<t.length;r++){let i=t[r];QA(i,e)}}function tL(n){for(let e=hA(n);e!==null;e=fA(e)){if(!(e[se]&gh.HasTransplantedViews))continue;let t=e[ph];for(let r=0;r<t.length;r++){let i=t[r];FT(i)}}}function nL(n,e,t){let r=di(e,n);QA(r,t)}function QA(n,e){sv(n)&&ky(n,e)}function ky(n,e){let r=n[ve],i=n[se],o=n[yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Tm(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)eL(r,n,r.template,n[Pn]);else if(i&8192){KA(n,1);let a=r.components;a!==null&&YA(n,a,1)}}function YA(n,e,t){for(let r=0;r<e.length;r++)nL(n,e[r],t)}function Nv(n,e){let t=$T()?64:1088;for(n[Kn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=go(n);if(my(n)&&!r)return n;n=r}return null}var _o=class{get rootNodes(){let e=this._lView,t=e[ve];return bh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(e){this._lView[Pn]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ht];if(Mr(e)){let t=e[fh],r=t?t.indexOf(this):-1;r>-1&&(My(e,r),ch(t,r))}this._attachedToViewContainer=!1}bA(this._lView[ve],this._lView)}onDestroy(e){VT(this._lView,e)}markForCheck(){Nv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){vy(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,WA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=my(this._lView),t=this._lView[Vs];t!==null&&!e&&Cv(t,this._lView),IA(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=my(this._lView),r=this._lView[Vs];r!==null&&!t&&DA(r,this._lView),vy(this._lView)}},Kh=(()=>{class n{static{this.__NG_ELEMENT_ID__=oL}}return n})(),rL=Kh,iL=class extends rL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=qV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _o(i)}};function oL(){return sL(Gt(),ke())}function sL(n,e){return n.type&4?new iL(e,n,$h(n,e)):null}var s7=new RegExp(`^(\\d+)*(${LF}|${VF})*(.*)`);var aL=()=>null;function $C(n,e){return aL(n,e)}var Us=class{},Qh=new B("",{providedIn:"root",factory:()=>!1});var ZA=new B(""),JA=new B(""),Oy=class{},Ch=class{};function uL(n){let e=Error(`No component factory found for ${$t(n)}.`);return e[cL]=n,e}var cL="ngComponent";var Fy=class{resolveComponentFactory(e){throw uL(e)}},Bs=class{static{this.NULL=new Fy}},$s=class{},Nr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>lL()}}return n})();function lL(){let n=ke(),e=Gt(),t=di(e.index,n);return(oi(t)?t:n)[ot]}var dL=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function Vy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pC(i,a);else if(o==2){let u=a,l=e[++s];r=pC(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Th=class extends Bs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ai(e);return new qs(t,this.ngModule)}};function qC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:si.None;e?t.push({propName:s,templateName:r,isSignal:(a&si.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function hL(n){let e=n.toLowerCase();return e==="svg"?LO:e==="math"?jO:null}var qs=class extends Ch{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=qC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return qC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new wy(e,s):e,u=a.get($s,null);if(u===null)throw new re(407,!1);let l=a.get(dL,null),d=a.get(Us,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?mV(g,r,this.componentDef.encapsulation,a):EA(g,y,hL(y)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let D=null;I!==null&&(D=Iv(I,a,!0));let k=Sv(0,null,null,1,0,null,null,null,null,null,null),j=Gh(null,k,null,C,null,null,f,g,a,null,D);cv(j);let P,U,Z=null;try{let Q=this.componentDef,E,v=null;Q.findHostDirectiveDefs?(E=[],v=new Map,Q.findHostDirectiveDefs(Q,E,v),E.push(Q)):E=[Q];let _=fL(j,I);Z=pL(_,I,Q,E,j,f,g),U=kT(k,ui),I&&yL(g,Q,I,r),t!==void 0&&vL(U,this.ngContentSelectors,t),P=mL(Z,Q,E,v,j,[_L]),xv(k,j,null)}catch(Q){throw Z!==null&&Sy(Z),Sy(j),Q}finally{lv()}return new Ly(this.componentType,P,$h(U,j),j,U)}finally{De(o)}}},Ly=class extends Oy{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _o(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Mv(o[ve],o,i,e,t),this.previousInputValues.set(e,t);let s=di(this._tNode.index,o);Nv(s,1)}}get injector(){return new fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fL(n,e){let t=n[ve],r=ui;return n[r]=e,zh(t,r,2,"#host",null)}function pL(n,e,t,r,i,o,s){let a=i[ve];gL(r,n,e,s);let u=null;e!==null&&(u=Iv(e,i[Fs]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Gh(i,LA(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Ny(a,n,r.length-1),Wh(i,f),i[n.index]=f}function gL(n,e,t,r){for(let i of n)e.mergedAttrs=Xu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vy(e,e.mergedAttrs,!0),t!==null&&RA(r,t,e))}function mL(n,e,t,r,i,o){let s=Gt(),a=i[ve],u=En(s,i);UA(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=js(i,a,f,s);vo(g,i)}BA(a,i,s),u&&vo(u,i);let l=js(i,a,s.directiveStart+s.componentOffset,s);if(n[Pn]=i[Pn]=l,o!==null)for(let d of o)d(l,e);return OA(a,s,i),l}function yL(n,e,t,r){if(r)hy(n,t,["ng-version","18.2.8"]);else{let{attrs:i,classes:o}=vO(e.selectors[0]);i&&hy(n,t,i),o&&o.length>0&&SA(n,t,o.join(" "))}}function vL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function _L(){let n=Gt();fv(ke()[ve],n)}var Ks=(()=>{class n{static{this.__NG_ELEMENT_ID__=wL}}return n})();function wL(){let n=Gt();return IL(n,ke())}var EL=Ks,XA=class extends EL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new fo(this._hostTNode,this._hostLView)}get parentInjector(){let e=pv(this._hostTNode,this._hostLView);if(ZT(e)){let t=vh(e,this._hostLView),r=yh(e),i=t[ve].data[r+8];return new fo(i,t)}else return new fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=HC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$C(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,BC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!kO(e),a;if(s)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let u=s?e:new qs(ai(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?l:this.parentInjector).get(qt,null);C&&(o=C)}let d=ai(u.componentType??{}),f=$C(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,BC(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(UO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ht],l=new XA(u,u[kn],u[Ht]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return HV(s,i,o,r),e.attachToViewContainerRef(),cT(ry(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=HC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=My(this._lContainer,t);r&&(ch(ry(this._lContainer),t),bA(r[ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=My(this._lContainer,t);return r&&ch(ry(this._lContainer),t)!=null?new _o(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function HC(n){return n[fh]}function ry(n){return n[fh]||(n[fh]=[])}function IL(n,e){let t,r=e[n.index];return Mr(r)?t=r:(t=$A(r,e,null,n),e[n.index]=t,Wh(e,t)),bL(t,e,n,r),new XA(t,n,e)}function DL(n,e){let t=n[ot],r=t.createComment(""),i=En(e,n),o=TA(t,i);return Dh(t,o,r,iV(t,i),!1),r}var bL=AL,CL=()=>!1;function TL(n,e,t){return CL(n,e,t)}function AL(n,e,t,r){if(n[po])return;let i;t.type&8?i=Yn(r):i=DL(e,t),n[po]=i}var GC=new Set;function Io(n){GC.has(n)||(GC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function SL(n){return typeof n=="function"&&n[Er]!==void 0}function uc(n,e){Io("NgSignals");let t=Hb(n),r=t[Er];return e?.equal&&(r.equal=e.equal),t.set=i=>Sm(r,i),t.update=i=>Gb(r,i),t.asReadonly=RL.bind(t),t}function RL(){let n=this[Er];if(n.readonlyFn===void 0){let e=()=>this();e[Er]=n,n.readonlyFn=e}return n.readonlyFn}function eS(n){return SL(n)&&typeof n.set=="function"}function ML(n){return Object.getPrototypeOf(n.prototype).constructor}function In(n){let e=ML(n.type),t=!0,r=[n];for(;e;){let i;if(ci(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Xd(n.inputs),s.inputTransforms=Xd(n.inputTransforms),s.declaredInputs=Xd(n.declaredInputs),s.outputs=Xd(n.outputs);let a=i.hostBindings;a&&OL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&PL(n,u),l&&kL(n,l),xL(n,i),jk(n.outputs,i.outputs),ci(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===In&&(t=!1)}}e=Object.getPrototypeOf(e)}NL(r)}function xL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function NL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xu(i.hostAttrs,t=Xu(t,i.hostAttrs))}}function Xd(n){return n===Ps?{}:n===mn?[]:n}function PL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function kL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function OL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Pv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var li=class{},nc=class{};var jy=class extends li{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Th(this);let o=vT(e);this._bootstrapComponents=wA(o.bootstrap),this._r3Injector=sA(e,t,[{provide:li,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver},...r],$t(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Uy=class extends nc{constructor(e){super(),this.moduleType=e}create(e){return new jy(this.moduleType,e,[])}};var Ah=class extends li{constructor(e){super(),this.componentFactoryResolver=new Th(this),this.instance=null;let t=new ec([...e.providers,{provide:li,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver}],e.parent||iv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yh(n,e,t=null){return new Ah({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function tS(n){return VL(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VL(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cc(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function LL(n){return(n.flags&32)===32}function jL(n,e,t,r,i,o,s,a,u){let l=e.consts,d=zh(e,n,4,s||null,a||null);jA(e,t,d,mh(l,u)),fv(e,d);let f=d.tView=Sv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function UL(n,e,t,r,i,o,s,a,u,l){let d=t+ui,f=e.firstCreatePass?jL(d,e,n,r,i,o,s,a,u):e.data[d];sc(f,!1);let g=BL(e,n,f,t);dv()&&Tv(e,n,g,f),vo(g,n);let y=$A(g,n,g,f);return n[d]=y,Wh(n,y),TL(y,f,n),ov(f)&&FA(e,n,f),u!=null&&VA(n,f,l),f}function st(n,e,t,r,i,o,s,a){let u=ke(),l=Jt(),d=mh(l.consts,o);return UL(u,l,n,e,t,r,i,d,s,a),st}var BL=$L;function $L(n,e,t,r){return hv(!0),e[ot].createComment("")}var Rs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Rs||{}),nS=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),By=class n{constructor(){this.ngZone=L(ge),this.scheduler=L(Us),this.errorHandler=L(Tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Rs.EarlyRead,Rs.Write,Rs.MixedReadWrite,Rs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},$y=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function kv(n,e){!e?.injector&&PO(kv);let t=e?.injector??L(It);return zF(t)?(Io("NgAfterNextRender"),HL(n,t,e,!0)):GL}function qL(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function HL(n,e,t,r){let i=e.get(nS);i.impl??=e.get(By);let o=t?.phase??Rs.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(mv):null,a=new $y(i.impl,qL(n,o),r,s);return i.impl.register(a),a}var GL={destroy(){}};function Zh(n,e,t,r){let i=ke(),o=Uh();if(cc(i,o,e)){let s=Jt(),a=Bh();PV(a,i,n,e,t,r)}return Zh}function rS(n,e,t,r){return cc(n,Uh(),t)?e+Ph(t)+r:Eo}function eh(n,e){return n<<17|e<<2}function wo(n){return n>>17&32767}function zL(n){return(n&2)==2}function WL(n,e){return n&131071|e<<17}function qy(n){return n|2}function Hs(n){return(n&131068)>>2}function iy(n,e){return n&-131069|e<<2}function KL(n){return(n&1)===1}function Hy(n){return n|1}function QL(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=wo(s),u=Hs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||oc(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=wo(n[a+1]);n[r+1]=eh(g,a),g!==0&&(n[g+1]=iy(n[g+1],r)),n[a+1]=WL(n[a+1],r)}else n[r+1]=eh(a,0),a!==0&&(n[a+1]=iy(n[a+1],r)),a=r;else n[r+1]=eh(u,0),a===0?a=r:n[u+1]=iy(n[u+1],r),u=r;l&&(n[r+1]=qy(n[r+1])),zC(n,d,r,!0),zC(n,d,r,!1),YL(e,d,n,r,o),s=eh(a,u),o?e.classBindings=s:e.styleBindings=s}function YL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&oc(o,e)>=0&&(t[r+1]=Hy(t[r+1]))}function zC(n,e,t,r){let i=n[t+1],o=e===null,s=r?wo(i):Hs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ZL(u,e)&&(a=!0,n[s+1]=r?Hy(l):qy(l)),s=r?wo(l):Hs(l)}a&&(n[t+1]=r?qy(i):Hy(i))}function ZL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?oc(n,e)>=0:!1}function Ae(n,e,t){let r=ke(),i=Uh();if(cc(r,i,e)){let o=Jt(),s=Bh();Rv(o,s,r,n,e,r[ot],t,!1)}return Ae}function WC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Mv(n,t,o[s],s,r)}function Jh(n,e){return JL(n,e,null,!0),Jh}function JL(n,e,t,r){let i=ke(),o=Jt(),s=JO(2);if(o.firstUpdatePass&&e2(o,n,s,r),e!==Eo&&cc(i,s,e)){let a=o.data[zs()];o2(o,a,i,i[ot],n,i[s+1]=s2(e,t),r,s)}}function XL(n,e){return e>=n.expandoStartIndex}function e2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[zs()],s=XL(n,t);a2(o,r)&&e===null&&!s&&(e=!1),e=t2(i,o,e,r),QL(i,o,e,t,s,r)}}function t2(n,e,t,r){let i=nF(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=oy(null,n,e,t,r),t=rc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=oy(i,n,e,t,r),o===null){let u=n2(n,e,r);u!==void 0&&Array.isArray(u)&&(u=oy(null,n,e,u[1],r),u=rc(u,e.attrs,r),r2(n,e,r,u))}else o=i2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function n2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Hs(r)!==0)return n[wo(r)]}function r2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[wo(i)]=r}function i2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=rc(r,s,t)}return rc(r,e.attrs,t)}function oy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=rc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function rc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),oO(n,s,t?!0:e[++o]))}return n===void 0?null:n}function o2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=KL(l)?KC(u,e,t,i,Hs(l),s):void 0;if(!Sh(d)){Sh(o)||zL(l)&&(o=KC(u,null,t,i,a,s));let f=PT(zs(),t);dV(r,s,f,i,o)}}function KC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===Eo&&(g=f?mn:void 0);let y=f?Qm(g,r):d===r?g:void 0;if(l&&!Sh(y)&&(y=Qm(u,r)),Sh(y)&&(a=y,s))return a;let I=n[i+1];i=s?wo(I):Hs(I)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Qm(u,r))}return a}function Sh(n){return n!==void 0}function s2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$t(ac(n)))),n}function a2(n,e){return(n.flags&(e?8:16))!==0}function u2(n,e,t,r,i,o){let s=e.consts,a=mh(s,i),u=zh(e,n,2,r,a);return jA(e,t,u,mh(s,o)),u.attrs!==null&&Vy(u,u.attrs,!1),u.mergedAttrs!==null&&Vy(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function K(n,e,t,r){let i=ke(),o=Jt(),s=ui+n,a=i[ot],u=o.firstCreatePass?u2(s,o,i,e,t,r):o.data[s],l=c2(o,i,u,a,e,n);i[s]=l;let d=ov(u);return sc(u,!0),RA(a,l,u),!LL(u)&&dv()&&Tv(o,i,l,u),qO()===0&&vo(l,i),HO(),d&&(FA(o,i,u),OA(o,u,i)),r!==null&&VA(i,u),K}function H(){let n=Gt();BT()?YO():(n=n.parent,sc(n,!1));let e=n;WO(e)&&KO(),GO();let t=Jt();return t.firstCreatePass&&(fv(t,n),ST(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&cF(e)&&WC(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&lF(e)&&WC(t,e,ke(),e.stylesWithoutHost,!1),H}function Le(n,e,t,r){return K(n,e,t,r),H(),Le}var c2=(n,e,t,r,i,o)=>(hv(!0),EA(r,i,oF()));function Ov(){return ke()}var Rh="en-US";var l2=Rh;function d2(n){typeof n=="string"&&(l2=n.toLowerCase().replace(/_/g,"-"))}var h2=(n,e,t)=>{};function Be(n,e,t,r){let i=ke(),o=Jt(),s=Gt();return iS(o,i,i[ot],s,n,e,r),Be}function f2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[hh],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function iS(n,e,t,r,i,o,s){let a=ov(r),l=n.firstCreatePass&&LV(n),d=e[Pn],f=VV(e),g=!0;if(r.type&3||s){let C=En(r,e),D=s?s(C):C,k=f.length,j=s?U=>s(Yn(U[r.index])):r.index,P=null;if(!s&&a&&(P=f2(n,e,i,r.index)),P!==null){let U=P.__ngLastListenerFn__||P;U.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,g=!1}else{o=YC(r,e,d,o),h2(C,i,o);let U=t.listen(D,i,o);f.push(o,U),l&&l.push(i,j,k,k+1)}}else o=YC(r,e,d,o);let y=r.outputs,I;if(g&&y!==null&&(I=y[i])){let C=I.length;if(C)for(let D=0;D<C;D+=2){let k=I[D],j=I[D+1],Z=e[k][j].subscribe(o),Q=f.length;f.push(o,Z),l&&l.push(i,r.index,Q,-(Q+1))}}}function QC(n,e,t,r){let i=De(null);try{return Gn(6,e,t),t(r)!==!1}catch(o){return HA(n,o),!1}finally{Gn(7,e,t),De(i)}}function YC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?di(n.index,e):e;Nv(s,5);let a=QC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=QC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function lc(n=1){return iF(n)}function Fv(n,e,t){return oS(n,"",e,"",t),Fv}function oS(n,e,t,r,i){let o=ke(),s=rS(o,e,t,r);if(s!==Eo){let a=Jt(),u=Bh();Rv(a,u,o,n,s,o[ot],i,!1)}return oS}function te(n,e=""){let t=ke(),r=Jt(),i=n+ui,o=r.firstCreatePass?zh(r,i,1,e,null):r.data[i],s=p2(r,t,o,e,n);t[i]=s,dv()&&Tv(r,t,s,o),sc(o,!1)}var p2=(n,e,t,r,i)=>(hv(!0),KF(e[ot],r));function Qs(n){return Ys("",n,""),Qs}function Ys(n,e,t){let r=ke(),i=rS(r,n,e,t);return i!==Eo&&jV(r,zs(),i),Ys}function Vv(n,e,t){eS(e)&&(e=e());let r=ke(),i=Uh();if(cc(r,i,e)){let o=Jt(),s=Bh();Rv(o,s,r,n,e,r[ot],t,!1)}return Vv}function sS(n,e){let t=eS(n);return t&&n.set(e),t}function Lv(n,e){let t=ke(),r=Jt(),i=Gt();return iS(r,t,t[ot],i,n,e),Lv}function g2(n,e,t){let r=Jt();if(r.firstCreatePass){let i=ci(n);Gy(t,r.data,r.blueprint,i,!0),Gy(e,r.data,r.blueprint,i,!1)}}function Gy(n,e,t,r,i){if(n=Bt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Gy(n[o],e,t,r,i);else{let o=Jt(),s=ke(),a=Gt(),u=Os(n)?n:Bt(n.provide),l=bT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Os(n)||!n.multi){let y=new yo(l,i,J),I=ay(u,e,i?d:d+g,f);I===-1?(Iy(_h(a,s),o,u),sy(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=ay(u,e,d+g,f),I=ay(u,e,d,d+g),C=y>=0&&t[y],D=I>=0&&t[I];if(i&&!D||!i&&!C){Iy(_h(a,s),o,u);let k=v2(i?y2:m2,t.length,i,r,l);!i&&D&&(t[I].providerFactory=k),sy(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=aS(t[i?I:y],l,!i&&r);sy(o,n,y>-1?y:I,k)}!i&&r&&D&&t[I].componentProviders++}}}function sy(n,e,t,r){let i=Os(e),o=TO(e);if(i||o){let u=(o?Bt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function aS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ay(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function m2(n,e,t,r){return zy(this.multi,[])}function y2(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=js(t,t[ve],this.providerFactory.index,r);o=a.slice(0,s),zy(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],zy(i,o);return o}function zy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function v2(n,e,t,r,i){let o=new yo(n,t,J);return o.multi=[],o.index=e,o.componentProviders=0,aS(o,i,r&&!t),o}function pi(n,e=[]){return t=>{t.providersResolver=(r,i)=>g2(r,i?i(n):n,e)}}var _2=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ET(!1,t.type),i=r.length>0?Yh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(F(qt))})}}return n})();function Nt(n){Io("NgStandalone"),n.getStandaloneInjector=e=>e.get(_2).getOrCreateStandaloneInjector(n)}var Sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},jv=new Sr("18.2.8");var Xh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var uS=new B("");function Do(n){return!!n&&typeof n.then=="function"}function cS(n){return!!n&&typeof n.subscribe=="function"}var ef=new B(""),lS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=L(ef,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Do(o))t.push(o);else if(cS(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dc=new B("");function w2(){qb(()=>{throw new re(600,!1)})}function E2(n){return n.isBoundToModule}var I2=10;function D2(n,e,t){try{let r=t();return Do(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(MF),this.afterRenderManager=L(nS),this.zonelessEnabled=L(Qh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=L(fi).hasPendingTasks.pipe(ne(t=>!t)),this._injector=L(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ch;if(!this._injector.get(lS).done){let g=!i&&yT(t),y=!1;throw new re(405,y)}let s;i?s=t:s=this._injector.get(Bs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=E2(s)?void 0:this._injector.get(li),u=r||s.selector,l=s.create(It.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(uS,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),oh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new re(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get($s,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<I2;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)b2(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Lh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;oh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(dc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function b2(n,e,t,r){if(!t&&!Lh(n))return;WA(n,e,t&&!r?0:1)}var Wy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tf=(()=>{class n{compileModuleSync(t){return new Uy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=vT(t),o=wA(i.declarations).reduce((s,a)=>{let u=ai(a);return u&&s.push(new qs(u)),s},[]);return new Wy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var C2=(()=>{class n{constructor(){this.zone=L(ge),this.changeDetectionScheduler=L(Us),this.applicationRef=L(gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),T2=new B("",{factory:()=>!1});function dS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ge(ye($({},fS()),{scheduleInRootZone:t})),[{provide:ge,useFactory:n},{provide:ks,multi:!0,useFactory:()=>{let r=L(C2,{optional:!0});return()=>r.initialize()}},{provide:ks,multi:!0,useFactory:()=>{let r=L(A2);return()=>{r.initialize()}}},e===!0?{provide:ZA,useValue:!0}:[],{provide:JA,useValue:t??aA}]}function hS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=dS({ngZoneFactory:()=>{let i=fS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Io("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return _n([{provide:T2,useValue:!0},{provide:Qh,useValue:!1},r])}function fS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var A2=(()=>{class n{constructor(){this.subscription=new Ye,this.initialized=!1,this.zone=L(ge),this.pendingTasks=L(fi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var S2=(()=>{class n{constructor(){this.appRef=L(gi),this.taskService=L(fi),this.ngZone=L(ge),this.zonelessEnabled=L(Qh),this.disableScheduling=L(ZA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ye,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Eh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(JA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ay||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?NC:uA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Eh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,NC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R2(){return typeof $localize<"u"&&$localize.locale||Rh}var Uv=new B("",{providedIn:"root",factory:()=>L(Uv,pe.Optional|pe.SkipSelf)||R2()});var Ky=new B("");function th(n){return!n.moduleRef}function M2(n){let e=th(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ge);return t.run(()=>{th(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),th(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ky);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ky);s.add(o),n.moduleRef.onDestroy(()=>{oh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return D2(r,t,()=>{let o=e.get(lS);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Uv,Rh);if(d2(s||Rh),th(n)){let a=e.get(gi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return x2(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function x2(n,e){let t=n.injector.get(gi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}var sh=null;function N2(n=[],e){return It.create({name:e,providers:[{provide:Oh,useValue:"platform"},{provide:Ky,useValue:new Set([()=>sh=null])},...n]})}function P2(n=[]){if(sh)return sh;let e=N2(n);return sh=e,w2(),k2(e),e}function k2(n){n.get(wv,null)?.forEach(t=>t())}function Bv(){return!1}var mi=(()=>{class n{static{this.__NG_ELEMENT_ID__=O2}}return n})();function O2(n){return F2(Gt(),ke(),(n&16)===16)}function F2(n,e,t){if(Vh(n)&&!t){let r=di(n.index,e);return new _o(r,r)}else if(n.type&175){let r=e[Qn];return new _o(r,e)}return null}var Qy=class{constructor(){}supports(e){return tS(e)}create(e){return new Yy(e)}},V2=(n,e)=>e,Yy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||V2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<ZC(r,i,o)?t:r,a=ZC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;d<=I&&I<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!tS(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,FL(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Zy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Zy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Jy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ZC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function JC(){return new $v([new Qy])}var $v=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:JC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JC()),deps:[[n,new ev,new Dt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function pS(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=P2(r),o=[dS({}),{provide:Us,useExisting:S2},...t||[]],s=new Ah({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return M2({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function bo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function hc(n,e){Io("NgSignals");let t=Ub(n);return e?.equal&&(t[Er].equal=e.equal),t}function Pr(n){let e=De(null);try{return n()}finally{De(e)}}function gS(n){let e=ai(n);if(!e)return null;let t=new qs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var wS=null;function Or(){return wS}function ES(n){wS??=n}var nf=class{};var Pt=new B(""),Wv=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(U2),providedIn:"platform"})}}return n})(),IS=new B(""),U2=(()=>{class n extends Wv{constructor(){super(),this._doc=L(Pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Or().getBaseHref(this._doc)}onPopState(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Kv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function mS(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function kr(n){return n&&n[0]!=="?"?"?"+n:n}var Fr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(Qv),providedIn:"root"})}}return n})(),DS=new B(""),Qv=(()=>{class n extends Fr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Kv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Wv),F(DS,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bS=(()=>{class n extends Fr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Kv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Wv),F(DS,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Js=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=q2(mS(yS(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+kr(r))}normalize(t){return n.stripTrailingSlash($2(this._basePath,yS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=kr}static{this.joinWithSlash=Kv}static{this.stripTrailingSlash=mS}static{this.\u0275fac=function(r){return new(r||n)(F(Fr))}}static{this.\u0275prov=W({token:n,factory:()=>B2(),providedIn:"root"})}}return n})();function B2(){return new Js(F(Fr))}function $2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function yS(n){return n.replace(/\/index.html$/,"")}function q2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function rf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},CS=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new qv(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),vS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);vS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(Ks),J(Kh),J($v))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function vS(n,e){n.context.$implicit=e.item}var Xn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_S("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_S("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(Ks),J(Kh))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Hv=class{constructor(){this.$implicit=null,this.ngIf=null}};function _S(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${$t(e)}'.`)}var on=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=rn({type:n})}static{this.\u0275inj=nn({})}}return n})(),Yv="browser",H2="server";function G2(n){return n===Yv}function yi(n){return n===H2}var TS=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>G2(L(gt))?new Gv(L(Pt),window):new zv})}}return n})(),Gv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=z2(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function z2(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var zv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Zs=class{};var pc=class{},sf=class{},Vr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Jv=class{encodeKey(e){return AS(e)}encodeValue(e){return AS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Q2(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var Y2=/%(\d[a-f0-9])/gi,Z2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function AS(n){return encodeURIComponent(n).replace(Y2,(e,t)=>Z2[t]??e)}function of(n){return`${n}`}var _i=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Jv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Q2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(of):[of(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(of(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(of(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xv=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function J2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function SS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function RS(n){return typeof Blob<"u"&&n instanceof Blob}function MS(n){return typeof FormData<"u"&&n instanceof FormData}function X2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var fc=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(J2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Vr,this.context??=new Xv,!this.params)this.params=new _i,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||SS(this.body)||RS(this.body)||MS(this.body)||X2(this.body)?this.body:this.body instanceof _i?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||MS(this.body)?null:RS(this.body)?this.body.type||null:SS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof _i?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},wi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(wi||{}),gc=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},af=class n extends gc{constructor(e={}){super(e),this.type=wi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},mc=class n extends gc{constructor(e={}){super(e),this.type=wi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vi=class extends gc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},kS=200,ej=204;function Zv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var yc=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof fc)o=t;else{let u;i.headers instanceof Vr?u=i.headers:u=new Vr(i.headers);let l;i.params&&(i.params instanceof _i?l=i.params:l=new _i({fromObject:i.params})),o=new fc(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ee(o).pipe(br(u=>this.handler.handle(u)));if(t instanceof fc||i.observe==="events")return s;let a=s.pipe(pt(u=>u instanceof mc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new _i().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Zv(i,r))}post(t,r,i={}){return this.request("POST",t,Zv(i,r))}put(t,r,i={}){return this.request("PUT",t,Zv(i,r))}static{this.\u0275fac=function(r){return new(r||n)(F(pc))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),tj=/^\)\]\}',?\n/,nj="X-Request-URL";function xS(n){if(n.url)return n.url;let e=nj.toLocaleLowerCase();return n.headers.get(e)}var rj=(()=>{class n{constructor(){this.fetchImpl=L(e_,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=L(ge)}handle(t){return new ae(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(t_,o=>r.error(new vi({error:o}))),()=>i.abort()})}doRequest(t,r,i){return M(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,$({signal:r},o)));ij(y),i.next({type:wi.Sent}),s=yield y}catch(y){i.error(new vi({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new Vr(s.headers),u=s.statusText,l=xS(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&i.next(new af({headers:a,status:d,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),I=[],C=s.body.getReader(),D=0,k,j,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>M(this,null,function*(){for(;;){let{done:Z,value:Q}=yield C.read();if(Z)break;if(I.push(Q),D+=Q.length,t.reportProgress){j=t.responseType==="text"?(j??"")+(k??=new TextDecoder).decode(Q,{stream:!0}):void 0;let E=()=>i.next({type:wi.DownloadProgress,total:y?+y:void 0,loaded:D,partialText:j});P?P.run(E):E()}}}));let U=this.concatChunks(I,D);try{let Z=s.headers.get("Content-Type")??"";f=this.parseBody(t,U,Z)}catch(Z){i.error(new vi({error:Z,headers:new Vr(s.headers),status:s.status,statusText:s.statusText,url:xS(s)??t.urlWithParams}));return}}d===0&&(d=f?kS:0),d>=200&&d<300?(i.next(new mc({body:f,headers:a,status:d,statusText:u,url:l})),i.complete()):i.error(new vi({error:f,headers:a,status:d,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(tj,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),e_=class{};function t_(){}function ij(n){n.then(t_,t_)}function oj(n,e){return e(n)}function sj(n,e,t){return(r,i)=>wn(t,()=>e(r,o=>n(o,i)))}var OS=new B(""),aj=new B(""),uj=new B("",{providedIn:"root",factory:()=>!0});var NS=(()=>{class n extends pc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=L(fi),this.contributeToStability=L(uj)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(OS),...this.injector.get(aj,[])]));this.chain=r.reduceRight((i,o)=>sj(i,o,this.injector),oj)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(co(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(F(sf),F(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();var cj=/^\)\]\}',?\n/;function lj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var PS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new re(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?fe(r.\u0275loadImpl()):ee(null)).pipe(xe(()=>new ae(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,D)=>s.setRequestHeader(C,D.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let C=s.statusText||"OK",D=new Vr(s.getAllResponseHeaders()),k=lj(s)||t.url;return u=new af({headers:D,status:s.status,statusText:C,url:k}),u},d=()=>{let{headers:C,status:D,statusText:k,url:j}=l(),P=null;D!==ej&&(P=typeof s.response>"u"?s.responseText:s.response),D===0&&(D=P?kS:0);let U=D>=200&&D<300;if(t.responseType==="json"&&typeof P=="string"){let Z=P;P=P.replace(cj,"");try{P=P!==""?JSON.parse(P):null}catch(Q){P=Z,U&&(U=!1,P={error:Q,text:P})}}U?(o.next(new mc({body:P,headers:C,status:D,statusText:k,url:j||void 0})),o.complete()):o.error(new vi({error:P,headers:C,status:D,statusText:k,url:j||void 0}))},f=C=>{let{url:D}=l(),k=new vi({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(k)},g=!1,y=C=>{g||(o.next(l()),g=!0);let D={type:wi.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(D.total=C.total),t.responseType==="text"&&s.responseText&&(D.partialText=s.responseText),o.next(D)},I=C=>{let D={type:wi.UploadProgress,loaded:C.loaded};C.lengthComputable&&(D.total=C.total),o.next(D)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:wi.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(F(Zs))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),FS=new B(""),dj="XSRF-TOKEN",hj=new B("",{providedIn:"root",factory:()=>dj}),fj="X-XSRF-TOKEN",pj=new B("",{providedIn:"root",factory:()=>fj}),uf=class{},gj=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(F(Pt),F(gt),F(hj))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function mj(n,e){let t=n.url.toLowerCase();if(!L(FS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=L(uf).getToken(),i=L(pj);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function VS(...n){let e=[yc,PS,NS,{provide:pc,useExisting:NS},{provide:sf,useFactory:()=>L(rj,{optional:!0})??L(PS)},{provide:OS,useValue:mj,multi:!0},{provide:FS,useValue:!0},{provide:uf,useClass:gj}];for(let t of n)e.push(...t.\u0275providers);return _n(e)}var i_=class extends nf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},o_=class n extends i_{static makeCurrent(){ES(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yj();return t==null?null:vj(t)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rf(document.cookie,e)}},vc=null;function yj(){return vc=vc||document.querySelector("base"),vc?vc.getAttribute("href"):null}function vj(n){return new URL(n,document.baseURI).pathname}var _j=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),s_=new B(""),$S=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(s_),F(ge))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),cf=class{constructor(e){this._doc=e}},n_="ng-app-id",qS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${n_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(n_),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(n_,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(Pt),F(_v),F(Ev,8),F(gt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),r_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},u_=/%COMP%/g,HS="%COMP%",wj=`_nghost-${HS}`,Ej=`_ngcontent-${HS}`,Ij=!0,Dj=new B("",{providedIn:"root",factory:()=>Ij});function bj(n){return Ej.replace(u_,n)}function Cj(n){return wj.replace(u_,n)}function GS(n,e){return e.map(t=>t.replace(u_,n))}var jS=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=yi(a),this.defaultRenderer=new _c(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wn.ShadowDom&&(r=ye($({},r),{encapsulation:Wn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof lf?i.applyToHost(t):i instanceof wc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Wn.Emulated:o=new lf(u,l,r,this.appId,d,s,a,f);break;case Wn.ShadowDom:return new a_(u,l,t,r,s,a,this.nonce,f);default:o=new wc(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F($S),F(qS),F(_v),F(Dj),F(Pt),F(gt),F(ge),F(Ev))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),_c=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(r_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(US(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(US(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=r_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=r_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ar.DashCase|Ar.Important)?e.style.setProperty(t,r,i&Ar.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ar.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Or().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function US(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var a_=class extends _c{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=GS(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wc=class extends _c{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?GS(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},lf=class extends wc{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=bj(l),this.hostAttr=Cj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Tj=(()=>{class n extends cf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),BS=["alt","control","meta","shift"],Aj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Rj=(()=>{class n extends cf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Or().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),BS.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Aj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),BS.forEach(s=>{if(s!==i){let a=Sj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function zS(n,e){return pS($({rootComponent:n},Mj(e)))}function Mj(n){return{appProviders:[...Oj,...n?.providers??[]],platformProviders:kj}}function xj(){o_.makeCurrent()}function Nj(){return new Tr}function Pj(){return gA(document),document}var kj=[{provide:gt,useValue:Yv},{provide:wv,useValue:xj,multi:!0},{provide:Pt,useFactory:Pj,deps:[]}];var Oj=[{provide:Oh,useValue:"root"},{provide:Tr,useFactory:Nj,deps:[]},{provide:s_,useClass:Tj,multi:!0,deps:[Pt,ge,gt]},{provide:s_,useClass:Rj,multi:!0,deps:[Pt]},jS,qS,$S,{provide:$s,useExisting:jS},{provide:Zs,useClass:_j,deps:[]},[]];var WS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var he="primary",Oc=Symbol("RouteTitle"),f_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ia(n){return new f_(n)}function Vj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Lj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!er(n[t],e[t]))return!1;return!0}function er(n,e){let t=n?p_(n):void 0,r=e?p_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!iR(n[i],e[i]))return!1;return!0}function p_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function iR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function oR(n){return n.length>0?n[n.length-1]:null}function Di(n){return Um(n)?n:Do(n)?fe(Promise.resolve(n)):ee(n)}var jj={exact:aR,subset:uR},sR={exact:Uj,subset:Bj,ignored:()=>!0};function KS(n,e,t){return jj[t.paths](n.root,e.root,t.matrixParams)&&sR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Uj(n,e){return er(n,e)}function aR(n,e,t){if(!Ao(n.segments,e.segments)||!ff(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!aR(n.children[r],e.children[r],t))return!1;return!0}function Bj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iR(n[t],e[t]))}function uR(n,e,t){return cR(n,e,e.segments,t)}function cR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ao(i,t)||e.hasChildren()||!ff(i,t,r))}else if(n.segments.length===t.length){if(!Ao(n.segments,t)||!ff(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!uR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ao(n.segments,i)||!ff(n.segments,i,r)||!n.children[he]?!1:cR(n.children[he],e,o,r)}}function ff(n,e,t){return e.every((r,i)=>sR[t](n[i].parameters,r.parameters))}var jr=class{constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ia(this.queryParams),this._queryParamMap}toString(){return Hj.serialize(this)}},Se=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pf(this)}},To=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ia(this.parameters),this._parameterMap}toString(){return dR(this)}};function $j(n,e){return Ao(n,e)&&n.every((t,r)=>er(t.parameters,e[r].parameters))}function Ao(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function qj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var Fc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new oa,providedIn:"root"})}}return n})(),oa=class{parse(e){let t=new m_(e);return new jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ec(e.root,!0)}`,r=Wj(e.queryParams),i=typeof e.fragment=="string"?`#${Gj(e.fragment)}`:"";return`${t}${r}${i}`}},Hj=new oa;function pf(n){return n.segments.map(e=>dR(e)).join("/")}function Ec(n,e){if(!n.hasChildren())return pf(n);if(e){let t=n.children[he]?Ec(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Ec(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=qj(n,(r,i)=>i===he?[Ec(n.children[he],!1)]:[`${i}:${Ec(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${pf(n)}/${t[0]}`:`${pf(n)}/(${t.join("//")})`}}function lR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function df(n){return lR(n).replace(/%3B/gi,";")}function Gj(n){return encodeURI(n)}function g_(n){return lR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gf(n){return decodeURIComponent(n)}function QS(n){return gf(n.replace(/\+/g,"%20"))}function dR(n){return`${g_(n.path)}${zj(n.parameters)}`}function zj(n){return Object.entries(n).map(([e,t])=>`;${g_(e)}=${g_(t)}`).join("")}function Wj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${df(t)}=${df(i)}`).join("&"):`${df(t)}=${df(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Kj=/^[^\/()?;#]+/;function c_(n){let e=n.match(Kj);return e?e[0]:""}var Qj=/^[^\/()?;=#]+/;function Yj(n){let e=n.match(Qj);return e?e[0]:""}var Zj=/^[^=?&#]+/;function Jj(n){let e=n.match(Zj);return e?e[0]:""}var Xj=/^[^&#]+/;function eU(n){let e=n.match(Xj);return e?e[0]:""}var m_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Se(e,t)),r}parseSegment(){let e=c_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new To(gf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Yj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=c_(this.remaining);i&&(r=i,this.capture(r))}e[gf(t)]=gf(r)}parseQueryParam(e){let t=Jj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=eU(this.remaining);s&&(r=s,this.capture(r))}let i=QS(t),o=QS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=c_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[he]:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function hR(n){return n.segments.length>0?new Se([],{[he]:n}):n}function fR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=fR(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Se(n.segments,e);return tU(t)}function tU(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Se(n.segments.concat(e.segments),e.children)}return n}function So(n){return n instanceof jr}function nU(n,e,t=null,r=null){let i=pR(n);return gR(i,e,t,r)}function pR(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Se(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=hR(r);return e??i}function gR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return l_(i,i,i,t,r);let o=rU(e);if(o.toRoot())return l_(i,i,new Se([],{}),t,r);let s=iU(o,i,n),a=s.processChildren?bc(s.segmentGroup,s.index,o.commands):yR(s.segmentGroup,s.index,o.commands);return l_(i,s.segmentGroup,a,t,r)}function mf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ac(n){return typeof n=="object"&&n!=null&&n.outlets}function l_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=mR(n,e,t);let a=hR(fR(s));return new jr(a,o,i)}function mR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=mR(o,e,t)}),new Se(n.segments,r)}var yf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mf(r[0]))throw new re(4003,!1);let i=r.find(Ac);if(i&&i!==oR(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new yf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new yf(t,e,r)}var ta=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function iU(n,e,t){if(n.isAbsolute)return new ta(e,!0,0);if(!t)return new ta(e,!1,NaN);if(t.parent===null)return new ta(t,!0,0);let r=mf(n.commands[0])?0:1,i=t.segments.length-1+r;return oU(t,i,n.numberOfDoubleDots)}function oU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new ta(r,!1,i-o)}function sU(n){return Ac(n[0])?n[0].outlets:{[he]:n}}function yR(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return bc(n,e,t);let r=aU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Se(n.segments.slice(r.pathIndex),n.children),bc(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?y_(n,e,t):r.match?bc(n,0,i):y_(n,e,t)}function bc(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=sU(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=bc(n.children[he],e,t);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function aU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ac(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ZS(u,l,s))return o;r+=2}else{if(!ZS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function y_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ac(o)){let u=uU(o.outlets);return new Se(r,u)}if(i===0&&mf(t[0])){let u=n.segments[e];r.push(new To(u.path,YS(t[0]))),i++;continue}let s=Ac(o)?o.outlets[he]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&mf(a)?(r.push(new To(s,YS(a))),i+=2):(r.push(new To(s,{})),i++)}return new Se(r,{})}function uU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=y_(new Se([],{}),0,r))}),e}function YS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ZS(n,e,t){return n==t.path&&er(e,t.parameters)}var Cc="imperative",vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(vt||{}),Dn=class{constructor(e,t){this.id=e,this.url=t}},sa=class extends Dn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends Dn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},an=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(an||{}),vf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(vf||{}),Lr=class extends Dn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ei=class extends Dn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},Sc=class extends Dn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_f=class extends Dn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Dn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class extends Dn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},w_=class extends Dn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},E_=class extends Dn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},D_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},b_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=vt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Rc=class{},aa=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function cU(n,e){return n.providers&&!n._injector&&(n._injector=Yh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function On(n){return n.outlet||he}function lU(n,e){let t=n.filter(r=>On(r)===e);return t.push(...n.filter(r=>On(r)!==e)),t}function Vc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var S_=class{get injector(){return Vc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Lc(this.rootInjector),this.attachRef=null}},Lc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new S_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(qt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ef=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=R_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=R_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=M_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return M_(e,this._root).map(t=>t.value)}};function R_(n,e){if(n===e.value)return e;for(let t of e.children){let r=R_(n,t);if(r)return r}return null}function M_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=M_(n,t);if(r.length)return r.unshift(e),r}return[]}var sn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ea(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var If=class extends Ef{constructor(e,t){super(e),this.snapshot=t,j_(this,e)}toString(){return this.snapshot.toString()}};function vR(n){let e=dU(n),t=new Et([new To("",{})]),r=new Et({}),i=new Et({}),o=new Et({}),s=new Et(""),a=new Ii(t,r,o,s,i,he,n,e.root);return a.snapshot=e.root,new If(new sn(a,[]),e)}function dU(n){let e={},t={},r={},i="",o=new na([],e,r,i,t,he,n,null,{});return new bf("",new sn(o,[]))}var Ii=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[Oc]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>ia(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>ia(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Df(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&wR(i)&&(r.resolve[Oc]=i.title),r}var na=class{get title(){return this.data?.[Oc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ia(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ia(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bf=class extends Ef{constructor(e,t){super(t),this.url=e,j_(this,t)}toString(){return _R(this._root)}};function j_(n,e){e.value._routerState=n,e.children.forEach(t=>j_(n,t))}function _R(n){let e=n.children.length>0?` { ${n.children.map(_R).join(", ")} } `:"";return`${n.value}${e}`}function d_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,er(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),er(e.params,t.params)||n.paramsSubject.next(t.params),Lj(e.url,t.url)||n.urlSubject.next(t.url),er(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function x_(n,e){let t=er(n.params,e.params)&&$j(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||x_(n.parent,e.parent))}function wR(n){return typeof n.title=="string"||n.title===null}var U_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=L(Lc),this.location=L(Ks),this.changeDetector=L(mi),this.inputBinder=L(Sf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new N_(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xr]})}}return n})(),N_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ii?this.route:e===Lc?this.childContexts:this.parent.get(e,t)}},Sf=new B(""),JS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ku([r.queryParams,r.params,r.data]).pipe(xe(([o,s,a],u)=>(a=$($($({},o),s),a),u===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=gS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function hU(n,e,t){let r=Mc(n,e._root,t?t._root:void 0);return new If(r,e)}function Mc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fU(n,e,t);return new sn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mc(n,a)),s}}let r=pU(e.value),i=e.children.map(o=>Mc(n,o));return new sn(r,i)}}function fU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mc(n,r,i);return Mc(n,r)})}function pU(n){return new Ii(new Et(n.url),new Et(n.params),new Et(n.queryParams),new Et(n.fragment),new Et(n.data),n.outlet,n.component,n)}var xc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ER="ngNavigationCancelingError";function Cf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=So(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IR(!1,an.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function IR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ER]=!0,t.cancellationCode=e,t}function gU(n){return DR(n)&&So(n.url)}function DR(n){return!!n&&n[ER]}var mU=(n,e,t,r)=>ne(i=>(new P_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),P_=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),d_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ea(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ea(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ea(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new A_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new C_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(d_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),d_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Tf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ra=class{constructor(e,t){this.component=e,this.route=t}};function yU(n,e,t){let r=n._root,i=e?e._root:null;return Ic(r,i,t,[r.value])}function vU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ca(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nT(n)?n:e.get(n):r}function Ic(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ea(e);return n.children.forEach(s=>{_U(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Tc(a,t.getContext(s),i)),i}function _U(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=wU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Tf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ic(n,e,a?a.children:null,r,i):Ic(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ra(a.outlet.component,s))}else s&&Tc(e,a,i),i.canActivateChecks.push(new Tf(r)),o.component?Ic(n,null,a?a.children:null,r,i):Ic(n,null,t,r,i);return i}function wU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ao(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ao(n.url,e.url)||!er(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!x_(n,e)||!er(n.queryParams,e.queryParams);case"paramsChange":default:return!x_(n,e)}}function Tc(n,e,t){let r=ea(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Tc(s,e.children.getContext(o),t):Tc(s,null,t):Tc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ra(e.outlet.component,i)):t.canDeactivateChecks.push(new ra(null,i)):t.canDeactivateChecks.push(new ra(null,i))}function jc(n){return typeof n=="function"}function EU(n){return typeof n=="boolean"}function IU(n){return n&&jc(n.canLoad)}function DU(n){return n&&jc(n.canActivate)}function bU(n){return n&&jc(n.canActivateChild)}function CU(n){return n&&jc(n.canDeactivate)}function TU(n){return n&&jc(n.canMatch)}function bR(n){return n instanceof Dr||n?.name==="EmptyError"}var hf=Symbol("INITIAL_VALUE");function ua(){return xe(n=>Ku(n.map(e=>e.pipe(Cr(1),ho(hf)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===hf)return hf;if(t===!1||AU(t))return t}return!0}),pt(e=>e!==hf),Cr(1)))}function AU(n){return So(n)||n instanceof xc}function SU(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(ye($({},t),{guardsResult:!0})):RU(s,r,i,n).pipe(it(a=>a&&EU(a)?MU(r,o,n,e):ee(a)),ne(a=>ye($({},t),{guardsResult:a})))})}function RU(n,e,t,r){return fe(n).pipe(it(i=>OU(i.component,i.route,t,e,r)),pn(i=>i!==!0,!0))}function MU(n,e,t,r){return fe(e).pipe(br(i=>bs(NU(i.route.parent,r),xU(i.route,r),kU(n,i.path,t),PU(n,i.route,t))),pn(i=>i!==!0,!0))}function xU(n,e){return n!==null&&e&&e(new T_(n)),ee(!0)}function NU(n,e){return n!==null&&e&&e(new b_(n)),ee(!0)}function PU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>Wd(()=>{let s=Vc(e)??t,a=ca(o,s),u=DU(a)?a.canActivate(e,n):wn(s,()=>a(e,n));return Di(u).pipe(pn())}));return ee(i).pipe(ua())}function kU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>vU(s)).filter(s=>s!==null).map(s=>Wd(()=>{let a=s.guards.map(u=>{let l=Vc(s.node)??t,d=ca(u,l),f=bU(d)?d.canActivateChild(r,n):wn(l,()=>d(r,n));return Di(f).pipe(pn())});return ee(a).pipe(ua())}));return ee(o).pipe(ua())}function OU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=Vc(e)??i,l=ca(a,u),d=CU(l)?l.canDeactivate(n,e,t,r):wn(u,()=>l(n,e,t,r));return Di(d).pipe(pn())});return ee(s).pipe(ua())}function FU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=ca(s,n),u=IU(a)?a.canLoad(e,t):wn(n,()=>a(e,t));return Di(u)});return ee(o).pipe(ua(),CR(r))}function CR(n){return km(Je(e=>{if(typeof e!="boolean")throw Cf(n,e)}),ne(e=>e===!0))}function VU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=ca(s,n),u=TU(a)?a.canMatch(e,t):wn(n,()=>a(e,t));return Di(u)});return ee(o).pipe(ua(),CR(r))}var Nc=class{constructor(e){this.segmentGroup=e||null}},Pc=class extends Error{constructor(e){super(),this.urlTree=e}};function Xs(n){return Ds(new Nc(n))}function LU(n){return Ds(new re(4e3,!1))}function jU(n){return Ds(IR(!1,an.GuardRejected))}var k_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[he])return LU(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:I,title:C}=i,D=wn(o,()=>a({params:y,data:I,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:C}));if(D instanceof jr)throw new Pc(D);t=D}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Pc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new jr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Se(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},O_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UU(n,e,t,r,i){let o=TR(n,e,t);return o.matched?(r=cU(e,r),VU(r,e,t,i).pipe(ne(s=>s===!0?o:$({},O_)))):ee(o)}function TR(n,e,t){if(e.path==="**")return BU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},O_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Vj)(t,n,e);if(!i)return $({},O_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BU(n){return{matched:!0,parameters:n.length>0?oR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XS(n,e,t,r){return t.length>0&&HU(n,t,r)?{segmentGroup:new Se(e,qU(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&GU(n,t,r)?{segmentGroup:new Se(n.segments,$U(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function $U(n,e,t,r){let i={};for(let o of t)if(Rf(n,e,o)&&!r[On(o)]){let s=new Se([],{});i[On(o)]=s}return $($({},r),i)}function qU(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&On(r)!==he){let i=new Se([],{});t[On(r)]=i}return t}function HU(n,e,t){return t.some(r=>Rf(n,e,r)&&On(r)!==he)}function GU(n,e,t){return t.some(r=>Rf(n,e,r))}function Rf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function zU(n,e,t){return e.length===0&&!n.children[t]}var F_=class{};function WU(n,e,t,r,i,o,s="emptyOnly"){return new V_(n,e,t,r,i,s,o).recognize()}var KU=31,V_=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new k_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=XS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new sn(r,t),o=new bf("",i),s=nU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new na([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(ne(r=>({children:r,rootSnapshot:t})),ti(r=>{if(r instanceof Pc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof sn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return fe(o).pipe(br(s=>{let a=r.children[s],u=lU(t,s);return this.processSegmentGroup(e,u,a,s,i)}),lo((s,a)=>(s.push(...a),s)),ni(null),zm(),it(s=>{if(s===null)return Xs(r);let a=AR(s);return QU(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return fe(t).pipe(br(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(ti(l=>{if(l instanceof Nc)return ee(null);throw l}))),pn(u=>!!u),ti(u=>{if(bR(u))return zU(r,i,o)?ee(new F_):Xs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return On(r)!==s&&(s===he||!Rf(i,o,r))?Xs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Xs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=TR(t,i,o);if(!u)return Xs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KU&&(this.allowRedirects=!1));let y=new na(o,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,eR(i),On(i),i.component??i._loadedComponent??null,i,tR(i)),I=Df(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(I.params),y.data=Object.freeze(I.data);let C=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,C).pipe(it(D=>this.processSegment(e,r,t,D.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=UU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(xe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xe(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,I=new na(g,f,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,eR(r),On(r),r.component??r._loadedComponent??null,r,tR(r)),C=Df(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(C.params),I.data=Object.freeze(C.data);let{segmentGroup:D,slicedSegments:k}=XS(t,g,y,l);if(k.length===0&&D.hasChildren())return this.processChildren(d,l,D,I).pipe(ne(P=>new sn(I,P)));if(l.length===0&&k.length===0)return ee(new sn(I,[]));let j=On(r)===o;return this.processSegment(d,l,D,k,j?he:o,!0,I).pipe(ne(P=>new sn(I,P instanceof sn?[P]:[])))}))):Xs(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):FU(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):jU(t))):ee({routes:[],injector:e})}};function QU(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function YU(n){let e=n.value.routeConfig;return e&&e.path===""}function AR(n){let e=[],t=new Set;for(let r of n){if(!YU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AR(r.children);e.push(new sn(r.value,i))}return e.filter(r=>!t.has(r))}function eR(n){return n.data||{}}function tR(n){return n.resolve||{}}function ZU(n,e,t,r,i,o){return it(s=>WU(n,e,t,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:u})=>ye($({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function JU(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of SR(u))s.add(l);let a=0;return fe(s).pipe(br(u=>o.has(u)?XU(u,r,n,e):(u.data=Df(u,u.parent,n).resolve,ee(void 0))),Je(()=>a++),Cs(1),it(u=>a===s.size?ee(t):Ut))})}function SR(n){let e=n.children.map(t=>SR(t)).flat();return[n,...e]}function XU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!wR(i)&&(o[Oc]=i.title),eB(o,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=Df(n,n.parent,t).resolve,null)))}function eB(n,e,t,r){let i=p_(n);if(i.length===0)return ee({});let o={};return fe(i).pipe(it(s=>tB(n[s],e,t,r).pipe(pn(),Je(a=>{if(a instanceof xc)throw Cf(new oa,a);o[s]=a}))),Cs(1),Hm(o),ti(s=>bR(s)?Ut:Ds(s)))}function tB(n,e,t,r){let i=Vc(e)??r,o=ca(n,i),s=o.resolve?o.resolve(e,t):wn(i,()=>o(e,t));return Di(s)}function h_(n){return xe(e=>{let t=n(e);return t?fe(t).pipe(ne(()=>e)):ee(e)})}var RR=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Oc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(nB),providedIn:"root"})}}return n})(),nB=(()=>{class n extends RR{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(WS))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uc=new B("",{providedIn:"root",factory:()=>({})}),rB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Nt],decls:1,vars:0,template:function(r,i){r&1&&Le(0,"router-outlet")},dependencies:[U_],encapsulation:2})}}return n})();function B_(n){let e=n.children&&n.children.map(B_),t=e?ye($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=rB),t}var kc=new B(""),$_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(tf)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Di(t.loadComponent()).pipe(ne(MR),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),co(()=>{this.componentLoaders.delete(t)})),i=new _s(r,()=>new Ue).pipe(vs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=iB(r,this.compiler,t,this.onLoadEndListener).pipe(co(()=>{this.childrenLoaders.delete(r)})),s=new _s(o,()=>new Ue).pipe(vs());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iB(n,e,t,r){return Di(n.loadChildren()).pipe(ne(MR),it(i=>i instanceof nc||Array.isArray(i)?ee(i):fe(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(kc,[],{optional:!0,self:!0}).flat()),{routes:s.map(B_),injector:o}}))}function oB(n){return n&&typeof n=="object"&&"default"in n}function MR(n){return oB(n)?n.default:n}var q_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(sB),providedIn:"root"})}}return n})(),sB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xR=new B(""),NR=new B("");function aB(n,e,t){let r=n.get(NR),i=n.get(Pt);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),uB(n))),{onViewTransitionCreated:u}=r;return u&&wn(n,()=>u({transition:a,from:e,to:t})),s})}function uB(n){return new Promise(e=>{kv({read:()=>setTimeout(e)},{injector:n})})}var cB=new B(""),H_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=L($_),this.environmentInjector=L(qt),this.urlSerializer=L(Fc),this.rootContexts=L(Lc),this.location=L(Js),this.inputBindingEnabled=L(Sf,{optional:!0})!==null,this.titleStrategy=L(RR),this.options=L(Uc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(q_),this.createViewTransition=L(xR,{optional:!0}),this.navigationErrorHandler=L(cB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new I_(i)),r=i=>this.events.next(new D_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ye($($({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),ne(o=>ye($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xe(o=>{let s=!1,a=!1;return ee(o).pipe(xe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",an.SupersededByNewNavigation),Ut;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ye($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Ei(u.id,this.urlSerializer.serialize(u.rawUrl),f,vf.IgnoredSameUrlNavigation)),u.resolve(!1),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ee(u).pipe(xe(f=>{let g=this.transitions?.getValue();return this.events.next(new sa(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Ut:Promise.resolve(f)}),ZU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ye($({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new _f(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:I,extras:C}=u,D=new sa(f,this.urlSerializer.serialize(g),y,I);this.events.next(D);let k=vR(this.rootComponentType).snapshot;return this.currentTransition=o=ye($({},u),{targetSnapshot:k,urlAfterRedirects:g,extras:ye($({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ee(o)}else{let f="";return this.events.next(new Ei(u.id,this.urlSerializer.serialize(u.extractedUrl),f,vf.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Ut}}),Je(u=>{let l=new v_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=o=ye($({},u),{guards:yU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),SU(this.environmentInjector,u=>this.events.next(u)),Je(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Cf(this.urlSerializer,u.guardsResult);let l=new __(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),pt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",an.GuardRejected),!1)),h_(u=>{if(u.guards.canActivateChecks.length)return ee(u).pipe(Je(l=>{let d=new w_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),xe(l=>{let d=!1;return ee(l).pipe(JU(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",an.NoDataFromResolver)}}))}),Je(l=>{let d=new E_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),h_(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Je(g=>{d.component=g}),ne(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Ku(l(u.targetSnapshot.root)).pipe(ni(null),Cr(1))}),h_(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?fe(d).pipe(ne(()=>o)):ee(o)}),ne(u=>{let l=hU(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ye($({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Je(()=>{this.events.next(new Rc)}),mU(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Cr(1),Je({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Km(this.transitionAbortSubject.pipe(Je(u=>{throw u}))),co(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",an.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ti(u=>{if(a=!0,DR(u))this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),gU(u)?this.events.next(new aa(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Sc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=wn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof xc){let{message:f,cancellationCode:g}=Cf(this.urlSerializer,d);this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new aa(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Ut}))}))}cancelNavigationTransition(t,r,i){let o=new Lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lB(n){return n!==Cc}var dB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(hB),providedIn:"root"})}}return n})(),L_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},hB=(()=>{class n extends L_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(fB),providedIn:"root"})}}return n})(),fB=(()=>{class n extends PR{constructor(){super(...arguments),this.location=L(Js),this.urlSerializer=L(Fc),this.options=L(Uc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(q_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof sa)this.stateMemento=this.createStateMemento();else if(t instanceof Ei)this.rawUrlTree=r.initialUrl;else if(t instanceof _f){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Rc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Lr&&(t.code===an.GuardRejected||t.code===an.NoDataFromResolver)?this.restoreHistory(r):t instanceof Sc?this.restoreHistory(r,!0):t instanceof tr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof jr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=$($({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=$($({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dc||{});function kR(n,e){n.events.pipe(pt(t=>t instanceof tr||t instanceof Lr||t instanceof Sc||t instanceof Ei),ne(t=>t instanceof tr||t instanceof Ei?Dc.COMPLETE:(t instanceof Lr?t.code===an.Redirect||t.code===an.SupersededByNewNavigation:!1)?Dc.REDIRECTING:Dc.FAILED),pt(t=>t!==Dc.REDIRECTING),Cr(1)).subscribe(()=>{e()})}function pB(n){throw n}var gB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},un=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(Xh),this.stateManager=L(PR),this.options=L(Uc,{optional:!0})||{},this.pendingTasks=L(fi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(H_),this.urlSerializer=L(Fc),this.location=L(Js),this.urlHandlingStrategy=L(q_),this._events=new Ue,this.errorHandler=this.options.errorHandler||pB,this.navigated=!1,this.routeReuseStrategy=L(dB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(kc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Sf,{optional:!0}),this.eventsSubscription=new Ye,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Lr&&r.code!==an.Redirect&&r.code!==an.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof aa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lB(i.source)},s);this.scheduleNavigation(a,Cc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=$({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(B_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=pR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return gR(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=So(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cc,null,r)}navigate(t,r={skipLocationChange:!1}){return yB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},gB):r===!1?i=$({},mB):i=r,So(t))return KS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return KS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return kR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function vB(n){return!(n instanceof Rc)&&!(n instanceof aa)}var la=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof tr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(So(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:So(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(J(un),J(Ii),gv("tabindex"),J(Nr),J(Jn),J(Fr))}}static{this.\u0275dir=Xe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Be("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Zh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bo],replaceUrl:[2,"replaceUrl","replaceUrl",bo],routerLink:"routerLink"},standalone:!0,features:[Pv,xr]})}}return n})();var Af=class{};var _B=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pt(t=>t instanceof tr),br(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Yh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return fe(i).pipe(ei())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(it(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return fe([o,s]).pipe(ei())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(un),F(tf),F(qt),F(Af),F($_))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OR=new B(""),wB=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ei&&t.code===vf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wf&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wf(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){xA()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function FR(n,...e){return _n([{provide:kc,multi:!0,useValue:n},[],{provide:Ii,useFactory:VR,deps:[un]},{provide:dc,multi:!0,useFactory:LR},e.map(t=>t.\u0275providers)])}function VR(n){return n.routerState.root}function Bc(n,e){return{\u0275kind:n,\u0275providers:e}}function LR(){let n=L(It);return e=>{let t=n.get(gi);if(e!==t.components[0])return;let r=n.get(un),i=n.get(jR);n.get(G_)===1&&r.initialNavigation(),n.get(UR,null,pe.Optional)?.setUpPreloading(),n.get(OR,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jR=new B("",{factory:()=>new Ue}),G_=new B("",{providedIn:"root",factory:()=>1});function EB(){return Bc(2,[{provide:G_,useValue:0},{provide:ef,multi:!0,deps:[It],useFactory:e=>{let t=e.get(IS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(un),o=e.get(jR);kR(i,()=>{r(!0)}),e.get(H_).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function IB(){return Bc(3,[{provide:ef,multi:!0,useFactory:()=>{let e=L(un);return()=>{e.setUpLocationChangeListener()}}},{provide:G_,useValue:2}])}var UR=new B("");function DB(n){return Bc(0,[{provide:UR,useExisting:_B},{provide:Af,useExisting:n}])}function bB(){return Bc(8,[JS,{provide:Sf,useExisting:JS}])}function CB(n){let e=[{provide:xR,useValue:aB},{provide:NR,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return Bc(9,e)}var nR=new B("ROUTER_FORROOT_GUARD"),TB=[Js,{provide:Fc,useClass:oa},un,Lc,{provide:Ii,useFactory:VR,deps:[un]},$_,[]],nr=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[TB,[],{provide:kc,multi:!0,useValue:t},{provide:nR,useFactory:MB,deps:[[un,new Dt,new ev]]},{provide:Uc,useValue:r||{}},r?.useHash?SB():RB(),AB(),r?.preloadingStrategy?DB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?xB(r):[],r?.bindToComponentInputs?bB().\u0275providers:[],r?.enableViewTransitions?CB().\u0275providers:[],NB()]}}static forChild(t){return{ngModule:n,providers:[{provide:kc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(nR,8))}}static{this.\u0275mod=rn({type:n})}static{this.\u0275inj=nn({})}}return n})();function AB(){return{provide:OR,useFactory:()=>{let n=L(TS),e=L(ge),t=L(Uc),r=L(H_),i=L(Fc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wB(i,r,n,e,t)}}}function SB(){return{provide:Fr,useClass:bS}}function RB(){return{provide:Fr,useClass:Qv}}function MB(n){return"guarded"}function xB(n){return[n.initialNavigation==="disabled"?IB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?EB().\u0275providers:[]]}var rR=new B("");function NB(){return[{provide:rR,useFactory:LR},{provide:dc,multi:!0,useExisting:rR}]}var Mf=class n{constructor(e){this.http=e}git="https://api.github.com/users/michellecharotti";obtenerInfoGit(){return this.http.get(this.git)}static \u0275fac=function(t){return new(t||n)(F(yc))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var xf=class n{constructor(e){this.git=e}data;ngOnInit(){this.git.obtenerInfoGit().subscribe(e=>{this.data=JSON.parse(JSON.stringify(e))})}static \u0275fac=function(t){return new(t||n)(J(Mf))};static \u0275cmp=xt({type:n,selectors:[["app-bienvenida"]],standalone:!0,features:[Nt],decls:17,vars:5,consts:[[1,"about-me"],[1,"doble"],["alt","",1,"img",3,"src"],[1,"col"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1),Le(2,"img",2),K(3,"div",3),Le(4,"br")(5,"br"),K(6,"h3"),te(7),H(),K(8,"h3"),te(9,"Materia: Lab 4"),H(),Le(10,"br"),K(11,"p"),te(12),H(),K(13,"p"),te(14),H(),K(15,"p"),te(16),H()()()()),t&2&&(me(2),Fv("src",r.data.avatar_url,Ws),me(5),Qs(r.data.name),me(5),Ys("Seguidores: ",r.data.followers,""),me(2),Ys("Siguiendo: ",r.data.following,""),me(2),Ys("Repositorios: ",r.data.public_repos,""))},dependencies:[on],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v21/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/poppins/v21/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:stretch}.about-me[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center;background-color:#f8f8f8;padding:20px;border-radius:5px;box-shadow:0 0 10px #0003;margin-bottom:20px}.about-me[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#005b4f;font-size:36px;font-weight:700;margin-bottom:10px}.about-me[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#005b4f;font-size:24px;margin-bottom:20px}.about-me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50vh;height:auto;margin:0 40px 20px;padding:5px;border-radius:50px;border:2px solid #ccc;width:100%;max-width:300px}.about-me[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#005b4f;font-size:18px;margin-bottom:20px}.doble[_ngcontent-%COMP%]{display:flex}']})};var ZR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(J(Nr),J(Jn))}}static{this.\u0275dir=Xe({type:n})}}return n})(),Uf=(()=>{class n extends ZR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,features:[In]})}}return n})(),ga=new B("");var kB={provide:ga,useExisting:Zn(()=>Ti),multi:!0};function OB(){let n=Or()?Or().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FB=new B(""),Ti=(()=>{class n extends ZR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!OB())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(J(Nr),J(Jn),J(FB,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[pi([kB]),In]})}}return n})();function bi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function JR(n){return n!=null&&typeof n.length=="number"}var J_=new B(""),X_=new B(""),VB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ge=class{static min(e){return LB(e)}static max(e){return jB(e)}static required(e){return UB(e)}static requiredTrue(e){return BB(e)}static email(e){return $B(e)}static minLength(e){return qB(e)}static maxLength(e){return HB(e)}static pattern(e){return GB(e)}static nullValidator(e){return XR(e)}static compose(e){return oM(e)}static composeAsync(e){return aM(e)}};function LB(n){return e=>{if(bi(e.value)||bi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function jB(n){return e=>{if(bi(e.value)||bi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function UB(n){return bi(n.value)?{required:!0}:null}function BB(n){return n.value===!0?null:{required:!0}}function $B(n){return bi(n.value)||VB.test(n.value)?null:{email:!0}}function qB(n){return e=>bi(e.value)||!JR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function HB(n){return e=>JR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function GB(n){if(!n)return XR;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(bi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function XR(n){return null}function eM(n){return n!=null}function tM(n){return Do(n)?fe(n):n}function nM(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function rM(n,e){return e.map(t=>t(n))}function zB(n){return!n.validate}function iM(n){return n.map(e=>zB(e)?e:t=>e.validate(t))}function oM(n){if(!n)return null;let e=n.filter(eM);return e.length==0?null:function(t){return nM(rM(t,e))}}function sM(n){return n!=null?oM(iM(n)):null}function aM(n){if(!n)return null;let e=n.filter(eM);return e.length==0?null:function(t){let r=rM(t,e).map(tM);return Bm(r).pipe(ne(nM))}}function uM(n){return n!=null?aM(iM(n)):null}function $R(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cM(n){return n._rawValidators}function lM(n){return n._rawAsyncValidators}function z_(n){return n?Array.isArray(n)?n:[n]:[]}function Pf(n,e){return Array.isArray(n)?n.includes(e):n===e}function qR(n,e){let t=z_(e);return z_(n).forEach(i=>{Pf(t,i)||t.push(i)}),t}function HR(n,e){return z_(e).filter(t=>!Pf(n,t))}var kf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ro=class extends kf{get formDirective(){return null}get path(){return null}},Mo=class extends kf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Of=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ZQ=ye($({},WB),{"[class.ng-submitted]":"isSubmitted"}),Ai=(()=>{class n extends Of{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(J(Mo,2))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Jh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[In]})}}return n})(),ma=(()=>{class n extends Of{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(J(Ro,10))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Jh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[In]})}}return n})();var $c="VALID",Nf="INVALID",ha="PENDING",qc="DISABLED",Ci=class{},Ff=class extends Ci{constructor(e,t){super(),this.value=e,this.source=t}},Hc=class extends Ci{constructor(e,t){super(),this.pristine=e,this.source=t}},Gc=class extends Ci{constructor(e,t){super(),this.touched=e,this.source=t}},fa=class extends Ci{constructor(e,t){super(),this.status=e,this.source=t}},W_=class extends Ci{constructor(e){super(),this.source=e}},K_=class extends Ci{constructor(e){super(),this.source=e}};function ew(n){return(Bf(n)?n.validators:n)||null}function KB(n){return Array.isArray(n)?sM(n):n||null}function tw(n,e){return(Bf(e)?e.asyncValidators:n)||null}function QB(n){return Array.isArray(n)?uM(n):n||null}function Bf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function dM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function hM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var pa=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=hc(()=>this.statusReactive()),this.statusReactive=uc(void 0),this._pristine=hc(()=>this.pristineReactive()),this.pristineReactive=uc(!0),this._touched=hc(()=>this.touchedReactive()),this.touchedReactive=uc(!1),this._events=new Ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pr(this.statusReactive)}set status(e){Pr(()=>this.statusReactive.set(e))}get valid(){return this.status===$c}get invalid(){return this.status===Nf}get pending(){return this.status==ha}get disabled(){return this.status===qc}get enabled(){return this.status!==qc}get pristine(){return Pr(this.pristineReactive)}set pristine(e){Pr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Pr(this.touchedReactive)}set touched(e){Pr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HR(e,this._rawAsyncValidators))}hasValidator(e){return Pf(this._rawValidators,e)}hasAsyncValidator(e){return Pf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Gc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Gc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hc(!0,r))}markAsPending(e={}){this.status=ha;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qc,this.errors=null,this._forEachChild(i=>{i.disable(ye($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ff(this.value,r)),this._events.next(new fa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$c,this._forEachChild(r=>{r.enable(ye($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===ha)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ff(this.value,t)),this._events.next(new fa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ha,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=tM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?qc:this.errors?Nf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ha)?ha:this._anyControlsHaveStatus(Nf)?Nf:$c}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Hc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Gc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QB(this._rawAsyncValidators)}},Vf=class extends pa{constructor(e,t,r){super(ew(t),tw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hM(this,!0,e),Object.keys(e).forEach(r=>{dM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Q_=class extends Vf{};var $f=new B("CallSetDisabledState",{providedIn:"root",factory:()=>qf}),qf="always";function fM(n,e){return[...e.path,n]}function Y_(n,e,t=qf){nw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ZB(n,e),XB(n,e),JB(n,e),YB(n,e)}function GR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),jf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YB(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nw(n,e){let t=cM(n);e.validator!==null?n.setValidators($R(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=lM(n);e.asyncValidator!==null?n.setAsyncValidators($R(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Lf(e._rawValidators,i),Lf(e._rawAsyncValidators,i)}function jf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=cM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=lM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Lf(e._rawValidators,r),Lf(e._rawAsyncValidators,r),t}function ZB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&pM(n,e)})}function JB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&pM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function pM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function XB(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function e$(n,e){n==null,nw(n,e)}function t$(n,e){return jf(n,e)}function gM(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function n$(n){return Object.getPrototypeOf(n.constructor)===Uf}function r$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mM(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ti?t=o:n$(o)?r=o:i=o}),i||r||t||null}function i$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function WR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var zc=class extends pa{constructor(e=null,t,r){super(ew(t),tw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(WR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){WR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var o$=n=>n instanceof zc;var s$={provide:Mo,useExisting:Zn(()=>rw)},KR=Promise.resolve(),rw=(()=>{class n extends Mo{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new zc,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mM(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),gM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Y_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){KR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&bo(r);KR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fM(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(J(Ro,9),J(J_,10),J(X_,10),J(ga,10),J(mi,8),J($f,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pi([s$]),In,xr]})}}return n})(),ya=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),a$={provide:ga,useExisting:Zn(()=>iw),multi:!0},iw=(()=>{class n extends Uf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Be("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[pi([a$]),In]})}}return n})();var yM=new B("");var u$={provide:Ro,useExisting:Zn(()=>xo)},xo=(()=>{class n extends Ro{get submitted(){return Pr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=hc(()=>this._submittedReactive()),this._submittedReactive=uc(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Y_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){GR(t.control||null,t,!1),i$(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),r$(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new W_(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new K_(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(GR(r||null,t),o$(i)&&(Y_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);e$(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&t$(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nw(this.form,this),this._oldForm&&jf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(J(J_,10),J(X_,10),J($f,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Be("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pi([u$]),In,xr]})}}return n})();var c$={provide:Mo,useExisting:Zn(()=>No)},No=(()=>{class n extends Mo{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new He,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mM(this,o)}ngOnChanges(t){this._added||this._setUpControl(),gM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return fM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(J(Ro,13),J(J_,10),J(X_,10),J(ga,10),J(yM,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pi([c$]),In,xr]})}}return n})(),l$={provide:ga,useExisting:Zn(()=>Si),multi:!0};function vM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function d$(n){return n.split(":")[0]}var Si=(()=>{class n extends Uf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=vM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=d$(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Be("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pi([l$]),In]})}}return n})(),va=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(vM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(J(Jn),J(Nr),J(Si,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),h$={provide:ga,useExisting:Zn(()=>_M),multi:!0};function QR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function f$(n){return n.split(":")[0]}var _M=(()=>{class n extends Uf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=f$(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Be("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pi([h$]),In]})}}return n})(),_a=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(QR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(QR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(J(Jn),J(Nr),J(_M,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var wM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=rn({type:n})}static{this.\u0275inj=nn({})}}return n})(),Z_=class extends pa{constructor(e,t,r){super(ew(t),tw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hM(this,!1,e),e.forEach((r,i)=>{dM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function YR(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var wa=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return YR(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Vf(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Q_(i,r)}control(t,r,i){let o={};return this.useNonNullable?(YR(r)?o=r:(o.validators=r,o.asyncValidators=i),new zc(t,ye($({},o),{nonNullable:!0}))):new zc(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Z_(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof zc)return t;if(t instanceof pa)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$f,useValue:t.callSetDisabledState??qf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=rn({type:n})}static{this.\u0275inj=nn({imports:[wM]})}}return n})(),Ri=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:$f,useValue:t.callSetDisabledState??qf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=rn({type:n})}static{this.\u0275inj=nn({imports:[wM]})}}return n})();var p$="firebase",g$="10.14.1";ht(p$,g$,"app");var ir=new Sr("ANGULARFIRE2_VERSION");function zf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Wc=(n,e)=>{let t=e?[e]:yd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},cn=class{constructor(){return Wc(m$)}},m$="app-check";function Ea(){}var Gf=class{zone;delegate;constructor(e,t=Lm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},ow=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea)),t.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Gf(Zone.current)),this.insideAngular=t.run(()=>new Gf(Zone.current,uo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(ge))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function y$(n){return Kc().ngZone.runOutsideAngular(()=>n())}function Po(n){return Kc().ngZone.run(()=>n())}function sw(n){return n.pipe(Zt(Kc().outsideAngular))}function _t(n){return v$(Kc())(n)}function v$(n){return function(t){return t=t.lift(new ow(n.ngZone)),t.pipe(fn(n.outsideAngular),Zt(n.insideAngular))}}var _$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Po(()=>n.apply(void 0,r))},Ia=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Po(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea))),r[o]=_$(r[o],t));let i=y$(()=>n.apply(this,r));if(!e)if(i instanceof ae){let o=Kc();return i.pipe(fn(o.outsideAngular),Zt(o.insideAngular))}else return Po(()=>i);return i instanceof ae?i.pipe(_t):i instanceof Promise?Po(()=>new Promise((o,s)=>i.then(a=>Po(()=>o(a)),a=>Po(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Po(()=>i)};var Ur=class{constructor(e){return e}},ko=class{constructor(){return yd()}};function w$(n){return n&&n.length===1?n[0]:new Ur(fs())}var uw=new B("angularfire2._apps"),E$={provide:Ur,useFactory:w$,deps:[[new Dt,uw]]},I$={provide:ko,deps:[[new Dt,uw]]};function D$(n){return(e,t)=>{let r=t.get(gt);ht("angularfire",ir.full,"core"),ht("angularfire",ir.full,"app"),ht("angular",jv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ur(i)}}function EM(n,...e){return _n([E$,I$,{provide:uw,useFactory:D$(n),multi:!0,deps:[ge,It,bn,...e]}])}var IM=Ia(xb,!0);var b$=new Map,C$={activated:!1,tokenObservers:[]},T$={initialized:!1,enabled:!1};function Fn(n){return b$.get(n)||Object.assign({},C$)}function AM(){return T$}var A$="https://content-firebaseappcheck.googleapis.com/v1";var S$="exchangeDebugToken",DM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},AY=24*60*60*1e3;var lw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new vm,this.pending.promise.catch(t=>{}),yield R$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new vm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function R$(n){return new Promise(e=>{setTimeout(e,n)})}var M$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mi=new Mb("appCheck","AppCheck",M$);function SM(n){if(!Fn(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function RM(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Mi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Mi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Mi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function MM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${A$}/projects/${t}/apps/${r}:${S$}?key=${i}`,body:{debug_token:e}}}var x$="firebase-app-check-database",N$=1,dw="firebase-app-check-store";var Wf=null;function P$(){return Wf||(Wf=new Promise((n,e)=>{try{let t=indexedDB.open(x$,N$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dw,{keyPath:"compositeKey"})}}}catch(t){e(Mi.create("storage-open",{originalErrorMessage:t?.message}))}}),Wf)}function k$(n,e){return O$(F$(n),e)}function O$(n,e){return M(this,null,function*(){let r=(yield P$()).transaction(dw,"readwrite"),o=r.objectStore(dw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Mi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function F$(n){return`${n.options.appId}-${n.name}`}var hw=new pd("@firebase/app-check");function cw(n,e){return hd()?k$(n,e).catch(t=>{hw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xM(){return AM().enabled}function NM(){return M(this,null,function*(){let n=AM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var V$={error:"UNKNOWN_ERROR"};function L$(n){return Rb.encodeString(JSON.stringify(n),!1)}function fw(n,e=!1){return M(this,null,function*(){let t=n.app;SM(t);let r=Fn(t),i=r.token,o;if(i&&!Qc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Qc(u)?i=u:yield cw(t,void 0))}if(!e&&i&&Qc(i))return{token:i.token};let s=!1;if(xM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RM(MM(t,yield NM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield cw(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?hw.warn(u.message):hw.error(u),o=u}let a;return i?o?Qc(i)?a={token:i.token,internalError:o}:a=CM(o):(a={token:i.token},r.token=i,yield cw(t,i)):a=CM(o),s&&$$(t,a),a})}function j$(n){return M(this,null,function*(){let e=n.app;SM(e);let{provider:t}=Fn(e);if(xM()){let r=yield NM(),{token:i}=yield RM(MM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function U$(n,e,t,r){let{app:i}=n,o=Fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Qc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),bM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>bM(n))}function PM(n,e){let t=Fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bM(n){let{app:e}=n,t=Fn(e),r=t.tokenRefresher;r||(r=B$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function B$(n){let{app:e}=n;return new lw(()=>M(this,null,function*(){let t=Fn(e),r;if(t.token?r=yield fw(n,!0):r=yield fw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},DM.RETRIAL_MIN_WAIT,DM.RETRIAL_MAX_WAIT)}function $$(n,e){let t=Fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qc(n){return n.expireTimeMillis-Date.now()>0}function CM(n){return{token:L$(V$),error:n}}var pw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Fn(this.app);for(let t of e)PM(this.app,t.next);return Promise.resolve()}};function q$(n,e){return new pw(n,e)}function H$(n){return{getToken:e=>fw(n,e),getLimitedUseToken:()=>j$(n),addTokenListener:e=>U$(n,"INTERNAL",e),removeTokenListener:e=>PM(n.app,e)}}var G$="@firebase/app-check",z$="0.8.8";var W$="app-check",TM="app-check-internal";function K$(){io(new Rn(W$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return q$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(TM).initialize()})),io(new Rn(TM,n=>{let e=n.getProvider("app-check").getImmediate();return H$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(G$,z$)}K$();var Q$=["localhost","0.0.0.0","127.0.0.1"],jY=typeof window<"u"&&Q$.includes(window.location.hostname);var Y$="firebase",Z$="10.14.1";tn.registerVersion(Y$,Z$,"app-compat");var J$=["ngOnDestroy"],OM=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(J$.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var mw=class{constructor(e){return e}},xi=new B("angularfire2.app.options"),Da=new B("angularfire2.app.name");function ba(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=tn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>tn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;X$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new mw(s)}var X$=(n,...e)=>{Bv()&&typeof console<"u"&&console[n](...e)};function Ca(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return eq(i,s)||(kM("error",`${e} was already initialized on the ${t} Firebase App with different settings.${tq?" You may need to reload as Firebase is not HMR aware.":""}`),kM("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function eq(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var tq=typeof module<"u"&&!!module.hot,kM=(n,...e)=>{Bv()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var yw=new B("angularfire2.auth.use-emulator"),vw=new B("angularfire2.auth.settings"),_w=new B("angularfire2.auth.tenant-id"),ww=new B("angularfire2.auth.langugage-code"),Ew=new B("angularfire2.auth.use-device-language"),Iw=new B("angularfire.auth.persistence"),Dw=(n,e,t,r,i,o,s,a)=>Ca(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),Ta=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let I=new Ue,C=ee(void 0).pipe(Zt(s.outsideAngular),xe(()=>o.runOutsideAngular(()=>import("./chunk-FUK65WA4.js"))),ne(()=>ba(t,o,r)),ne(D=>Dw(D,o,a,l,d,f,u,g)),Qd({bufferSize:1,refCount:!1}));if(yi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{C.pipe(pn()).subscribe();let D=C.pipe(xe(P=>P.getRedirectResult().then(U=>U,()=>null)),_t,Qd({bufferSize:1,refCount:!1})),k=C.pipe(xe(P=>new ae(U=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(Z=>U.next(Z),Z=>U.error(Z),()=>U.complete()))})))),j=C.pipe(xe(P=>new ae(U=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(Z=>U.next(Z),Z=>U.error(Z),()=>U.complete()))}))));this.authState=D.pipe(Yd(k),fn(s.outsideAngular),Zt(s.insideAngular)),this.user=D.pipe(Yd(j),fn(s.outsideAngular),Zt(s.insideAngular)),this.idToken=this.user.pipe(xe(P=>P?fe(P.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe(xe(P=>P?fe(P.getIdTokenResult()):ee(null))),this.credential=$m(D,I,this.authState.pipe(pt(P=>!P))).pipe(ne(P=>P?.user?P:null),fn(s.outsideAngular),Zt(s.insideAngular))}return OM(this,C,o,{spy:{apply:(D,k,j)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&j.then(P=>I.next(P))}}})}static \u0275fac=function(r){return new(r||n)(F(xi),F(Da,8),F(gt),F(ge),F(bn),F(yw,8),F(vw,8),F(_w,8),F(ww,8),F(Ew,8),F(Iw,8),F(cn,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Yc=class{id;email;perfil;constructor(e,t,r){this.id=e,this.email=t,this.perfil=r}toJson(){return{id:this.id,email:this.email,perfil:this.perfil}}getID(){return this.id}getEmail(){return this.email}};var FM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VM={};var Ni,Cw;(function(){var n;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(b,T,S){for(var w=Array(arguments.length-2),vr=2;vr<arguments.length;vr++)w[vr-2]=arguments[vr];return v.prototype[T].apply(b,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var b=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)b[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;16>T;++T)b[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],T=E.g[2];var S=E.g[3],w=v+(S^_&(T^S))+b[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+b[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+b[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+b[3]+3250441966&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+b[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+b[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+b[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+b[7]+4249261313&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+b[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+b[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+b[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+b[11]+2304563134&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+b[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+b[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+b[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+b[15]+1236535329&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(_^T))+b[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+b[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+b[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+b[0]+3921069994&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+b[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+b[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+b[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+b[4]+3889429448&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+b[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+b[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+b[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+b[8]+1163531501&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+b[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+b[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+b[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+b[12]+2368359562&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(_^T^S)+b[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+b[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+b[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+b[14]+4259657740&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+b[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+b[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+b[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+b[10]+3200236656&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+b[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+b[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+b[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+b[6]+76029189&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+b[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+b[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+b[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+b[2]+3299628645&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(T^(_|~S))+b[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+b[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+b[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+b[5]+4237533241&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+b[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+b[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+b[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+b[1]+2240044497&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+b[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+b[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+b[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+b[13]+1309151649&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+b[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+b[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+b[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,b=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=_;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(b[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,b),T=0;break}}else for(;S<v;)if(b[T++]=E[S++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var b=0;32>b;b+=8)E[_++]=this.g[v]>>>b&255;return E};function o(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function s(E,v){this.h=v;for(var _=[],b=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;b&&S==v||(_[T]=S,b=!1)}this.g=_}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return D(l(-E));for(var v=[],_=1,b=0;E>=_;b++)v[b]=E/_|0,_*=4294967296;return new s(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return D(d(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),b=f,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),w=parseInt(E.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),b=b.j(S).add(l(w))):(b=b.j(_),b=b.add(l(w)))}return b}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-D(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var b=this.i(_);E+=(0<=b?b:4294967296+b)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(C(this))return"-"+D(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,b="";;){var T=U(_,v).g;_=k(_,T.j(v));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=T,I(_))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function C(E){return E.h==-1}n.l=function(E){return E=k(this,E),C(E)?-1:I(E)?0:1};function D(E){for(var v=E.g.length,_=[],b=0;b<v;b++)_[b]=~E.g[b];return new s(_,~E.h).add(g)}n.abs=function(){return C(this)?D(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],b=0,T=0;T<=v;T++){var S=b+(this.i(T)&65535)+(E.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);b=w>>>16,S&=65535,w&=65535,_[T]=w<<16|S}return new s(_,_[_.length-1]&-2147483648?-1:0)};function k(E,v){return E.add(D(v))}n.j=function(E){if(I(this)||I(E))return f;if(C(this))return C(E)?D(this).j(D(E)):D(D(this).j(E));if(C(E))return D(this.j(D(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],b=0;b<2*v;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<E.g.length;T++){var S=this.i(b)>>>16,w=this.i(b)&65535,vr=E.i(T)>>>16,Du=E.i(T)&65535;_[2*b+2*T]+=w*Du,j(_,2*b+2*T),_[2*b+2*T+1]+=S*Du,j(_,2*b+2*T+1),_[2*b+2*T+1]+=w*vr,j(_,2*b+2*T+1),_[2*b+2*T+2]+=S*vr,j(_,2*b+2*T+2)}for(b=0;b<v;b++)_[b]=_[2*b+1]<<16|_[2*b];for(b=v;b<2*v;b++)_[b]=0;return new s(_,0)};function j(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function P(E,v){this.g=E,this.h=v}function U(E,v){if(I(v))throw Error("division by zero");if(I(E))return new P(f,f);if(C(E))return v=U(D(E),v),new P(D(v.g),D(v.h));if(C(v))return v=U(E,D(v)),new P(D(v.g),v.h);if(30<E.g.length){if(C(E)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,b=v;0>=b.l(E);)_=Z(_),b=Z(b);var T=Q(_,1),S=Q(b,1);for(b=Q(b,2),_=Q(_,2);!I(b);){var w=S.add(b);0>=w.l(E)&&(T=T.add(_),S=w),b=Q(b,1),_=Q(_,1)}return v=k(E,T.j(v)),new P(T,v)}for(T=f;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=l(_),w=S.j(v);C(w)||0<w.l(E);)_-=b,S=l(_),w=S.j(v);I(S)&&(S=g),T=T.add(S),E=k(E,w)}return new P(T,E)}n.A=function(E){return U(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)&E.i(b);return new s(_,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)|E.i(b);return new s(_,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)^E.i(b);return new s(_,this.h^E.h)};function Z(E){for(var v=E.g.length+1,_=[],b=0;b<v;b++)_[b]=E.i(b)<<1|E.i(b-1)>>>31;return new s(_,E.h)}function Q(E,v){var _=v>>5;v%=32;for(var b=E.g.length-_,T=[],S=0;S<b;S++)T[S]=0<v?E.i(S+_)>>>v|E.i(S+_+1)<<32-v:E.i(S+_);return new s(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cw=VM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Ni=VM.Integer=s}).apply(typeof FM<"u"?FM:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={};var Tw,nq,Aa,Aw,Zc,Qf,Sw,Rw,Mw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var A=c[m];if(!(A in p))break e;p=p[A]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,A={next:function(){if(!m&&p<c.length){var x=p++;return{value:h(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),c.apply(h,A)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function I(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,A,x){for(var q=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)q[Me-2]=arguments[Me];return h.prototype[A].apply(m,q)}}function C(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function D(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let A=c.length||0,x=m.length||0;c.length=A+x;for(let q=0;q<x;q++)c[A+q]=m[q]}else c.push(m)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(c){return/^[\s\xa0]*$/.test(c)}function P(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function U(c){return U[" "](c),c}U[" "]=function(){};var Z=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function Q(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function E(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,h){let p,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(p in m)c[p]=m[p];for(let x=0;x<_.length;x++)p=_[x],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Gg;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class vr{constructor(){this.h=this.g=null}add(h,p){let m=Du.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Du=new k(()=>new M1,c=>c.reset());class M1{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let bu,Cu=!1,Gg=new vr,C0=()=>{let c=a.Promise.resolve(void 0);bu=()=>{c.then(x1)}};var x1=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(p){S(p)}var h=Du;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}Cu=!1};function Yr(){this.s=this.s,this.C=this.C}Yr.prototype.s=!1,Yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var N1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function Tu(c,h){if(At.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Z){e:{try{U(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:P1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Tu.aa.h.call(this)}}I(Tu,At);var P1={2:"touch",3:"pen",4:"mouse"};Tu.prototype.h=function(){Tu.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Au="closure_listenable_"+(1e6*Math.random()|0),k1=0;function O1(c,h,p,m,A){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=A,this.key=++k1,this.da=this.fa=!1}function Wl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Kl(c){this.src=c,this.g={},this.h=0}Kl.prototype.add=function(c,h,p,m,A){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var q=Wg(c,h,m,A);return-1<q?(h=c[q],p||(h.fa=!1)):(h=new O1(h,this.src,x,!!m,A),h.fa=p,c.push(h)),h};function zg(c,h){var p=h.type;if(p in c.g){var m=c.g[p],A=Array.prototype.indexOf.call(m,h,void 0),x;(x=0<=A)&&Array.prototype.splice.call(m,A,1),x&&(Wl(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Wg(c,h,p,m){for(var A=0;A<c.length;++A){var x=c[A];if(!x.da&&x.listener==h&&x.capture==!!p&&x.ha==m)return A}return-1}var Kg="closure_lm_"+(1e6*Math.random()|0),Qg={};function T0(c,h,p,m,A){if(m&&m.once)return S0(c,h,p,m,A);if(Array.isArray(h)){for(var x=0;x<h.length;x++)T0(c,h[x],p,m,A);return null}return p=Xg(p),c&&c[Au]?c.K(h,p,l(m)?!!m.capture:!!m,A):A0(c,h,p,!1,m,A)}function A0(c,h,p,m,A,x){if(!h)throw Error("Invalid event type");var q=l(A)?!!A.capture:!!A,Me=Zg(c);if(Me||(c[Kg]=Me=new Kl(c)),p=Me.add(h,p,m,q,x),p.proxy)return p;if(m=F1(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)N1||(A=q),A===void 0&&(A=!1),c.addEventListener(h.toString(),m,A);else if(c.attachEvent)c.attachEvent(M0(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function F1(){function c(p){return h.call(c.src,c.listener,p)}let h=V1;return c}function S0(c,h,p,m,A){if(Array.isArray(h)){for(var x=0;x<h.length;x++)S0(c,h[x],p,m,A);return null}return p=Xg(p),c&&c[Au]?c.L(h,p,l(m)?!!m.capture:!!m,A):A0(c,h,p,!0,m,A)}function R0(c,h,p,m,A){if(Array.isArray(h))for(var x=0;x<h.length;x++)R0(c,h[x],p,m,A);else m=l(m)?!!m.capture:!!m,p=Xg(p),c&&c[Au]?(c=c.i,h=String(h).toString(),h in c.g&&(x=c.g[h],p=Wg(x,p,m,A),-1<p&&(Wl(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete c.g[h],c.h--)))):c&&(c=Zg(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Wg(h,p,m,A)),(p=-1<c?h[c]:null)&&Yg(p))}function Yg(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Au])zg(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(M0(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Zg(h))?(zg(p,c),p.h==0&&(p.src=null,h[Kg]=null)):Wl(c)}}}function M0(c){return c in Qg?Qg[c]:Qg[c]="on"+c}function V1(c,h){if(c.da)c=!0;else{h=new Tu(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&Yg(c),c=p.call(m,h)}return c}function Zg(c){return c=c[Kg],c instanceof Kl?c:null}var Jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xg(c){return typeof c=="function"?c:(c[Jg]||(c[Jg]=function(h){return c.handleEvent(h)}),c[Jg])}function St(){Yr.call(this),this.i=new Kl(this),this.M=this,this.F=null}I(St,Yr),St.prototype[Au]=!0,St.prototype.removeEventListener=function(c,h,p,m){R0(this,c,h,p,m)};function Vt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new At(h,c);else if(h instanceof At)h.target=h.target||c;else{var A=h;h=new At(m,c),b(h,A)}if(A=!0,p)for(var x=p.length-1;0<=x;x--){var q=h.g=p[x];A=Ql(q,m,!0,h)&&A}if(q=h.g=c,A=Ql(q,m,!0,h)&&A,A=Ql(q,m,!1,h)&&A,p)for(x=0;x<p.length;x++)q=h.g=p[x],A=Ql(q,m,!1,h)&&A}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Wl(p[m]);delete c.g[h],c.h--}}this.F=null},St.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},St.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function Ql(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,x=0;x<h.length;++x){var q=h[x];if(q&&!q.da&&q.capture==p){var Me=q.listener,wt=q.ha||q.src;q.fa&&zg(c.i,q),A=Me.call(wt,m)!==!1&&A}}return A&&!m.defaultPrevented}function x0(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function N0(c){c.g=x0(()=>{c.g=null,c.i&&(c.i=!1,N0(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class L1 extends Yr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:N0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(c){Yr.call(this),this.h=c,this.g={}}I(Su,Yr);var P0=[];function k0(c){Q(c.g,function(h,p){this.g.hasOwnProperty(p)&&Yg(h)},c),c.g={}}Su.prototype.N=function(){Su.aa.N.call(this),k0(this)},Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var em=a.JSON.stringify,j1=a.JSON.parse,U1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function tm(){}tm.prototype.h=null;function O0(c){return c.h||(c.h=c.i())}function F0(){}var Ru={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nm(){At.call(this,"d")}I(nm,At);function rm(){At.call(this,"c")}I(rm,At);var eo={},V0=null;function Yl(){return V0=V0||new St}eo.La="serverreachability";function L0(c){At.call(this,eo.La,c)}I(L0,At);function Mu(c){let h=Yl();Vt(h,new L0(h))}eo.STAT_EVENT="statevent";function j0(c,h){At.call(this,eo.STAT_EVENT,c),this.stat=h}I(j0,At);function Lt(c){let h=Yl();Vt(h,new j0(h,c))}eo.Ma="timingevent";function U0(c,h){At.call(this,eo.Ma,c),this.size=h}I(U0,At);function xu(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function Nu(){this.g=!0}Nu.prototype.xa=function(){this.g=!1};function B1(c,h,p,m,A,x){c.info(function(){if(c.g)if(x)for(var q="",Me=x.split("&"),wt=0;wt<Me.length;wt++){var Ce=Me[wt].split("=");if(1<Ce.length){var Rt=Ce[0];Ce=Ce[1];var Mt=Rt.split("_");q=2<=Mt.length&&Mt[1]=="type"?q+(Rt+"="+Ce+"&"):q+(Rt+"=redacted&")}}else q=null;else q=x;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+h+`
`+p+`
`+q})}function $1(c,h,p,m,A,x,q){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+h+`
`+p+`
`+x+" "+q})}function cs(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+H1(c,p)+(m?" "+m:"")})}function q1(c,h){c.info(function(){return"TIMEOUT: "+h})}Nu.prototype.info=function(){};function H1(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var x=A[0];if(x!="noop"&&x!="stop"&&x!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return em(p)}catch{return h}}var Zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},B0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},im;function Jl(){}I(Jl,tm),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},im=new Jl;function Zr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new Su(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $0}function $0(){this.i=null,this.g="",this.h=!1}var q0={},om={};function sm(c,h,p){c.L=1,c.v=nd(_r(h)),c.m=p,c.P=!0,H0(c,null)}function H0(c,h){c.F=Date.now(),Xl(c),c.A=_r(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),ib(p.i,"t",m),c.C=0,p=c.j.J,c.h=new $0,c.g=Ib(c.j,p?h:null,!c.m),0<c.O&&(c.M=new L1(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var A="readystatechange";Array.isArray(A)||(A&&(P0[0]=A.toString()),A=P0);for(var x=0;x<A.length;x++){var q=T0(p,A[x],m||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Mu(),B1(c.i,c.u,c.A,c.l,c.R,c.m)}Zr.prototype.ca=function(c){c=c.target;let h=this.M;h&&wr(c)==3?h.j():this.Y(c)},Zr.prototype.Y=function(c){try{if(c==this.g)e:{let Mt=wr(this.g);var h=this.g.Ba();let hs=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||db(this.g)))){this.J||Mt!=4||h==7||(h==8||0>=hs?Mu(3):Mu(2)),am(this);var p=this.g.Z();this.X=p;t:if(G0(this)){var m=db(this.g);c="";var A=m.length,x=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){to(this),Pu(this);var q="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(x&&h==A-1)});m.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,$1(this.i,this.u,this.A,this.l,this.R,Mt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,wt=this.g;if((Me=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Me)){var Ce=Me;break t}}Ce=null}if(p=Ce)cs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,um(this,p);else{this.o=!1,this.s=3,Lt(12),to(this),Pu(this);break e}}if(this.P){p=!0;let Sn;for(;!this.J&&this.C<q.length;)if(Sn=G1(this,q),Sn==om){Mt==4&&(this.s=4,Lt(14),p=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==q0){this.s=4,Lt(15),cs(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else cs(this.i,this.l,Sn,null),um(this,Sn);if(G0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||q.length!=0||this.h.h||(this.s=1,Lt(16),p=!1),this.o=this.o&&p,!p)cs(this.i,this.l,q,"[Invalid Chunked Response]"),to(this),Pu(this);else if(0<q.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),pm(Rt),Rt.M=!0,Lt(11))}}else cs(this.i,this.l,q,null),um(this,q);Mt==4&&to(this),this.o&&!this.J&&(Mt==4?vb(this.j,this):(this.o=!1,Xl(this)))}else uk(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),to(this),Pu(this)}}}catch{}finally{}};function G0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function G1(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?om:(p=Number(h.substring(p,m)),isNaN(p)?q0:(m+=1,m+p>h.length?om:(h=h.slice(m,m+p),c.C=m+p,h)))}Zr.prototype.cancel=function(){this.J=!0,to(this)};function Xl(c){c.S=Date.now()+c.I,z0(c,c.I)}function z0(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xu(g(c.ba,c),h)}function am(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(q1(this.i,this.A),this.L!=2&&(Mu(),Lt(17)),to(this),this.s=2,Pu(this)):z0(this,this.S-c)};function Pu(c){c.j.G==0||c.J||vb(c.j,c)}function to(c){am(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,k0(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function um(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||cm(p.h,c))){if(!c.K&&cm(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)ad(p),od(p);else break e;fm(p),Lt(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=xu(g(p.Za,p),6e3));if(1>=Q0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ro(p,11)}else if((c.K||p.g==c)&&ad(p),!j(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Ce=A[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let Rt=Ce[3];Rt!=null&&(p.la=Rt,p.j.info("VER="+p.la));let Mt=Ce[4];Mt!=null&&(p.Aa=Mt,p.j.info("SVER="+p.Aa));let hs=Ce[5];hs!=null&&typeof hs=="number"&&0<hs&&(m=1.5*hs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Sn=c.g;if(Sn){let cd=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cd){var x=m.h;x.g||cd.indexOf("spdy")==-1&&cd.indexOf("quic")==-1&&cd.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(lm(x,x.h),x.h=null))}if(m.D){let gm=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;gm&&(m.ya=gm,Fe(m.I,m.D,gm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var q=c;if(m.qa=Eb(m,m.J?m.ia:null,m.W),q.K){Y0(m.h,q);var Me=q,wt=m.L;wt&&(Me.I=wt),Me.B&&(am(Me),Xl(Me)),m.g=q}else mb(m);0<p.i.length&&sd(p)}else Ce[0]!="stop"&&Ce[0]!="close"||ro(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ro(p,7):hm(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}Mu(4)}catch{}}var z1=class{constructor(c,h){this.g=c,this.map=h}};function W0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function K0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Q0(c){return c.h?1:c.g?c.g.size:0}function cm(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function lm(c,h){c.g?c.g.add(h):c.h=h}function Y0(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}W0.prototype.cancel=function(){if(this.i=Z0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Z0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function W1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function K1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function J0(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=K1(c),m=W1(c),A=m.length,x=0;x<A;x++)h.call(void 0,m[x],p&&p[x],c)}var X0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Q1(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),A=null;if(0<=m){var x=c[p].substring(0,m);A=c[p].substring(m+1)}else x=c[p];h(x,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function no(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof no){this.h=c.h,ed(this,c.j),this.o=c.o,this.g=c.g,td(this,c.s),this.l=c.l;var h=c.i,p=new Fu;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),eb(this,p),this.m=c.m}else c&&(h=String(c).match(X0))?(this.h=!1,ed(this,h[1]||"",!0),this.o=ku(h[2]||""),this.g=ku(h[3]||"",!0),td(this,h[4]),this.l=ku(h[5]||"",!0),eb(this,h[6]||"",!0),this.m=ku(h[7]||"")):(this.h=!1,this.i=new Fu(null,this.h))}no.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Ou(h,tb,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Ou(h,tb,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Ou(p,p.charAt(0)=="/"?J1:Z1,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Ou(p,ek)),c.join("")};function _r(c){return new no(c)}function ed(c,h,p){c.j=p?ku(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function td(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function eb(c,h,p){h instanceof Fu?(c.i=h,tk(c.i,c.h)):(p||(h=Ou(h,X1)),c.i=new Fu(h,c.h))}function Fe(c,h,p){c.i.set(h,p)}function nd(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ku(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ou(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,Y1),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Y1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tb=/[#\/\?@]/g,Z1=/[#\?:]/g,J1=/[#\?]/g,X1=/[#\?@]/g,ek=/#/g;function Fu(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&Q1(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Fu.prototype,n.add=function(c,h){Jr(this),this.i=null,c=ls(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function nb(c,h){Jr(c),h=ls(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function rb(c,h){return Jr(c),h=ls(c,h),c.g.has(h)}n.forEach=function(c,h){Jr(this),this.g.forEach(function(p,m){p.forEach(function(A){c.call(h,A,m,this)},this)},this)},n.na=function(){Jr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let A=c[m];for(let x=0;x<A.length;x++)p.push(h[m])}return p},n.V=function(c){Jr(this);let h=[];if(typeof c=="string")rb(this,c)&&(h=h.concat(this.g.get(ls(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Jr(this),this.i=null,c=ls(this,c),rb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function ib(c,h,p){nb(c,h),0<p.length&&(c.i=null,c.g.set(ls(c,h),C(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let x=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var A=x;q[m]!==""&&(A+="="+encodeURIComponent(String(q[m]))),c.push(A)}}return this.i=c.join("&")};function ls(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function tk(c,h){h&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(p,m){var A=m.toLowerCase();m!=A&&(nb(this,m),ib(this,A,p))},c)),c.j=h}function nk(c,h){let p=new Nu;if(a.Image){let m=new Image;m.onload=y(Xr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Xr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Xr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Xr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function rk(c,h){let p=new Nu,m=new AbortController,A=setTimeout(()=>{m.abort(),Xr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(A),x.ok?Xr(p,"TestPingServer: ok",!0,h):Xr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Xr(p,"TestPingServer: error",!1,h)})}function Xr(c,h,p,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(p)}catch{}}function ik(){this.g=new U1}function ok(c,h,p){let m=p||"";try{J0(c,function(A,x){let q=A;l(A)&&(q=em(A)),h.push(m+x+"="+encodeURIComponent(q))})}catch(A){throw h.push(m+"type="+encodeURIComponent("_badmap")),A}}function Vu(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Vu,tm),Vu.prototype.g=function(){return new rd(this.l,this.j)},Vu.prototype.i=function(c){return function(){return c}}({});function rd(c,h){St.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(rd,St),n=rd.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,ju(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ju(this)),this.g&&(this.readyState=3,ju(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ob(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ob(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Lu(this):ju(this),this.readyState==3&&ob(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Lu(this))},n.Qa=function(c){this.g&&(this.response=c,Lu(this))},n.ga=function(){this.g&&Lu(this)};function Lu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ju(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function ju(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sb(c){let h="";return Q(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function dm(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=sb(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Fe(c,h,p))}function Qe(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Qe,St);var sk=/^https?$/i,ak=["POST","PUT"];n=Qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():im.g(),this.v=this.o?O0(this.o):O0(im),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(x){ab(this,x);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)p.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())p.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),A=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ak,h,void 0))||m||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,q]of p)this.g.setRequestHeader(x,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lb(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){ab(this,x)}};function ab(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,ub(c),id(c)}function ub(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Vt(this,"complete"),Vt(this,"abort"),id(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),id(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cb(this):this.bb())},n.bb=function(){cb(this)};function cb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||wr(c)!=4||c.Z()!=2)){if(c.u&&wr(c)==4)x0(c.Ea,0,c);else if(Vt(c,"readystatechange"),wr(c)==4){c.h=!1;try{let q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=q===0){var A=String(c.D).match(X0)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),m=!sk.test(A?A.toLowerCase():"")}p=m}if(p)Vt(c,"complete"),Vt(c,"success");else{c.m=6;try{var x=2<wr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",ub(c)}}finally{id(c)}}}}function id(c,h){if(c.g){lb(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Vt(c,"ready");try{p.onreadystatechange=m}catch{}}}function lb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function wr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),j1(h)}};function db(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function uk(c){let h={};c=(c.g&&2<=wr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(j(c[m]))continue;var p=T(c[m]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=h[A]||[];h[A]=x,x.push(p)}E(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uu(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function hb(c){this.Aa=0,this.i=[],this.j=new Nu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uu("baseRetryDelayMs",5e3,c),this.cb=Uu("retryDelaySeedMs",1e4,c),this.Wa=Uu("forwardChannelMaxRetries",2,c),this.wa=Uu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new W0(c&&c.concurrentRequestLimit),this.Da=new ik,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hb.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){Lt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=Eb(this,null,this.W),sd(this)};function hm(c){if(fb(c),c.G==3){var h=c.U++,p=_r(c.I);if(Fe(p,"SID",c.K),Fe(p,"RID",h),Fe(p,"TYPE","terminate"),Bu(c,p),h=new Zr(c,c.j,h),h.L=2,h.v=nd(_r(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Ib(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xl(h)}wb(c)}function od(c){c.g&&(pm(c),c.g.cancel(),c.g=null)}function fb(c){od(c),c.u&&(a.clearTimeout(c.u),c.u=null),ad(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function sd(c){if(!K0(c.h)&&!c.s){c.s=!0;var h=c.Ga;bu||C0(),Cu||(bu(),Cu=!0),Gg.add(h,c),c.B=0}}function ck(c,h){return Q0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xu(g(c.Ga,c,h),_b(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let A=new Zr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(A.H=x,x=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=gb(this,A,h),p=_r(this.I),Fe(p,"RID",c),Fe(p,"CVER",22),this.D&&Fe(p,"X-HTTP-Session-Id",this.D),Bu(this,p),x&&(this.O?h="headers="+encodeURIComponent(String(sb(x)))+"&"+h:this.m&&dm(p,this.m,x)),lm(this.h,A),this.Ua&&Fe(p,"TYPE","init"),this.P?(Fe(p,"$req",h),Fe(p,"SID","null"),A.T=!0,sm(A,p,null)):sm(A,p,h),this.G=2}}else this.G==3&&(c?pb(this,c):this.i.length==0||K0(this.h)||pb(this))};function pb(c,h){var p;h?p=h.l:p=c.U++;let m=_r(c.I);Fe(m,"SID",c.K),Fe(m,"RID",p),Fe(m,"AID",c.T),Bu(c,m),c.m&&c.o&&dm(m,c.m,c.o),p=new Zr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=gb(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),lm(c.h,p),sm(p,m,h)}function Bu(c,h){c.H&&Q(c.H,function(p,m){Fe(h,m,p)}),c.l&&J0({},function(p,m){Fe(h,m,p)})}function gb(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var A=c.i;let x=-1;for(;;){let q=["count="+p];x==-1?0<p?(x=A[0].g,q.push("ofs="+x)):x=0:q.push("ofs="+x);let Me=!0;for(let wt=0;wt<p;wt++){let Ce=A[wt].g,Rt=A[wt].map;if(Ce-=x,0>Ce)x=Math.max(0,A[wt].g-100),Me=!1;else try{ok(Rt,q,"req"+Ce+"_")}catch{m&&m(Rt)}}if(Me){m=q.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function mb(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;bu||C0(),Cu||(bu(),Cu=!0),Gg.add(h,c),c.v=0}}function fm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xu(g(c.Fa,c),_b(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,yb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xu(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),od(this),yb(this))};function pm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yb(c){c.g=new Zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=_r(c.qa);Fe(h,"RID","rpc"),Fe(h,"SID",c.K),Fe(h,"AID",c.T),Fe(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(h,"TO",c.ja),Fe(h,"TYPE","xmlhttp"),Bu(c,h),c.m&&c.o&&dm(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=nd(_r(h)),p.m=null,p.P=!0,H0(p,c)}n.Za=function(){this.C!=null&&(this.C=null,od(this),fm(this),Lt(19))};function ad(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function vb(c,h){var p=null;if(c.g==h){ad(c),pm(c),c.g=null;var m=2}else if(cm(c.h,h))p=h.D,Y0(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=c.B;m=Yl(),Vt(m,new U0(m,p)),sd(c)}else mb(c);else if(A=h.s,A==3||A==0&&0<h.X||!(m==1&&ck(c,h)||m==2&&fm(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),A){case 1:ro(c,5);break;case 4:ro(c,10);break;case 3:ro(c,6);break;default:ro(c,2)}}}function _b(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function ro(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let A=!m;m=new no(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ed(m,"https"),nd(m),A?nk(m.toString(),p):rk(m.toString(),p)}else Lt(2);c.G=0,c.l&&c.l.sa(h),wb(c),fb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function wb(c){if(c.G=0,c.ka=[],c.l){let h=Z0(c.h);(h.length!=0||c.i.length!=0)&&(D(c.ka,h),D(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function Eb(c,h,p){var m=p instanceof no?_r(p):new no(p);if(m.g!="")h&&(m.g=h+"."+m.g),td(m,m.s);else{var A=a.location;m=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var x=new no(null);m&&ed(x,m),h&&(x.g=h),A&&td(x,A),p&&(x.l=p),m=x}return p=c.D,h=c.ya,p&&h&&Fe(m,p,h),Fe(m,"VER",c.la),Bu(c,m),m}function Ib(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Qe(new Vu({eb:p})):new Qe(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Db(){}n=Db.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ud(){}ud.prototype.g=function(c,h){return new en(c,h)};function en(c,h){St.call(this),this.g=new hb(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!j(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new ds(this)}I(en,St),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){hm(this.g)},en.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=em(c),c=p);h.i.push(new z1(h.Ya++,c)),h.G==3&&sd(h)},en.prototype.N=function(){this.g.l=null,delete this.j,hm(this.g),delete this.g,en.aa.N.call(this)};function bb(c){nm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}I(bb,nm);function Cb(){rm.call(this),this.status=1}I(Cb,rm);function ds(c){this.g=c}I(ds,Db),ds.prototype.ua=function(){Vt(this.g,"a")},ds.prototype.ta=function(c){Vt(this.g,new bb(c))},ds.prototype.sa=function(c){Vt(this.g,new Cb)},ds.prototype.ra=function(){Vt(this.g,"b")},ud.prototype.createWebChannel=ud.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,Mw=Br.createWebChannelTransport=function(){return new ud},Rw=Br.getStatEventTarget=function(){return Yl()},Sw=Br.Event=eo,Qf=Br.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zl.NO_ERROR=0,Zl.TIMEOUT=8,Zl.HTTP_ERROR=6,Zc=Br.ErrorCode=Zl,B0.COMPLETE="complete",Aw=Br.EventType=B0,F0.EventType=Ru,Ru.OPEN="a",Ru.CLOSE="b",Ru.ERROR="c",Ru.MESSAGE="d",St.prototype.listen=St.prototype.K,Aa=Br.WebChannel=F0,nq=Br.FetchXmlHttpFactory=Vu,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Tw=Br.XhrIo=Qe}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});var LM="@firebase/firestore";var lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");var iu="10.14.0";var ji=new pd("@firebase/firestore");function Na(){return ji.logLevel}function OI(n){ji.setLogLevel(n)}function V(n,...e){if(ji.logLevel<=qn.DEBUG){let t=e.map(FI);ji.debug(`Firestore (${iu}): ${n}`,...t)}}function et(n,...e){if(ji.logLevel<=qn.ERROR){let t=e.map(FI);ji.error(`Firestore (${iu}): ${n}`,...t)}}function Vn(n,...e){if(ji.logLevel<=qn.WARN){let t=e.map(FI);ji.warn(`Firestore (${iu}): ${n}`,...t)}}function FI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${iu}) INTERNAL ASSERTION FAILED: `+n;throw et(e),new Error(e)}function X(n,e){n||Y()}function Bx(n,e){n||Y()}function G(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends fd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var op=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lt.UNAUTHENTICATED))}shutdown(){}},Vw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lw=class{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){X(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new mt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string"),new op(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new lt(e)}},jw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$w=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){X(this.o===void 0);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(X(typeof t.token=="string"),this.R=t.token,new Bw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function rq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var sp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=rq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function Ba(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $x(n){return n+"\0"}var ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ap=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends ap{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},iq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends ap{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return iq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var $a=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function qw(n){return n.fields.find(e=>e.kind===2)}function Fo(n){return n.fields.filter(e=>e.kind!==2)}$a.UNKNOWN_ID=-1;var La=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var cl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Tn.min())}};function qx(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new Tn(i,z.empty(),e)}function Hx(n){return new Tn(n.readTime,n.key,-1)}var Tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),z.empty(),-1)}static max(){return new n(ie.max(),z.empty(),-1)}};function VI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var Gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",up=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qi(n){return M(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Gx)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var cp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new $o(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=LI(r.target.error);this.V.reject(new $o(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new $o(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Gw(t)}},Ui=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S($u())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),Vo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hd())return!1;if(n.v())return!0;let e=$u(),t=n.S(e),r=0<t&&t<10,i=zx(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new $o(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new $o(e,s))},i.onupgradeneeded=o=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=cp.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(V("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function zx(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Hw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vo(this.B.delete())}},$o=class extends O{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Yi(n){return n.name==="IndexedDbTransactionError"}var Gw=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(V("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vo(r)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),Vo(this.store.add(e))}get(e){return Vo(this.store.get(e)).next(t=>(t===void 0&&(t=null),V("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),Vo(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),Vo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new R((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new R((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){V("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new R((r,i)=>{t.onerror=o=>{let s=LI(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new R((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Hw(a),l=t(a.primaryKey,a.value,u);if(l instanceof R){let d=l.catch(f=>(u.done(),R.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>R.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Vo(n){return new R((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=LI(r.target.error);t(i)}})}var jM=!1;function LI(n){let e=Ui.S($u());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jM||(jM=!0,setTimeout(()=>{throw r},0)),r}}return n}var zw=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){V("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{V("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Yi(t)?V("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Qi(t)}yield this.X(6e4)}))}},Ww=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return R.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return V("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(V("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=Hx(o);VI(s,r)>0&&(r=s)}),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var ln=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ml(n){return n==null}function ll(n){return n===0&&1/n==-1/0}function Wx(n){return typeof n=="number"&&Number.isInteger(n)&&!ll(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function zt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UM(e)),e=oq(n.get(t),e);return UM(e)}function oq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function UM(n){return n+""}function or(n){let e=n.length;if(X(e>=2),e===2)return X(n.charAt(0)===""&&n.charAt(1)===""),Ie.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Y(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Y()}o=s+2}return new Ie(r)}var BM=["userId","batchId"];function ep(n,e){return[n,zt(e)]}function Kx(n,e,t){return[n,zt(e),t]}var sq={},aq=["prefixPath","collectionGroup","readTime","documentId"],uq=["prefixPath","collectionGroup","documentId"],cq=["collectionGroup","readTime","prefixPath","documentId"],lq=["canonicalId","targetId"],dq=["targetId","path"],hq=["path","targetId"],fq=["collectionId","parent"],pq=["indexId","uid"],gq=["uid","sequenceNumber"],mq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yq=["indexId","uid","orderedDocumentKey"],vq=["userId","collectionPath","documentId"],_q=["userId","collectionPath","largestBatchId"],wq=["userId","collectionGroup","largestBatchId"],Qx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Eq=[...Qx,"documentOverlays"],Yx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zx=Yx,jI=[...Zx,"indexConfiguration","indexState","indexEntries"],Iq=jI,Dq=[...jI,"globals"];var dl=class extends up{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function yt(n,e){let t=G(n);return Ui.F(t._e,e)}function $M(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function es(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||ar.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}},Va=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ar=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ar(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lp(this.data.getIterator())}getIteratorFrom(e){return new lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Sa(n){return n.hasNext()?n.getNext():void 0}var dn=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Pe(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var dp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Xx(){return typeof atob<"u"}var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var bq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(n){if(X(!!n),typeof n=="string"){let e=0,t=bq.exec(n);if(X(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bi(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function ng(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function UI(n){let e=n.mapValue.fields.__previous_value__;return ng(e)?UI(e):e}function hl(n){let e=Hr(n.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var Kw=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},$i=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Vi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tp={nullValue:"NULL_VALUE"};function qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ng(n)?4:eN(n)?9007199254740991:rg(n)?10:11:Y()}function lr(n,e){if(n===e)return!0;let t=qo(n);if(t!==qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hl(n).isEqual(hl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hr(i.timestampValue),a=Hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Bi(i.bytesValue).isEqual(Bi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return $e(i.geoPointValue.latitude)===$e(o.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return $e(i.integerValue)===$e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=$e(i.doubleValue),a=$e(o.doubleValue);return s===a?ll(s)===ll(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ba(n.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if($M(s)!==$M(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!lr(s[u],a[u])))return!1;return!0}(n,e);default:return Y()}}function fl(n,e){return(n.values||[]).find(t=>lr(t,e))!==void 0}function qi(n,e){if(n===e)return 0;let t=qo(n),r=qo(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=$e(o.integerValue||o.doubleValue),u=$e(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return qM(n.timestampValue,e.timestampValue);case 4:return qM(hl(n),hl(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Bi(o),u=Bi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=ue(a[l],u[l]);if(d!==0)return d}return ue(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue($e(o.latitude),$e(s.latitude));return a!==0?a:ue($e(o.longitude),$e(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return HM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ue(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:HM(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vi.mapValue&&s===Vi.mapValue)return 0;if(o===Vi.mapValue)return 1;if(s===Vi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=ue(u[f],d[f]);if(g!==0)return g;let y=qi(a[u[f]],l[d[f]]);if(y!==0)return y}return ue(u.length,d.length)}(n.mapValue,e.mapValue);default:throw Y()}}function qM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=Hr(n),r=Hr(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function HM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=qi(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function qa(n){return Qw(n)}function Qw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Hr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Qw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Qw(t.fields[s])}`;return i+"}"}(n.mapValue):Y()}function Ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yw(n){return!!n&&"integerValue"in n}function pl(n){return!!n&&"arrayValue"in n}function GM(n){return!!n&&"nullValue"in n}function zM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function np(n){return!!n&&"mapValue"in n}function rg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return es(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=il(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var tN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Cq(n){return"nullValue"in n?tp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ho($i.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?rg(n)?tN:{mapValue:{}}:Y()}function Tq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ho($i.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?tN:"mapValue"in n?rg(n)?{mapValue:{}}:Vi:Y()}function WM(n,e){let t=qi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KM(n,e){let t=qi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!np(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=il(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];np(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){es(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(il(this.value))}};function nN(n){let e=[];return es(n.fields,(t,r)=>{let i=new tt([t]);if(np(r)){let o=nN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new dn(e)}var dt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),Ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var dr=class{constructor(e,t){this.position=e,this.inclusive=t}};function QM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=qi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function YM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lr(n.position[t],e.position[t]))return!1;return!0}var Go=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Aq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var hp=class{},we=class n extends hp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Xw(e,t,r):t==="array-contains"?new nE(e,r):t==="in"?new fp(e,r):t==="not-in"?new rE(e,r):t==="array-contains-any"?new iE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eE(e,r):new tE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(qi(t,this.value)):t!==null&&qo(this.value)===qo(t)&&this.matchesComparison(qi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class n extends hp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ha(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ha(n){return n.op==="and"}function Zw(n){return n.op==="or"}function BI(n){return rN(n)&&Ha(n)}function rN(n){for(let e of n.filters)if(e instanceof Re)return!1;return!0}function Jw(n){if(n instanceof we)return n.field.canonicalString()+n.op.toString()+qa(n.value);if(BI(n))return n.filters.map(e=>Jw(e)).join(",");{let e=n.filters.map(t=>Jw(t)).join(",");return`${n.op}(${e})`}}function iN(n,e){return n instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&lr(r.value,i.value)}(n,e):n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&iN(s,i.filters[a]),!0):!1}(n,e):void Y()}function oN(n,e){let t=n.filters.concat(e);return Re.create(t,n.op)}function sN(n){return n instanceof we?function(t){return`${t.field.canonicalString()} ${t.op} ${qa(t.value)}`}(n):n instanceof Re?function(t){return t.op.toString()+" {"+t.getFilters().map(sN).join(" ,")+"}"}(n):"Filter"}var Xw=class extends we{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},eE=class extends we{constructor(e,t){super(e,"in",t),this.keys=aN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tE=class extends we{constructor(e,t){super(e,"not-in",t),this.keys=aN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function aN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var nE=class extends we{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return pl(t)&&fl(t.arrayValue,this.value)}},fp=class extends we{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}},rE=class extends we{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!fl(this.value.arrayValue,t)}},iE=class extends we{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fl(this.value.arrayValue,r))}};var oE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function sE(n,e=null,t=[],r=[],i=null,o=null,s=null){return new oE(n,e,t,r,i,o,s)}function zo(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ml(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qa(r)).join(",")),e.ue=t}return e.ue}function xl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Aq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YM(n.startAt,e.startAt)&&YM(n.endAt,e.endAt)}function pp(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gp(n,e){return n.filters.filter(t=>t instanceof we&&t.field.isEqual(e))}function ZM(n,e,t){let r=tp,i=!0;for(let o of gp(n,e)){let s=tp,a=!0;switch(o.op){case"<":case"<=":s=Cq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=tp}WM({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];WM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function JM(n,e,t){let r=Vi,i=!0;for(let o of gp(n,e)){let s=Vi,a=!0;switch(o.op){case">=":case">":s=Tq(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Vi}KM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];KM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ln=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function uN(n,e,t,r,i,o,s,a){return new Ln(n,e,t,r,i,o,s,a)}function ou(n){return new Ln(n)}function XM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $I(n){return n.collectionGroup!==null}function ja(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Pe(tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Go(o,r))}),t.has(tt.keyField().canonicalString())||e.ce.push(new Go(tt.keyField(),r))}return e.ce}function Wt(n){let e=G(n);return e.le||(e.le=Sq(e,ja(n))),e.le}function Sq(n,e){if(n.limitType==="F")return sE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Go(i.field,o)});let t=n.endAt?new dr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dr(n.startAt.position,n.startAt.inclusive):null;return sE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function aE(n,e){let t=n.filters.concat([e]);return new Ln(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mp(n,e,t){return new Ln(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nl(n,e){return xl(Wt(n),Wt(e))&&n.limitType===e.limitType}function cN(n){return`${zo(Wt(n))}|lt:${n.limitType}`}function Pa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>sN(i)).join(", ")}]`),Ml(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>qa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>qa(i)).join(",")),`Target(${r})`}(Wt(n))}; limitType=${n.limitType})`}function Pl(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ja(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=QM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ja(r),i)||r.endAt&&!function(s,a,u){let l=QM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ja(r),i))}(n,e)}function lN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dN(n){return(e,t)=>{let r=!1;for(let i of ja(n)){let o=Rq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Rq(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?qi(u,l):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var hr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}};var Mq=new je(z.comparator);function Xt(){return Mq}var hN=new je(z.comparator);function nl(...n){let e=hN;for(let t of n)e=e.insert(t.key,t);return e}function fN(n){let e=hN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sr(){return ol()}function pN(){return ol()}function ol(){return new hr(n=>n.toString(),(n,e)=>n.isEqual(e))}var xq=new je(z.comparator),Nq=new Pe(z.comparator);function de(...n){let e=Nq;for(let t of n)e=e.add(t);return e}var Pq=new Pe(ue);function qI(){return Pq}function HI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ll(e)?"-0":e}}function gN(n){return{integerValue:""+n}}function mN(n,e){return Wx(e)?gN(e):HI(n,e)}var Ga=class{constructor(){this._=void 0}};function kq(n,e,t){return n instanceof Hi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ng(o)&&(o=UI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Gr?vN(n,e):n instanceof zr?_N(n,e):function(i,o){let s=yN(i,o),a=ex(s)+ex(i.Pe);return Yw(s)&&Yw(i.Pe)?gN(a):HI(i.serializer,a)}(n,e)}function Oq(n,e,t){return n instanceof Gr?vN(n,e):n instanceof zr?_N(n,e):t}function yN(n,e){return n instanceof Gi?function(r){return Yw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Hi=class extends Ga{},Gr=class extends Ga{constructor(e){super(),this.elements=e}};function vN(n,e){let t=wN(e);for(let r of n.elements)t.some(i=>lr(i,r))||t.push(r);return{arrayValue:{values:t}}}var zr=class extends Ga{constructor(e){super(),this.elements=e}};function _N(n,e){let t=wN(e);for(let r of n.elements)t=t.filter(i=>!lr(i,r));return{arrayValue:{values:t}}}var Gi=class extends Ga{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ex(n){return $e(n.integerValue||n.doubleValue)}function wN(n){return pl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Wo=class{constructor(e,t){this.field=e,this.transform=t}};function Fq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Gr&&i instanceof Gr||r instanceof zr&&i instanceof zr?Ba(r.elements,i.elements,lr):r instanceof Gi&&i instanceof Gi?lr(r.Pe,i.Pe):r instanceof Hi&&i instanceof Hi}(n.transform,e.transform)}var uE=class{constructor(e,t){this.version=e,this.transformResults=t}},Ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var za=class{};function EN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Wi(n.key,Ze.none()):new zi(n.key,n.data,Ze.none());{let t=n.data,r=Ot.empty(),i=new Pe(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new jn(n.key,r,new dn(i.toArray()),Ze.none())}}function Vq(n,e,t){n instanceof zi?function(i,o,s){let a=i.value.clone(),u=nx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof jn?function(i,o,s){if(!rp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=nx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(IN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function sl(n,e,t,r){return n instanceof zi?function(o,s,a,u){if(!rp(o.precondition,s))return a;let l=o.value.clone(),d=rx(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof jn?function(o,s,a,u){if(!rp(o.precondition,s))return a;let l=rx(o.fieldTransforms,u,s),d=s.data;return d.setAll(IN(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return rp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Lq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=yN(r.transform,i||null);o!=null&&(t===null&&(t=Ot.empty()),t.set(r.field,o))}return t||null}function tx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ba(r,i,(o,s)=>Fq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var zi=class extends za{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},jn=class extends za{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function IN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function nx(n,e,t){let r=new Map;X(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Oq(s,a,t[i]))}return r}function rx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,kq(o,s,e))}return r}var Wi=class extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gl=class extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ml=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Vq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=pN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=EN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(t,r)=>tx(t,r))&&Ba(this.baseMutations,e.baseMutations,(t,r)=>tx(t,r))}},cE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){X(e.mutations.length===r.length);let i=function(){return xq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var yl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ut,Ee;function DN(n){switch(n){default:return Y();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function bN(n){if(n===void 0)return et("GRPC error has no .code"),N.UNKNOWN;switch(n){case ut.OK:return N.OK;case ut.CANCELLED:return N.CANCELLED;case ut.UNKNOWN:return N.UNKNOWN;case ut.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ut.INTERNAL:return N.INTERNAL;case ut.UNAVAILABLE:return N.UNAVAILABLE;case ut.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ut.NOT_FOUND:return N.NOT_FOUND;case ut.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ut.ABORTED:return N.ABORTED;case ut.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ut.DATA_LOSS:return N.DATA_LOSS;default:return Y()}}(Ee=ut||(ut={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var ix=null;function CN(){return new TextEncoder}var jq=new Ni([4294967295,4294967295],0);function ox(n){let e=CN().encode(n),t=new Cw;return t.update(e),new Uint8Array(t.digest())}function sx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ni([t,r],0),new Ni([i,o],0)]}var dE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bo(`Invalid padding: ${t}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ni.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ni.fromNumber(r)));return i.compare(jq)===1&&(i=new Ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ox(e),[r,i]=sx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=ox(e),[r,i]=sx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Bo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new je(ue),Xt(),de())}},_l=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var Ua=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},yp=class{constructor(e,t){this.targetId=e,this.me=t}},vp=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_p=class{constructor(){this.fe=0,this.ge=ux(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new _l(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ux()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,X(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},hE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=ax(),this.Qe=new je(ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(pp(o))if(r===0){let s=new z(o.path);this.Ue(t,s,dt.newNoDocument(s,ie.min()))}else X(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}ix?.et(function(d,f,g,y,I){var C,D,k,j,P,U;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Q=f.unchangedNames;return Q&&(Z.bloomFilter={applied:I===0,hashCount:(C=Q?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(j=(k=(D=Q?.bits)===null||D===void 0?void 0:D.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:(U=(P=Q?.bits)===null||P===void 0?void 0:P.padding)!==null&&U!==void 0?U:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Z}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Bi(r).toUint8Array()}catch(u){if(u instanceof dp)return Vn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dE(s,i,o)}catch(u){return Vn(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&pp(a.target)){let u=new z(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,dt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new vl(e,t,this.Qe,this.ke,r);return this.ke=Xt(),this.qe=ax(),this.Qe=new je(ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new _p,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pe(ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _p),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function ax(){return new je(z.comparator)}function ux(){return new je(z.comparator)}var Uq={asc:"ASCENDING",desc:"DESCENDING"},Bq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$q={and:"AND",or:"OR"},fE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function pE(n,e){return n.useProto3Json||Ml(e)?e:{value:e}}function Wa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qq(n,e){return Wa(n,e.toTimestamp())}function nt(n){return X(!!n),ie.fromTimestamp(function(t){let r=Hr(t);return new ze(r.seconds,r.nanos)}(n))}function GI(n,e){return gE(n,e).canonicalString()}function gE(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function AN(n){let e=Ie.fromString(n);return X(VN(e)),e}function wl(n,e){return GI(n.databaseId,e.path)}function ur(n,e){let t=AN(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(MN(t))}function SN(n,e){return GI(n.databaseId,e)}function RN(n){let e=AN(n);return e.length===4?Ie.emptyPath():MN(e)}function mE(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MN(n){return X(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cx(n,e,t){return{name:wl(n,e),fields:t.value.mapValue.fields}}function xN(n,e,t){let r=ur(n,e.name),i=nt(e.updateTime),o=e.createTime?nt(e.createTime):ie.min(),s=new Ot({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Hq(n,e){return"found"in e?function(r,i){X(!!i.found),i.found.name,i.found.updateTime;let o=ur(r,i.found.name),s=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):ie.min(),u=new Ot({mapValue:{fields:i.found.fields}});return dt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){X(!!i.missing),X(!!i.readTime);let o=ur(r,i.missing),s=nt(i.readTime);return dt.newNoDocument(o,s)}(n,e):Y()}function Gq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(X(d===void 0||typeof d=="string"),rt.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array),rt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?N.UNKNOWN:bN(l.code);return new O(d,l.message||"")}(s);t=new vp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ur(n,r.document.name),o=nt(r.document.updateTime),s=r.document.createTime?nt(r.document.createTime):ie.min(),a=new Ot({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ua(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ur(n,r.document),o=r.readTime?nt(r.readTime):ie.min(),s=dt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ur(n,r.document),o=r.removedTargetIds||[];t=new Ua([],o,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lE(i,o),a=r.targetId;t=new yp(a,s)}}return t}function El(n,e){let t;if(e instanceof zi)t={update:cx(n,e.key,e.value)};else if(e instanceof Wi)t={delete:wl(n,e.key)};else if(e instanceof jn)t={update:cx(n,e.key,e.data),updateMask:Zq(e.fieldMask)};else{if(!(e instanceof gl))return Y();t={verify:wl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Hi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y()}(n,e.precondition)),t}function yE(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ze.updateTime(nt(o.updateTime)):o.exists!==void 0?Ze.exists(o.exists):Ze.none()}(e.currentDocument):Ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME"),u=new Hi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new Gr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new zr(d)}else"increment"in a?u=new Gi(s,a.increment):Y();let l=tt.fromServerFormat(a.fieldPath);return new Wo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=ur(n,e.update.name),o=new Ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new dn(l.map(d=>tt.fromServerFormat(d)))}(e.updateMask);return new jn(i,o,s,t,r)}return new zi(i,o,t,r)}if(e.delete){let i=ur(n,e.delete);return new Wi(i,t)}if(e.verify){let i=ur(n,e.verify);return new gl(i,t)}return Y()}function zq(n,e){return n&&n.length>0?(X(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?nt(i.updateTime):nt(o);return s.isEqual(ie.min())&&(s=nt(o)),new uE(s,i.transformResults||[])}(t,e))):[]}function NN(n,e){return{documents:[SN(n,e.path)]}}function PN(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SN(n,i);let o=function(l){if(l.length!==0)return FN(Re.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ka(g.field),direction:Kq(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=pE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function kN(n){let e=RN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){X(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=ON(f);return g instanceof Re&&BI(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(I){return new Go(Oa(I.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ml(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new dr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new dr(y,g)}(t.endAt)),uN(e,i,s,o,a,"F",u,l)}function Wq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ON(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Oa(t.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oa(t.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oa(t.unaryFilter.field);return we.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oa(t.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return we.create(Oa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Re.create(t.compositeFilter.filters.map(r=>ON(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function Kq(n){return Uq[n]}function Qq(n){return Bq[n]}function Yq(n){return $q[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Oa(n){return tt.fromServerFormat(n.fieldPath)}function FN(n){return n instanceof we?function(t){if(t.op==="=="){if(zM(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(GM(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zM(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(GM(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:Qq(t.op),value:t.value}}}(n):n instanceof Re?function(t){let r=t.getFilters().map(i=>FN(i));return r.length===1?r[0]:{compositeFilter:{op:Yq(t.op),filters:r}}}(n):Y()}function Zq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ka=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wp=class{constructor(e){this.ct=e}};function Jq(n,e){let t;if(e.document)t=xN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=z.fromSegments(e.noDocument.path),i=Qo(e.noDocument.readTime);t=dt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{let r=z.fromSegments(e.unknownDocument.path),i=Qo(e.unknownDocument.version);t=dt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ze(i[0],i[1]);return ie.fromTimestamp(o)}(e.readTime)),t}function lx(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:wl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Wa(o,s.version.toTimestamp()),createTime:Wa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ko(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:t.path.toArray(),version:Ko(e.version)}}return r}function Ep(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ko(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qo(n){let e=new ze(n.seconds,n.nanoseconds);return ie.fromTimestamp(e)}function Lo(n,e){let t=(e.baseMutations||[]).map(o=>yE(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>yE(n.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new ml(e.batchId,i,t,r)}function rl(n){let e=Qo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Qo(n.lastLimboFreeSnapshotVersion):ie.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return X(o.documents.length===1),Wt(ou(RN(o.documents[0])))}(n.query):function(o){return Wt(kN(o))}(n.query),new Ka(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function LN(n,e){let t=Ko(e.snapshotVersion),r=Ko(e.lastLimboFreeSnapshotVersion),i;i=pp(e.target)?NN(n.ct,e.target):PN(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zI(n){let e=kN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mp(e,e.limit,"L"):e}function xw(n,e){return new yl(e.largestBatchId,yE(n.ct,e.overlayMutation))}function dx(n,e){let t=e.path.lastSegment();return[n,zt(e.path.popLast()),t]}function hx(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ko(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}var vE=class{getBundleMetadata(e,t){return fx(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Qo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return fx(e).put(function(i){return{bundleId:i.id,createTime:Ko(nt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return px(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:zI(o.bundledQuery),readTime:Qo(o.readTime)}}(r)})}saveNamedQuery(e,t){return px(e).put(function(i){return{name:i.name,readTime:Ko(nt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function fx(n){return yt(n,"bundles")}function px(n){return yt(n,"namedQueries")}var Ip=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Jc(e).get(dx(this.userId,t)).next(r=>r?xw(this.serializer,r):null)}getOverlays(e,t){let r=sr();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new yl(t,s);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(zt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Jc(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,t,r){let i=sr(),o=zt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Jc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=xw(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=sr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=xw(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Jc(e).put(function(i,o,s){let[a,u,l]=dx(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:El(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Jc(n){return yt(n,"documentOverlays")}var _E=class{Pt(e){return yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var $r=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At($e(e.integerValue));else if("doubleValue"in e){let r=$e(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ll(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Hr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?eN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):rg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At($e(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};$r.vt=new $r;function Xq(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function gx(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Xq(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var wE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=gx(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=gx(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},EE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},IE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},jo=class{constructor(){this.jt=new wE,this.Ht=new EE(this.jt),this.Jt=new IE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Uo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Pi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=mx(n.arrayValue,e.arrayValue),t!==0?t:(t=mx(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function mx(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Dp=class{constructor(e){this.Xt=new Pe((t,r)=>tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(X(e.collectionGroup===this.collectionId),this.nn)return!1;let t=qw(e);if(t!==void 0&&!this.sn(t))return!1;let r=Fo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Pe(tt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new La(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new La(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new La(r.field,r.dir==="asc"?0:1)));return new $a($a.UNKNOWN_ID,this.collectionId,t,cl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function jN(n){var e,t;if(X(n instanceof we||n instanceof Re),n instanceof we){if(n instanceof fp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>we.create(n.field,"==",o)))||[];return Re.create(i,"or")}return n}let r=n.filters.map(i=>jN(i));return Re.create(r,n.op)}function e4(n){if(n.getFilters().length===0)return[];let e=CE(jN(n));return X(UN(e)),DE(e)||bE(e)?[e]:e.getFilters()}function DE(n){return n instanceof we}function bE(n){return n instanceof Re&&BI(n)}function UN(n){return DE(n)||bE(n)||function(t){if(t instanceof Re&&Zw(t)){for(let r of t.getFilters())if(!DE(r)&&!bE(r))return!1;return!0}return!1}(n)}function CE(n){if(X(n instanceof we||n instanceof Re),n instanceof we)return n;if(n.filters.length===1)return CE(n.filters[0]);let e=n.filters.map(r=>CE(r)),t=Re.create(e,n.op);return t=bp(t),UN(t)?t:(X(t instanceof Re),X(Ha(t)),X(t.filters.length>1),t.filters.reduce((r,i)=>WI(r,i)))}function WI(n,e){let t;return X(n instanceof we||n instanceof Re),X(e instanceof we||e instanceof Re),t=n instanceof we?e instanceof we?function(i,o){return Re.create([i,o],"and")}(n,e):yx(n,e):e instanceof we?yx(e,n):function(i,o){if(X(i.filters.length>0&&o.filters.length>0),Ha(i)&&Ha(o))return oN(i,o.getFilters());let s=Zw(i)?i:o,a=Zw(i)?o:i,u=s.filters.map(l=>WI(l,a));return Re.create(u,"or")}(n,e),bp(t)}function yx(n,e){if(Ha(e))return oN(e,n.getFilters());{let t=e.filters.map(r=>WI(n,r));return Re.create(t,"or")}}function bp(n){if(X(n instanceof we||n instanceof Re),n instanceof we)return n;let e=n.getFilters();if(e.length===1)return bp(e[0]);if(rN(n))return n;let t=e.map(i=>bp(i)),r=[];return t.forEach(i=>{i instanceof we?r.push(i):i instanceof Re&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,n.op)}var TE=class{constructor(){this.un=new Il}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(Tn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Il=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pe(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(Ie.comparator)).toArray()}};var Yf=new Uint8Array(0),AE=class{constructor(e,t){this.databaseId=t,this.cn=new Il,this.ln=new hr(r=>zo(r),(r,i)=>xl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:zt(i)};return vx(e).put(o)}return R.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[$x(t),""],!1,!0);return vx(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(or(s.parent))}return r})}addFieldIndex(e,t){let r=Xc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ma(e);return o.next(a=>{s.put(hx(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Xc(e),i=Ma(e),o=Ra(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Xc(e),r=Ra(e),i=Ma(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Dp(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ra(e),i=!0,o=new Map;return R.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return R.forEach(o,(u,l)=>{V("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(u)} to execute ${zo(t)}`);let d=function(P,U){let Z=qw(U);if(Z===void 0)return null;for(let Q of gp(P,Z.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,u),f=function(P,U){let Z=new Map;for(let Q of Fo(U))for(let E of gp(P,Q.fieldPath))switch(E.op){case"==":case"in":Z.set(Q.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Z.set(Q.fieldPath.canonicalString(),E.value),Array.from(Z.values())}return null}(l,u),g=function(P,U){let Z=[],Q=!0;for(let E of Fo(U)){let v=E.kind===0?ZM(P,E.fieldPath,P.startAt):JM(P,E.fieldPath,P.startAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new dr(Z,Q)}(l,u),y=function(P,U){let Z=[],Q=!0;for(let E of Fo(U)){let v=E.kind===0?JM(P,E.fieldPath,P.endAt):ZM(P,E.fieldPath,P.endAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new dr(Z,Q)}(l,u),I=this.In(u,l,g),C=this.In(u,l,y),D=this.Tn(u,l,f),k=this.En(u.indexId,d,I,g.inclusive,C,y.inclusive,D);return R.forEach(k,j=>r.G(j,t.limit).next(P=>{P.forEach(U=>{let Z=z.fromSegments(U.documentKey);s.has(Z)||(s=s.add(Z),a.push(Z))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=e4(Re.create(e.filters,"and")).map(r=>sE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):Yf,y=this.An(e,g,r[f%l],i),I=this.Rn(e,g,o[f%l],s),C=a.map(D=>this.An(e,g,D,!0));d.push(...this.createRange(y,I,C))}return d}An(e,t,r,i){let o=new Uo(e,z.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Uo(e,z.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Dp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return R.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Pe(tt.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new jo;for(let i of Fo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);$r.vt.It(o,s)}return r.zt()}dn(e){let t=new jo;return $r.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new jo;return $r.vt.It(Ho(this.databaseId,t),r.Yt(function(o){let s=Fo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new jo);let o=0;for(let s of Fo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&pl(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);$r.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new jo;u.seed(a.zt()),$r.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Xc(e),i=Ma(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return R.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new cl(f.sequenceNumber,new Tn(Qo(f.readTime),new z(or(f.documentKey)),f.largestBatchId)):cl.empty(),y=d.fields.map(([I,C])=>new La(tt.fromServerFormat(I),C));return new $a(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Xc(e),o=Ma(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>R.forEach(a,u=>o.put(hx(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return R.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?R.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return Ra(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ra(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ra(e),o=new Pe(Pi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Uo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Pe(Pi),i=this.Vn(t,e);if(i==null)return r;let o=qw(t);if(o!=null){let s=e.data.field(o.fieldPath);if(pl(s))for(let a of s.arrayValue.values||[])r=r.add(new Uo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Uo(t.indexId,e.key,Yf,i));return r}bn(e,t,r,i,o){V("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),I=l.getIterator(),C=Sa(y),D=Sa(I);for(;C||D;){let k=!1,j=!1;if(C&&D){let P=d(C,D);P<0?j=!0:P>0&&(k=!0)}else C!=null?j=!0:k=!0;k?(f(D),D=Sa(I)):j?(g(C),C=Sa(y)):(C=Sa(y),D=Sa(I))}}(i,o,Pi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),R.waitFor(s)}yn(e){let t=1;return Ma(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Pi(s,a)).filter((s,a,u)=>!a||Pi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Pi(s,e),u=Pi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Yf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Yf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Pi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_x)}getMinOffset(e,t){return R.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Y())).next(_x)}};function vx(n){return yt(n,"collectionParents")}function Ra(n){return yt(n,"indexEntries")}function Xc(n){return yt(n,"indexConfiguration")}function Ma(n){return yt(n,"indexState")}function _x(n){X(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;VI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}var wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function BN(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{X(a===1)}));let l=[];for(let d of t.mutations){let f=Kx(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return R.waitFor(o).next(()=>l)}function Cp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Y();e=n.noDocument}return JSON.stringify(e).length}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(41943040,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);var Tp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){X(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Fa(e),s=ki(e);return s.add({}).next(a=>{X(typeof a=="number");let u=new ml(a,t,r,i),l=function(y,I,C){let D=C.baseMutations.map(j=>El(y.ct,j)),k=C.mutations.map(j=>El(y.ct,j));return{userId:I,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:D,mutations:k}}(this.serializer,this.userId,u),d=[],f=new Pe((g,y)=>ue(g.canonicalString(),y.canonicalString()));for(let g of i){let y=Kx(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,sq))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),R.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return ki(e).get(t).next(r=>r?(X(r.userId===this.userId),Lo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ki(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(X(a.batchId>=r),o=Lo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ki(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).U("userMutationsIndex",t).next(r=>r.map(i=>Lo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ep(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Fa(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=or(d);if(l===this.userId&&t.path.isEqual(g))return ki(e).get(f).next(y=>{if(!y)throw Y();X(y.userId===this.userId),o.push(Lo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(ue),i=[];return t.forEach(o=>{let s=ep(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Fa(e).J({range:a},(l,d,f)=>{let[g,y,I]=l,C=or(y);g===this.userId&&o.path.isEqual(C)?r=r.add(I):f.done()});i.push(u)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ep(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Pe(ue);return Fa(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,I=or(g);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ki(e).get(o).next(s=>{if(s===null)throw Y();X(s.userId===this.userId),r.push(Lo(this.serializer,s))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BN(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Fa(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=or(o[1]);i.push(u)}else a.done()}).next(()=>{X(i.length===0)})})}containsKey(e,t){return $N(e,this.userId,t)}Nn(e){return qN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function $N(n,e,t){let r=ep(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Fa(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function ki(n){return yt(n,"mutations")}function Fa(n){return yt(n,"documentMutations")}function qN(n){return yt(n,"mutationQueues")}var Qa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var SE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Qa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ie.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(X(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return xa(e).J((s,a)=>{let u=rl(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>R.waitFor(o)).next(()=>i)}forEachTarget(e,t){return xa(e).J((r,i)=>{let o=rl(i);t(o)})}qn(e){return Ex(e).get("targetGlobalKey").next(t=>(X(t!==null),t))}Qn(e,t){return Ex(e).put("targetGlobalKey",t)}Kn(e,t){return xa(e).put(LN(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=zo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return xa(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=rl(a);xl(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Oi(e);return t.forEach(s=>{let a=zt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),R.waitFor(i)}removeMatchingKeys(e,t,r){let i=Oi(e);return R.forEach(t,o=>{let s=zt(o.path);return R.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Oi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Oi(e),o=de();return i.J({range:r,H:!0},(s,a,u)=>{let l=or(s[1]),d=new z(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=zt(t.path),i=IDBKeyRange.bound([r],[$x(r)],!1,!0),o=0;return Oi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return xa(e).get(t).next(r=>r?rl(r):null)}};function xa(n){return yt(n,"targets")}function Ex(n){return yt(n,"targetGlobal")}function Oi(n){return yt(n,"targetDocuments")}function Ix([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var RE=class{constructor(e){this.Un=e,this.buffer=new Pe(Ix),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ix(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ME=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yi(t)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Qi(t)}yield this.Hn(3e5)}))}},xE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(ln.oe);let r=new RE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Na()<=qn.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function t4(n,e){return new xE(n,e)}var NE=class{constructor(e,t){this.db=e,this.garbageCollector=t4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Zf(e,r)}removeReference(e,t,r){return Zf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Zf(e,t)}nr(e,t){return function(i,o){let s=!1;return qN(i).Y(a=>$N(i,a,o).next(u=>(u&&(s=!0),R.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ie.min()),Oi(e).delete(function(f){return[0,zt(f.path)]}(s))))});i.push(u)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Zf(e,t)}tr(e,t){let r=Oi(e),i,o=ln.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==ln.oe&&t(new z(or(i)),o),o=l,i=u):o=ln.oe}).next(()=>{o!==ln.oe&&t(new z(or(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Zf(n,e){return Oi(n).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Ap=class{constructor(){this.changes=new hr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var PE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Oo(e).put(r)}removeEntry(e,t,r){return Oo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ep(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=dt.newInvalidDocument(t);return Oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(el(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:dt.newInvalidDocument(t)};return Oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(el(t))},(i,o)=>{r={document:this.ir(t,o),size:Cp(o)}}).next(()=>r)}getEntries(e,t){let r=Xt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Xt(),i=new je(z.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Cp(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return R.resolve();let i=new Pe(Cx);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(el(i.first()),el(i.last())),s=i.getIterator(),a=s.getNext();return Oo(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=z.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Cx(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(el(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Xt();for(let f of l){let g=this.ir(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Pl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Xt(),s=bx(t,r),a=bx(t,Tn.max());return Oo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new kE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Dx(e).get("remoteDocumentGlobalKey").next(t=>(X(!!t),t))}rr(e,t){return Dx(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=Jq(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return dt.newInvalidDocument(e)}};function HN(n){return new PE(n)}var kE=class extends Ap{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new hr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Pe((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=lx(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Cp(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=lx(this.cr.serializer,s.convertToNoDocument(ie.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Dx(n){return yt(n,"remoteDocumentGlobal")}function Oo(n){return yt(n,"remoteDocumentsV14")}function el(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bx(n,e){let t=e.documentKey.path.toArray();return[n,Ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cx(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ue(t[o],r[o]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var OE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sl(r.mutation,i,dn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=sr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=nl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=sr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Xt(),s=ol(),a=function(){return ol()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof jn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),sl(d.mutation,l,d.mutation.getFieldMask(),ze.now())):s.set(l.key,dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new OE(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ol(),i=new je((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||dn.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=pN();d.forEach(g=>{if(!o.has(g)){let y=EN(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$I(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(sr()),a=-1,u=o;return s.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(d=>({batchId:a,changes:fN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=nl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=nl();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,u=>{let l=function(f,g){return new Ln(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,dt.newInvalidDocument(d)))});let a=nl();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&sl(d.mutation,l,dn.empty(),ze.now()),Pl(t,l)&&(a=a.insert(u,l))}),a})}};var FE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:zI(i.bundledQuery),readTime:nt(i.readTime)}}(t)),R.resolve()}};var VE=class{constructor(){this.overlays=new je(z.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sr();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=sr(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new je((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=sr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=sr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new yl(t,r));let o=this.Ir.get(t);o===void 0&&(o=de(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var LE=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Dl=class{constructor(){this.Tr=new Pe(ct.Er),this.dr=new Pe(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ct(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ct(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new Ie([])),r=new ct(t,e),i=new ct(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new Ie([])),r=new ct(t,e),i=new ct(t,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ct(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ct=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ue(e.wr,t.wr)}static Ar(e,t){return ue(e.wr,t.wr)||z.comparator(e.key,t.key)}};var jE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pe(ct.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ml(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ct(t,0),i=new ct(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(ue);return t.forEach(i=>{let o=new ct(i,0),s=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new ct(new z(o),0),a=new Pe(ue);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){X(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ct(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var UE=class{constructor(e){this.Mr=e,this.docs=function(){return new je(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let r=Xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xt(),s=t.path,a=new z(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||VI(Hx(d),r)<=0||(i.has(d.key)||Pl(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BE(this)}getSize(e){return R.resolve(this.size)}},BE=class extends Ap{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var $E=class{constructor(e){this.persistence=e,this.Nr=new hr(t=>zo(t),xl),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dl,this.targetCount=0,this.kr=Qa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Qa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var Rp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ln(0),this.Kr=!1,this.Kr=!0,this.$r=new LE,this.referenceDelegate=e(this),this.Ur=new $E(this),this.indexManager=new TE,this.remoteDocumentCache=function(i){return new UE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wp(t),this.Gr=new FE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new jE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new qE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},qE=class extends up{constructor(e){super(),this.currentSequenceNumber=e}},Mp=class n{constructor(e){this.persistence=e,this.Jr=new Dl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var HE=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new cp("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BM,{unique:!0}),u.createObjectStore("documentMutations")}(e),Tx(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Tx(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BM,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return R.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:vq});l.createIndex("collectionPathOverlayIndex",_q,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",wq,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:aq});l.createIndex("documentKeyIndex",uq),l.createIndex("collectionGroupIndex",cq)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:pq}).createIndex("sequenceNumberIndex",gq,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:mq}).createIndex("documentKeyIndex",yq,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Cp(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>R.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>R.forEach(a,u=>{X(u.userId===o.userId);let l=Lo(this.serializer,u);return BN(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ie(s),l=function(f){return[0,zt(f)]}(u);o.push(t.get(l).next(d=>d?R.resolve():(f=>t.put({targetId:0,path:zt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>R.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:fq});let r=t.store("collectionParents"),i=new Il,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:zt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ie(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=or(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=rl(i),s=LN(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new z(Ie.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):Y()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=HN(this.serializer),o=new Rp(Mp.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:de();Lo(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),R.forEach(a,(u,l)=>{let d=new lt(l),f=Ip.lt(this.serializer,d),g=o.getIndexManager(d),y=Tp.lt(d,this.serializer,g,o.referenceDelegate);return new Sp(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new dl(t,ln.oe),u).next()})})}};function Tx(n){n.createObjectStore("targetDocuments",{keyPath:dq}).createIndex("documentTargetsIndex",hq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lq,{unique:!0}),n.createObjectStore("targetGlobal")}var Nw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GE=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new O(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NE(this,i),this.Ai=t+"main",this.serializer=new wp(u),this.Ri=new Ui(this.Ai,this.hi,new HE(this.serializer)),this.$r=new _E,this.Ur=new SE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HN(this.serializer),this.Gr=new vE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,Nw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Yi(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return tl(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return Jf(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=yt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):tl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,Nw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new dl(e,ln.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Jf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Tp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ip.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?Dq:u===16?Iq:u===15?jI:u===14?Zx:u===13?Yx:u===12?Eq:u===11?Qx:void Y()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new dl(a,this.Qr?this.Qr.next():ln.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(N.FAILED_PRECONDITION,Gx);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return tl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(N.FAILED_PRECONDITION,Nw)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tl(e).put("owner",t)}static D(){return Ui.D()}bi(e){let t=tl(e);return t.get("owner").next(r=>this.vi(r)?(V("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;_m()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function tl(n){return yt(n,"owner")}function Jf(n){return yt(n,"clientMetadata")}function KI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var zE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var WE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _m()?8:zx($u())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new WE;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Na()<=qn.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Na()<=qn.DEBUG&&V("QueryEngine","Query:",Pa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Na()<=qn.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(t))):R.resolve())}Yi(e,t){if(XM(t))return R.resolve(null);let r=Wt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=mp(t,null,"F"),r=Wt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,mp(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return XM(t)||i.isEqual(ie.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?R.resolve(null):(Na()<=qn.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pa(t)),this.rs(e,s,t,qx(i,-1)).next(a=>a))})}ts(e,t){let r=new Pe(dN(e));return t.forEach((i,o)=>{Pl(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Na()<=qn.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Pa(t)),this.Ji.getDocumentsMatchingQuery(e,t,Tn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var KE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new je(ue),this._s=new hr(o=>zo(o),xl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function GN(n,e,t,r){return new KE(n,e,t,r)}function zN(n,e){return M(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function n4(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=R.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(u,I)).next(C=>{let D=l.docVersions.get(I);X(D!==null),C.version.compareTo(D)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function WN(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function r4(n,e){let t=G(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,D,k){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=Xt(),l=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(KN(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(ie.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function KN(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Xt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function i4(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ya(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ka(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Za(n,e,t){return M(this,null,function*(){let r=G(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Yi(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Np(n,e,t){let r=G(n),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=G(u),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,Wt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:de())).next(a=>(ZN(r,lN(e),a),{documents:a,Ts:o})))}function QN(n,e){let t=G(n),r=G(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function YN(n,e){let t=G(n),r=t.us.get(e)||ie.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,qx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ZN(t,e,i),i))}function ZN(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function o4(n,e,t,r){return M(this,null,function*(){let i=G(n),o=de(),s=Xt();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ya(i,function(d){return Wt(ou(Ie.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>KN(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function s4(r,i){return M(this,arguments,function*(n,e,t=de()){let o=yield Ya(n,Wt(zI(e.bundledQuery))),s=G(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=nt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(rt.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function Ax(n,e){return`firestore_clients_${n}_${e}`}function Sx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pw(n,e){return`firestore_targets_${n}_${e}`}var Pp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(et("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},al=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},kp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=qI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Wx(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},QE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}},bl=class{constructor(){this.activeTargetIds=qI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ul=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new je(ue),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=Ax(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new bl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Ax(this.persistenceKey,r));if(i){let o=kp.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Pw(this.persistenceKey,e));if(i){let o=al.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pw(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return V("SharedClientState","READ",e,t),t}setItem(e,t){V("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(V("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=ln.oe;if(o!=null)try{let a=JSON.parse(o);X(typeof a=="number"),s=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==ln.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Pp(this.currentUser,e,t,r),o=Sx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=Sx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Pw(this.persistenceKey,e),o=new al(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return kp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Pp.Rs(new lt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return al.Rs(i,t)}Ls(e){return QE.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=qI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Op=class{constructor(){this.so=new bl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var YE=class{_o(e){}shutdown(){}};var Fp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xf=null;function kw(){return Xf===null?Xf=function(){return 268435456+Math.round(2147483648*Math.random())}():Xf++,"0x"+Xf.toString(16)}var a4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ZE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var kt="WebChannelConnection",JE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=kw(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(V("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Vn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+iu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=a4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=kw();return new Promise((s,a)=>{let u=new Tw;u.setWithCredentials(!0),u.listenOnce(Aw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zc.NO_ERROR:let d=u.getResponseJson();V(kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Zc.TIMEOUT:V(kt,`RPC '${e}' ${o} timed out`),a(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:let f=u.getStatus();if(V(kt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let I=function(D){let k=D.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(y.status);a(new O(I,y.message))}else a(new O(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(N.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{V(kt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);V(kt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=kw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mw(),a=Rw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");V(kt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,I=new ZE({Io:D=>{y?V(kt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(V(kt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),V(kt,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},To:()=>f.close()}),C=(D,k,j)=>{D.listen(k,P=>{try{j(P)}catch(U){setTimeout(()=>{throw U},0)}})};return C(f,Aa.EventType.OPEN,()=>{y||(V(kt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),C(f,Aa.EventType.CLOSE,()=>{y||(y=!0,V(kt,`RPC '${e}' stream ${i} transport closed`),I.So())}),C(f,Aa.EventType.ERROR,D=>{y||(y=!0,Vn(kt,`RPC '${e}' stream ${i} transport errored:`,D),I.So(new O(N.UNAVAILABLE,"The operation could not be completed")))}),C(f,Aa.EventType.MESSAGE,D=>{var k;if(!y){let j=D.data[0];X(!!j);let P=j,U=P.error||((k=P[0])===null||k===void 0?void 0:k.error);if(U){V(kt,`RPC '${e}' stream ${i} received error:`,U);let Z=U.status,Q=function(_){let b=ut[_];if(b!==void 0)return bN(b)}(Z),E=U.message;Q===void 0&&(Q=N.INTERNAL,E="Unknown error status: "+Z+" with message "+U.message),y=!0,I.So(new O(Q,E)),f.close()}else V(kt,`RPC '${e}' stream ${i} received:`,j),I.bo(j)}}),C(a,Sw.STAT_EVENT,D=>{D.stat===Qf.PROXY?V(kt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Qf.NOPROXY&&V(kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function JN(){return typeof window<"u"?window:null}function ip(){return typeof document<"u"?document:null}function kl(n){return new fE(n,!0)}var Cl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Vp=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Cl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(et(t.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XE=class extends Vp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Gq(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?nt(s.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=mE(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=pp(u)?{documents:NN(o,u)}:{query:PN(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=TN(o,s.resumeToken);let l=pE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Wa(o,s.snapshotVersion.toTimestamp());let l=pE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Wq(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=mE(this.serializer),t.removeTarget=e,this.a_(t)}},eI=class extends Vp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return X(!!e.streamToken),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=zq(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=mE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>El(this.serializer,r))};this.a_(t)}};var tI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,gE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,gE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},nI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(et(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var rI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){Zi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=G(u);l.L_.add(4),yield su(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ol(l)})}(this))}))}),this.q_=new nI(r,i)}};function Ol(n){return M(this,null,function*(){if(Zi(n))for(let e of n.B_)yield e(!0)})}function su(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ig(n,e){let t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ZI(t)?YI(t):uu(t).r_()&&QI(t,e))}function Ja(n,e){let t=G(n),r=uu(t);t.N_.delete(e),r.r_()&&XN(t,e),t.N_.size===0&&(r.r_()?r.o_():Zi(t)&&t.q_.set("Unknown"))}function QI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}uu(n).A_(e)}function XN(n,e){n.Q_.xe(e),uu(n).R_(e)}function YI(n){n.Q_=new hE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),uu(n).start(),n.q_.v_()}function ZI(n){return Zi(n)&&!uu(n).n_()&&n.N_.size>0}function Zi(n){return G(n).L_.size===0}function eP(n){n.Q_=void 0}function u4(n){return M(this,null,function*(){n.q_.set("Online")})}function c4(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{QI(n,e)})})}function l4(n,e){return M(this,null,function*(){eP(n),ZI(n)?(n.q_.M_(e),YI(n)):n.q_.set("Unknown")})}function d4(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof vp&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lp(n,r)}else if(e instanceof Ua?n.Q_.Ke(e):e instanceof yp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield WN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(rt.EMPTY_BYTE_STRING,d.snapshotVersion)),XN(o,u);let f=new Ka(d.target,u,l,d.sequenceNumber);QI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Lp(n,r)}})}function Lp(n,e,t){return M(this,null,function*(){if(!Yi(e))throw e;n.L_.add(1),yield su(n),n.q_.set("Offline"),t||(t=()=>WN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ol(n)}))})}function tP(n,e){return e().catch(t=>Lp(n,t,e))}function au(n){return M(this,null,function*(){let e=G(n),t=Ki(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;h4(e);)try{let i=yield i4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,f4(e,i)}catch(i){yield Lp(e,i)}nP(e)&&rP(e)})}function h4(n){return Zi(n)&&n.O_.length<10}function f4(n,e){n.O_.push(e);let t=Ki(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nP(n){return Zi(n)&&!Ki(n).n_()&&n.O_.length>0}function rP(n){Ki(n).start()}function p4(n){return M(this,null,function*(){Ki(n).p_()})}function g4(n){return M(this,null,function*(){let e=Ki(n);for(let t of n.O_)e.m_(t.mutations)})}function m4(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=cE.from(r,e,t);yield tP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield au(n)})}function y4(n,e){return M(this,null,function*(){e&&Ki(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return DN(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();Ki(r).s_(),yield tP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield au(r)}})}(n,e)),nP(n)&&rP(n)})}function Rx(n,e){return M(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Zi(t);t.L_.add(3),yield su(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ol(t)})}function iI(n,e){return M(this,null,function*(){let t=G(n);e?(t.L_.delete(2),yield Ol(t)):e||(t.L_.add(2),yield su(t),t.q_.set("Unknown"))})}function uu(n){return n.K_||(n.K_=function(t,r,i){let o=G(t);return o.w_(),new XE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:u4.bind(null,n),Ro:c4.bind(null,n),mo:l4.bind(null,n),d_:d4.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),ZI(n)?YI(n):n.q_.set("Unknown")):(yield n.K_.stop(),eP(n))}))),n.K_}function Ki(n){return n.U_||(n.U_=function(t,r,i){let o=G(t);return o.w_(),new eI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:p4.bind(null,n),mo:y4.bind(null,n),f_:g4.bind(null,n),g_:m4.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield au(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var oI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cu(n,e){if(et("AsyncQueue",`${e}: ${n}`),Yi(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var jp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=nl(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Up=class{constructor(){this.W_=new je(z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Xa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,jp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var sI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},aI=class{constructor(){this.queries=Mx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=G(t),o=i.queries;i.queries=Mx(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function Mx(){return new hr(n=>cN(n),Nl)}function JI(n,e){return M(this,null,function*(){let t=G(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new sI,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=cu(s,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&eD(t)})}function XI(n,e){return M(this,null,function*(){let t=G(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function v4(n,e){let t=G(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&eD(t)}function _4(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function eD(n){n.Y_.forEach(e=>{e.next()})}var uI,xx;(xx=uI||(uI={})).ea="default",xx.Cache="cache";var Tl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uI.Cache}};var cI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Bp=class{constructor(e){this.serializer=e}Es(e){return ur(this.serializer,e)}ds(e){return e.metadata.exists?xN(this.serializer,e.document,!1):dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nt(e)}},lI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ie.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Bp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||de()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield o4(this.localStore,new Bp(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield s4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function iP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var $p=class{constructor(e){this.key=e}},qp=class{constructor(e){this.key=e}},Hp=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=dN(e),this.Ra=new jp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Up,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Pl(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),D=!1;g&&y?g.data.isEqual(y.data)?I!==C&&(r.track({type:3,doc:y}),D=!0):this.ga(g,y)||(r.track({type:2,doc:y}),D=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),D=!0):g&&!y&&(r.track({type:1,doc:g}),D=!0,(u||l)&&(a=!0)),D&&(y?(s=s.add(y),o=C?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,I){let C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return C(y)-C(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Xa(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Up,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new qp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new $p(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Xa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},dI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},hI=class{constructor(e){this.key=e,this.va=!1}},fI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new hr(a=>cN(a),Nl),this.Ma=new Map,this.xa=new Set,this.Oa=new je(z.comparator),this.Na=new Map,this.La=new Dl,this.Ba={},this.ka=new Map,this.qa=Qa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function w4(n,e,t=!0){return M(this,null,function*(){let r=og(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield oP(r,e,t,!0),i})}function E4(n,e){return M(this,null,function*(){let t=og(n);yield oP(t,e,!0,!1)})}function oP(n,e,t,r){return M(this,null,function*(){let i=yield Ya(n.localStore,Wt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield tD(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&ig(n.remoteStore,i),a})}function tD(n,e,t,r,i){return M(this,null,function*(){n.Ka=(f,g,y)=>function(C,D,k,j){return M(this,null,function*(){let P=D.view.ma(k);P.ns&&(P=yield Np(C.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,P)));let U=j&&j.targetChanges.get(D.targetId),Z=j&&j.targetMismatches.get(D.targetId)!=null,Q=D.view.applyChanges(P,C.isPrimaryClient,U,Z);return pI(C,D.targetId,Q.wa),Q.snapshot})}(n,f,g,y);let o=yield Np(n.localStore,e,!0),s=new Hp(e,o.Ts),a=s.ma(o.documents),u=_l.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);pI(n,t,l.wa);let d=new dI(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function I4(n,e,t){return M(this,null,function*(){let r=G(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Nl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Za(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ja(r.remoteStore,i.targetId),eu(r,i.targetId)}).catch(Qi))):(eu(r,i.targetId),yield Za(r.localStore,i.targetId,!0))})}function D4(n,e){return M(this,null,function*(){let t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ja(t.remoteStore,r.targetId))})}function b4(n,e,t){return M(this,null,function*(){let r=oD(n);try{let i=yield function(s,a){let u=G(s),l=ze.now(),d=a.reduce((y,I)=>y.add(I.key),de()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Xt(),C=de();return u.cs.getEntries(y,d).next(D=>{I=D,I.forEach((k,j)=>{j.isValidDocument()||(C=C.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(D=>{f=D;let k=[];for(let j of a){let P=Lq(j,f.get(j.key).overlayedDocument);P!=null&&k.push(new jn(j.key,P,nN(P.value.mapValue),Ze.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(D=>{g=D;let k=D.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(y,D.batchId,k)})}).then(()=>({batchId:g.batchId,changes:fN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new je(ue)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Qr(r,i.changes),yield au(r.remoteStore)}catch(i){let o=cu(i,"Failed to persist write");t.reject(o)}})}function sP(n,e){return M(this,null,function*(){let t=G(n);try{let r=yield r4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?X(s.va):i.removedDocuments.size>0&&(X(s.va),s.va=!1))}),yield Qr(t,r,e)}catch(r){yield Qi(r)}})}function Nx(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=G(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&eD(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function C4(n,e,t){return M(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new je(z.comparator);s=s.insert(o,dt.newNoDocument(o,ie.min()));let a=de().add(o),u=new vl(ie.min(),new Map,new je(ue),s,a);yield sP(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),iD(r)}else yield Za(r.localStore,e,!1).then(()=>eu(r,e,t)).catch(Qi)})}function T4(n,e){return M(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield n4(t.localStore,e);rD(t,r,null),nD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qr(t,i)}catch(i){yield Qi(i)}})}function A4(n,e,t){return M(this,null,function*(){let r=G(n);try{let i=yield function(s,a){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(X(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);rD(r,e,t),nD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qr(r,i)}catch(i){yield Qi(i)}})}function S4(n,e){return M(this,null,function*(){let t=G(n);Zi(t.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=G(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=cu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function nD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function rD(n,e,t){let r=G(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function eu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||aP(n,r)})}function aP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ja(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),iD(n))}function pI(n,e,t){for(let r of t)r instanceof $p?(n.La.addReference(r.key,e),R4(n,r)):r instanceof qp?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||aP(n,r.key)):Y()}function R4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),iD(n))}function iD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(Ie.fromString(e)),r=n.qa.next();n.Na.set(r,new hI(t)),n.Oa=n.Oa.insert(t,r),ig(n.remoteStore,new Ka(Wt(ou(t.path)),r,"TargetPurposeLimboResolution",ln.oe))}}function Qr(n,e,t){return M(this,null,function*(){let r=G(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=zE.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let d=G(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>R.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Yi(f))throw f;V("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),I=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,C)}}})}(r.localStore,o))})}function M4(n,e){return M(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield zN(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new O(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qr(t,r.hs)}})}function x4(n,e){let t=G(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function N4(n,e){return M(this,null,function*(){let t=G(n),r=yield Np(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&pI(t,e.targetId,i.wa),i})}function P4(n,e){return M(this,null,function*(){let t=G(n);return YN(t.localStore,e).then(r=>Qr(t,r))})}function k4(n,e,t,r){return M(this,null,function*(){let i=G(n),o=yield function(a,u){let l=G(a),d=G(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield au(i.remoteStore):t==="acknowledged"||t==="rejected"?(rD(i,e,r||null),nD(i,e),function(a,u){G(G(a).mutationQueue).On(u)}(i.localStore,e)):Y(),yield Qr(i,o)):V("SyncEngine","Cannot apply mutation batch with id: "+e)})}function O4(n,e){return M(this,null,function*(){let t=G(n);if(og(t),oD(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Px(t,r.toArray());t.Qa=!0,yield iI(t.remoteStore,!0);for(let o of i)ig(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(eu(t,s),Za(t.localStore,s,!0))),Ja(t.remoteStore,s)}),yield i,yield Px(t,r),function(s){let a=G(s);a.Na.forEach((u,l)=>{Ja(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new je(z.comparator)}(t),t.Qa=!1,yield iI(t.remoteStore,!1)}})}function Px(n,e,t){return M(this,null,function*(){let r=G(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ya(r.localStore,Wt(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield N4(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield QN(r.localStore,s);a=yield Ya(r.localStore,l),yield tD(r,uP(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function uP(n){return uN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function F4(n){return function(t){return G(G(t).persistence).Qi()}(G(n).localStore)}function V4(n,e,t,r){return M(this,null,function*(){let i=G(n);if(i.Qa)return void V("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield YN(i.localStore,lN(o[0])),a=vl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);yield Qr(i,s,a);break}case"rejected":yield Za(i.localStore,e,!0),eu(i,e,r);break;default:Y()}})}function L4(n,e,t){return M(this,null,function*(){let r=og(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){V("SyncEngine","Adding an already active target "+i);continue}let o=yield QN(r.localStore,i),s=yield Ya(r.localStore,o);yield tD(r,uP(o),s.targetId,!1,s.resumeToken),ig(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Za(r.localStore,i,!1).then(()=>{Ja(r.remoteStore,i),eu(r,i)}).catch(Qi))}})}function og(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C4.bind(null,e),e.Ca.d_=v4.bind(null,e.eventManager),e.Ca.$a=_4.bind(null,e.eventManager),e}function oD(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A4.bind(null,e),e}function j4(n,e,t){let r=G(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,I){let C=G(y),D=nt(I.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",k=>C.Gr.getBundleMetadata(k,I.id)).then(k=>!!k&&k.createTime.compareTo(D)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(iP(u));let l=new lI(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield Qr(o,f.Ia,void 0),yield function(y,I){let C=G(y);return C.persistence.runTransaction("Save bundle","readwrite",D=>C.Gr.saveBundleMetadata(D,I))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Vn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var gI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=kl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return GN(this.persistence,new xp,t.initialUser,this.serializer)}Ga(t){return new Rp(Mp.Zr,this.serializer)}Wa(t){return new Op}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Gp=class n extends gI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield mm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield oD(this.Ja.syncEngine),yield au(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return GN(this.persistence,new xp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new ME(r,e.asyncQueue,t)}Ha(e,t){let r=new Ww(t,this.persistence);return new zw(e.asyncQueue,r)}Ga(e){let t=KI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new GE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JN(),ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Op}},mI=class n extends Gp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield mm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof ul&&(this.sharedClientState.syncEngine={no:k4.bind(null,t),ro:V4.bind(null,t),io:L4.bind(null,t),Qi:F4.bind(null,t),eo:P4.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield O4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=JN();if(!ul.D(t))throw new O(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=KI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ul(t,e.asyncQueue,r,e.clientId,e.initialUser)}},sD=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Nx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),yield iI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new aI}()}createDatastore(t){let r=kl(t.databaseInfo.databaseId),i=function(s){return new JE(s)}(t.databaseInfo);return function(s,a,u,l){return new tI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new rI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>Nx(this.syncEngine,r,0),function(){return Fp.D()?new Fp:new YE}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new fI(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=G(o);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield su(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function kx(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var tu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var yI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new mt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new cI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var vI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=G(i),a={documents:o.map(f=>wl(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ie.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=Hq(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());X(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new gl(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=G(r),s={writes:i.map(a=>El(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=ie.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ie.min())?Ze.exists(!1):Ze.updateTime(t):Ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ie.min()))throw new O(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ze.updateTime(t)}return Ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var _I=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Cl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new vI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ml(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!DN(t)}return!1}};var wI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ow(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield zN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ox(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield aD(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Rx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Rx(e.remoteStore,i)),n._onlineComponents=e})}function aD(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ow(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vn("Error using user provided cache. Falling back to memory cache: "+t),yield Ow(n,new gI)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Ow(n,new gI);return n._offlineComponents})}function sg(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ox(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield Ox(n,new sD))),n._onlineComponents})}function cP(n){return aD(n).then(e=>e.persistence)}function uD(n){return aD(n).then(e=>e.localStore)}function lP(n){return sg(n).then(e=>e.remoteStore)}function cD(n){return sg(n).then(e=>e.syncEngine)}function U4(n){return sg(n).then(e=>e.datastore)}function nu(n){return M(this,null,function*(){let e=yield sg(n),t=e.eventManager;return t.onListen=w4.bind(null,e.syncEngine),t.onUnlisten=I4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D4.bind(null,e.syncEngine),t})}function B4(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield cP(n),t=yield lP(n);return e.setNetworkEnabled(!0),function(i){let o=G(i);return o.L_.delete(0),Ol(o)}(t)}))}function $4(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield cP(n),t=yield lP(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=G(i);o.L_.add(0),yield su(o),o.q_.set("Offline")})}(t)}))}function q4(n,e){let t=new mt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,d){let f=G(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=cu(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield uD(n),e,t)})),t.promise}function dP(n,e,t={}){let r=new mt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let d=new tu({next:g=>{d.Za(),s.enqueueAndForget(()=>XI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Tl(ou(a.path),d,{includeMetadataChanges:!0,_a:!0});return JI(o,f)}(yield nu(n),n.asyncQueue,e,t,r)})),r.promise}function H4(n,e){let t=new mt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield Np(i,o,!0),u=new Hp(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=cu(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield uD(n),e,t)})),t.promise}function hP(n,e,t={}){let r=new mt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let d=new tu({next:g=>{d.Za(),s.enqueueAndForget(()=>XI(o,f)),g.fromCache&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Tl(a,d,{includeMetadataChanges:!0,_a:!0});return JI(o,f)}(yield nu(n),n.asyncQueue,e,t,r)})),r.promise}function G4(n,e){let t=new tu(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){G(i).Y_.add(o),o.next()}(yield nu(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){G(i).Y_.delete(o)}(yield nu(n),t)}))}}function z4(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?CN().encode(s):s,function(d,f){return new yI(d,f)}(function(d,f){if(d instanceof Uint8Array)return kx(d,f);if(d instanceof ArrayBuffer)return kx(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,kl(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){j4(yield cD(n),i,r)}))}function W4(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=G(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield uD(n),e)}))}function fP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Fx=new Map;function lD(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dD(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Vx(n){if(!z.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lx(n){if(z.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ag(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ag(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pP(n,e){if(e<=0)throw new O(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var zp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fw;switch(r.type){case"firstParty":return new Uw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Fx.get(t);r&&(V("ComponentProvider","Removing Datastore"),Fx.delete(t),r.terminate())}(this),Promise.resolve()}};function ug(n,e,t,r={}){var i;let o=(n=be(n,Yo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=lt.MOCK_USER;else{a=dd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(l)}n._authCredentials=new Vw(new op(a,u))}}var bt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Oe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},cr=class n extends bt{constructor(e,t,r){super(e,t,ou(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cg(n,e,...t){if(n=Te(n),lD("collection","path",e),n instanceof Yo){let r=Ie.fromString(e,...t);return Lx(r),new cr(n,null,r)}{if(!(n instanceof Oe||n instanceof cr))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return Lx(r),new cr(n.firestore,null,r)}}function hD(n,e){if(n=be(n,Yo),lD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bt(n,null,function(r){return new Ln(Ie.emptyPath(),r)}(e))}function lu(n,e,...t){if(n=Te(n),arguments.length===1&&(e=sp.newId()),lD("doc","path",e),n instanceof Yo){let r=Ie.fromString(e,...t);return Vx(r),new Oe(n,null,new z(r))}{if(!(n instanceof Oe||n instanceof cr))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return Vx(r),new Oe(n.firestore,n instanceof cr?n.converter:null,new z(r))}}function lg(n,e){return n=Te(n),e=Te(e),(n instanceof Oe||n instanceof cr)&&(e instanceof Oe||e instanceof cr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dg(n,e){return n=Te(n),e=Te(e),n instanceof bt&&e instanceof bt&&n.firestore===e.firestore&&Nl(n._query,e._query)&&n.converter===e.converter}var Wp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Cl(this,"async_queue_retry"),this.Vu=()=>{let r=ip();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new mt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yi(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=oI.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function EI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var II=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var gP=-1,We=class extends Yo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Wp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Wp(e),this._firestoreClient=void 0,yield e}})}};function mP(n,e){let t=typeof n=="object"?n:fs(),r=typeof n=="string"?n:e||"(default)",i=gd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ym("firestore");o&&ug(i,...o)}return i}function Ct(n){if(n._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yP(n),n._firestoreClient}function yP(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new Kw(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new wI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function fD(n,e){Vn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return vP(n,sD.provider,{build:r=>new Gp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function pD(n){return M(this,null,function*(){Vn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();vP(n,sD.provider,{build:t=>new mI(t,e.cacheSizeBytes)})})}function vP(n,e,t){if((n=be(n,We))._firestoreClient||n._terminated)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yP(n)}function gD(n){if(n._initialized&&!n._terminated)throw new O(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new mt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!Ui.D())return Promise.resolve();let i=r+"main";yield Ui.delete(i)})}(KI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function mD(n){return function(t){let r=new mt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return S4(yield cD(t),r)})),r.promise}(Ct(n=be(n,We)))}function yD(n){return B4(Ct(n=be(n,We)))}function vD(n){return $4(Ct(n=be(n,We)))}function _D(n,e){let t=Ct(n=be(n,We)),r=new II;return z4(t,n._databaseId,e,r),r}function wD(n,e){return W4(Ct(n=be(n,We)),e).then(t=>t?new bt(n,null,t.query):null)}var fr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Un=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wr=class{constructor(e){this._methodName=e}};var Zo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Al=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var K4=/^__.*__$/,DI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new zi(e,this.data,t,this.fieldTransforms)}},Kp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function _P(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var Qp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_P(this.Cu)&&K4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},bI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kl(e)}Qu(e,t,r,i=!1){return new Qp({Cu:e,methodName:t,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ts(n){let e=n._freezeSettings(),t=kl(n._databaseId);return new bI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hg(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);DD("Data must be an object, but it was:",s,r);let a=IP(r,s),u,l;if(o.merge)u=new dn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=RI(e,f,t);if(!s.contains(g))throw new O(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bP(d,g)||d.push(g)}u=new dn(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new DI(new Ot(a),u,l)}var Sl=class n extends Wr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function wP(n,e,t){return new Qp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var CI=class n extends Wr{_toFieldTransform(e){return new Wo(e.path,new Hi)}isEqual(e){return e instanceof n}},TI=class n extends Wr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wP(this,e,!0),r=this.Ku.map(o=>ns(o,t)),i=new Gr(r);return new Wo(e.path,i)}isEqual(e){return e instanceof n&&wm(this.Ku,e.Ku)}},AI=class n extends Wr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wP(this,e,!0),r=this.Ku.map(o=>ns(o,t)),i=new zr(r);return new Wo(e.path,i)}isEqual(e){return e instanceof n&&wm(this.Ku,e.Ku)}},SI=class n extends Wr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Gi(e.serializer,mN(e.serializer,this.$u));return new Wo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function ED(n,e,t,r){let i=n.Qu(1,e,t);DD("Data must be an object, but it was:",i,r);let o=[],s=Ot.empty();es(r,(u,l)=>{let d=bD(e,u,t);l=Te(l);let f=i.Nu(d);if(l instanceof Sl)o.push(d);else{let g=ns(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new dn(o);return new Kp(s,a,i.fieldTransforms)}function ID(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[RI(e,r,t)],u=[i];if(o.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(RI(e,o[g])),u.push(o[g+1]);let l=[],d=Ot.empty();for(let g=a.length-1;g>=0;--g)if(!bP(l,a[g])){let y=a[g],I=u[g];I=Te(I);let C=s.Nu(y);if(I instanceof Sl)l.push(y);else{let D=ns(I,C);D!=null&&(l.push(y),d.set(y,D))}}let f=new dn(l);return new Kp(d,f,s.fieldTransforms)}function EP(n,e,t,r=!1){return ns(t,n.Qu(r?4:3,e))}function ns(n,e){if(DP(n=Te(n)))return DD("Unsupported field value:",e,n),IP(n,e);if(n instanceof Wr)return function(r,i){if(!_P(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ns(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:Wa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wa(i.serializer,o)}}if(r instanceof Zo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fr)return{bytesValue:TN(i.serializer,r._byteString)};if(r instanceof Oe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Al)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return HI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ag(r)}`)}(n,e)}function IP(n,e){let t={};return Jx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(n,(r,i)=>{let o=ns(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function DP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof Zo||n instanceof fr||n instanceof Oe||n instanceof Wr||n instanceof Al)}function DD(n,e,t){if(!DP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ag(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function RI(n,e,t){if((e=Te(e))instanceof Un)return e._internalPath;if(typeof e=="string")return bD(n,e);throw Yp("Field path arguments must be of type string or ",n,!1,void 0,t)}var Q4=new RegExp("[~\\*/\\[\\]]");function bD(n,e,t){if(e.search(Q4)>=0)throw Yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Un(...e.split("."))._internalPath}catch{throw Yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,a+n+u)}function bP(n,e){return n.some(t=>t.isEqual(e))}var Jo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(fg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},MI=class extends Jo{data(){return super.data()}};function fg(n,e){return typeof e=="string"?bD(n,e):e instanceof Un?e._internalPath:e._delegate._internalPath}function CP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rl=class{},Xo=class extends Rl{};function pr(n,e,...t){let r=[];e instanceof Rl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof xI).length,a=o.filter(u=>u instanceof Zp).length;if(s>1||s>0&&a>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Zp=class n extends Xo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AP(e._query,t),new bt(e.firestore,e.converter,aE(e._query,t))}_parse(e){let t=ts(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ux(f,d);let y=[];for(let I of f)y.push(jx(u,o,I));g={arrayValue:{values:y}}}else g=jx(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ux(f,d),g=EP(a,s,f,d==="in"||d==="not-in");return we.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CD(n,e,t){let r=e,i=fg("where",n);return Zp._create(i,r,t)}var xI=class n extends Rl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Re.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)AP(s,u),s=aE(s,u)}(e._query,t),new bt(e.firestore,e.converter,aE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var NI=class n extends Xo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(o,s)}(e._query,this._field,this._direction);return new bt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ln(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function TD(n,e="asc"){let t=e,r=fg("orderBy",n);return NI._create(r,t)}var Jp=class n extends Xo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new bt(e.firestore,e.converter,mp(e._query,this._limit,this._limitType))}};function AD(n){return pP("limit",n),Jp._create("limit",n,"F")}function SD(n){return pP("limitToLast",n),Jp._create("limitToLast",n,"L")}var Xp=class n extends Xo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=TP(e,this.type,this._docOrFields,this._inclusive);return new bt(e.firestore,e.converter,function(i,o){return new Ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function RD(...n){return Xp._create("startAt",n,!0)}function MD(...n){return Xp._create("startAfter",n,!1)}var eg=class n extends Xo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=TP(e,this.type,this._docOrFields,this._inclusive);return new bt(e.firestore,e.converter,function(i,o){return new Ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function xD(...n){return eg._create("endBefore",n,!1)}function ND(...n){return eg._create("endAt",n,!0)}function TP(n,e,t,r){if(t[0]=Te(t[0]),t[0]instanceof Jo)return function(o,s,a,u,l){if(!u)throw new O(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ja(o))if(f.field.isKeyField())d.push(Ho(s,u.key));else{let g=u.data.field(f.field);if(ng(g))throw new O(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new O(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new dr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ts(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new O(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<d.length;I++){let C=d[I];if(g[I].field.isKeyField()){if(typeof C!="string")throw new O(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!$I(s)&&C.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let D=s.path.child(Ie.fromString(C));if(!z.isDocumentKey(D))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);let k=new z(D);y.push(Ho(a,k))}else{let D=EP(u,l,C);y.push(D)}}return new dr(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function jx(n,e,t){if(typeof(t=Te(t))=="string"){if(t==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$I(e)&&t.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ie.fromString(t));if(!z.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ho(n,new z(r))}if(t instanceof Oe)return Ho(n,t._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(t)}.`)}function Ux(n,e){if(!Array.isArray(n)||n.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AP(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ru=class{convertValue(e,t="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return es(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>$e(s.doubleValue));return new Al(o)}convertGeoPoint(e){return new Zo($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=UI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){let t=Hr(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);X(VN(r));let i=new $i(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||et(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function pg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var PI=class extends ru{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};var qr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},An=class extends Jo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Li(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(fg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Li=class extends An{data(e={}){return super.data(e)}},Bn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Li(this._firestore,this._userDataWriter,r.key,r,new qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Li(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Li(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Y4(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Y4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function gg(n,e){return n instanceof An&&e instanceof An?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bn&&e instanceof Bn&&n._firestore===e._firestore&&dg(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PD(n){n=be(n,Oe);let e=be(n.firestore,We);return dP(Ct(e),n._key).then(t=>$D(e,n,t))}var Kr=class extends ru{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};function kD(n){n=be(n,Oe);let e=be(n.firestore,We),t=Ct(e),r=new Kr(e);return q4(t,n._key).then(i=>new An(e,r,n._key,i,new qr(i!==null&&i.hasLocalMutations,!0),n.converter))}function OD(n){n=be(n,Oe);let e=be(n.firestore,We);return dP(Ct(e),n._key,{source:"server"}).then(t=>$D(e,n,t))}function FD(n){n=be(n,bt);let e=be(n.firestore,We),t=Ct(e),r=new Kr(e);return CP(n._query),hP(t,n._query).then(i=>new Bn(e,r,n,i))}function VD(n){n=be(n,bt);let e=be(n.firestore,We),t=Ct(e),r=new Kr(e);return H4(t,n._query).then(i=>new Bn(e,r,n,i))}function LD(n){n=be(n,bt);let e=be(n.firestore,We),t=Ct(e),r=new Kr(e);return hP(t,n._query,{source:"server"}).then(i=>new Bn(e,r,n,i))}function mg(n,e,t){n=be(n,Oe);let r=be(n.firestore,We),i=pg(n.converter,e,t);return du(r,[hg(ts(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ze.none())])}function yg(n,e,t,...r){n=be(n,Oe);let i=be(n.firestore,We),o=ts(i),s;return s=typeof(e=Te(e))=="string"||e instanceof Un?ID(o,"updateDoc",n._key,e,t,r):ED(o,"updateDoc",n._key,e),du(i,[s.toMutation(n._key,Ze.exists(!0))])}function jD(n){return du(be(n.firestore,We),[new Wi(n._key,Ze.none())])}function UD(n,e){let t=be(n.firestore,We),r=lu(n),i=pg(n.converter,e);return du(t,[hg(ts(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function vg(n,...e){var t,r,i;n=Te(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||EI(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(EI(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof Oe)l=be(n.firestore,We),d=ou(n._key.path),u={next:f=>{e[s]&&e[s]($D(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=be(n,bt);l=be(f.firestore,We),d=f._query;let g=new Kr(l);u={next:y=>{e[s]&&e[s](new Bn(l,g,f,y))},error:e[s+1],complete:e[s+2]},CP(n._query)}return function(g,y,I,C){let D=new tu(C),k=new Tl(y,D,I);return g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return JI(yield nu(g),k)})),()=>{D.Za(),g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return XI(yield nu(g),k)}))}}(Ct(l),d,a,u)}function BD(n,e){return G4(Ct(n=be(n,We)),EI(e)?e:{next:e})}function du(n,e){return function(r,i){let o=new mt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return b4(yield cD(r),i,o)})),o.promise}(Ct(n),e)}function $D(n,e,t){let r=t.docs.get(e._key),i=new Kr(n);return new An(n,i,e._key,r,new qr(t.hasPendingWrites,t.fromCache),e.converter)}var Z4={maxAttempts:5};var tg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ts(e)}set(e,t,r){this._verifyNotCommitted();let i=Fi(e,this._firestore),o=pg(i.converter,t,r),s=hg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Fi(e,this._firestore),s;return s=typeof(t=Te(t))=="string"||t instanceof Un?ID(this._dataReader,"WriteBatch.update",o._key,t,r,i):ED(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Fi(e,this._firestore);return this._mutations=this._mutations.concat(new Wi(t._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fi(n,e){if((n=Te(n)).firestore!==e)throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var kI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ts(t)}get(t){let r=Fi(t,this._firestore),i=new PI(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Y();let s=o[0];if(s.isFoundDocument())return new Jo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Jo(this._firestore,i,r._key,null,r.converter);throw Y()})}set(t,r,i){let o=Fi(t,this._firestore),s=pg(o.converter,r,i),a=hg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Fi(t,this._firestore),a;return a=typeof(r=Te(r))=="string"||r instanceof Un?ID(this._dataReader,"Transaction.update",s._key,r,i,o):ED(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Fi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Fi(e,this._firestore),r=new Kr(this._firestore);return super.get(e).then(i=>new An(this._firestore,r,t._key,i._document,new qr(!1,!1),t.converter))}};function qD(n,e,t){n=be(n,We);let r=Object.assign(Object.assign({},Z4),t);return function(o){if(o.maxAttempts<1)throw new O(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new mt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield U4(o);new _I(o.asyncQueue,l,a,s,u).au()})),u.promise}(Ct(n),i=>e(new kI(n,i)),r)}function HD(){return new Sl("deleteField")}function GD(){return new CI("serverTimestamp")}function zD(...n){return new TI("arrayUnion",n)}function WD(...n){return new AI("arrayRemove",n)}function KD(n){return new SI("increment",n)}(function(e,t=!0){(function(i){iu=i})(md),io(new Rn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new We(new Lw(r.getProvider("auth-internal")),new $w(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(LM,"4.7.3",e),ht(LM,"4.7.3","esm2017")})();var J4="@firebase/firestore-compat",X4="0.3.38";function e0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SP(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function RP(){if(!Xx())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var _g=class n{constructor(e){this._delegate=e}static fromBase64String(e){return RP(),new n(fr.fromBase64String(e))}static fromUint8Array(e){return SP(),new n(fr.fromUint8Array(e))}toBase64(){return RP(),this._delegate.toBase64()}toUint8Array(){return SP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function QD(n){return eH(n,["next","error","complete"])}function eH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var YD=class{enableIndexedDbPersistence(e,t){return fD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return pD(e._delegate)}clearIndexedDbPersistence(e){return gD(e._delegate)}},wg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $i||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ug(this._delegate,e,t,r)}enableNetwork(){return yD(this._delegate)}disableNetwork(){return vD(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mD(this._delegate)}onSnapshotsInSync(e){return BD(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pu(this,cg(this._delegate,e))}catch(t){throw Kt(t,"collection()","Firestore.collection()")}}doc(e){try{return new gr(this,lu(this._delegate,e))}catch(t){throw Kt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,hD(this._delegate,e))}catch(t){throw Kt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return qD(this._delegate,t=>e(new Eg(this,t)))}batch(){return Ct(this._delegate),new Ig(new tg(this._delegate,e=>du(this._delegate,e)))}loadBundle(e){return _D(this._delegate,e)}namedQuery(e){return wD(this._delegate,e).then(t=>t?new ss(this,t):null)}},hu=class extends ru{constructor(e){super(),this.firestore=e}convertBytes(e){return new _g(new fr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return gr.forKey(t,this.firestore,null)}};function tH(n){OI(n)}var Eg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hu(e)}get(e){let t=rs(e);return this._delegate.get(t).then(r=>new is(this._firestore,new An(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=rs(e);return r?(e0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=rs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=rs(e);return this._delegate.delete(t),this}},Ig=class{constructor(e){this._delegate=e}set(e,t,r){let i=rs(e);return r?(e0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=rs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=rs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},fu=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Li(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new os(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new hu(e),t),i.set(t,o)),o}};fu.INSTANCES=new WeakMap;var gr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hu(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Oe(t._delegate,r,new z(e)))}static forKey(e,t,r){return new n(t,new Oe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pu(this.firestore,cg(this._delegate,e))}catch(t){throw Kt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Te(e),e instanceof Oe?lg(this._delegate,e):!1}set(e,t){t=e0("DocumentReference.set",t);try{return t?mg(this._delegate,e,t):mg(this._delegate,e)}catch(r){throw Kt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?yg(this._delegate,e):yg(this._delegate,e,t,...r)}catch(i){throw Kt(i,"updateDoc()","DocumentReference.update()")}}delete(){return jD(this._delegate)}onSnapshot(...e){let t=MP(e),r=xP(e,i=>new is(this.firestore,new An(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vg(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=kD(this._delegate):e?.source==="server"?t=OD(this._delegate):t=PD(this._delegate),t.then(r=>new is(this.firestore,new An(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Kt(n,e,t){return n.message=n.message.replace(e,t),n}function MP(n){for(let e of n)if(typeof e=="object"&&!QD(e))return e;return{}}function xP(n,e){var t,r;let i;return QD(n[0])?i=n[0]:QD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var is=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gg(this._delegate,e._delegate)}},os=class extends is{data(e){let t=this._delegate.data(e);return this._delegate._converter||Bx(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ss=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hu(e)}where(e,t,r){try{return new n(this.firestore,pr(this._delegate,CD(e,t,r)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,pr(this._delegate,TD(e,t)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,pr(this._delegate,AD(e)))}catch(t){throw Kt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,pr(this._delegate,SD(e)))}catch(t){throw Kt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,pr(this._delegate,RD(...e)))}catch(t){throw Kt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,pr(this._delegate,MD(...e)))}catch(t){throw Kt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,pr(this._delegate,xD(...e)))}catch(t){throw Kt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,pr(this._delegate,ND(...e)))}catch(t){throw Kt(t,"endAt()","Query.endAt()")}}isEqual(e){return dg(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=VD(this._delegate):e?.source==="server"?t=LD(this._delegate):t=FD(this._delegate),t.then(r=>new Fl(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=MP(e),r=xP(e,i=>new Fl(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vg(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},ZD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new os(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Fl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new os(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new os(this._firestore,r))})}isEqual(e){return gg(this._delegate,e._delegate)}},pu=class n extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new gr(this.firestore,e):null}doc(e){try{return e===void 0?new gr(this.firestore,lu(this._delegate)):new gr(this.firestore,lu(this._delegate,e))}catch(t){throw Kt(t,"doc()","CollectionReference.doc()")}}add(e){return UD(this._delegate,e).then(t=>new gr(this.firestore,t))}isEqual(e){return lg(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(fu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function rs(n){return be(n,Oe)}var JD=class n{constructor(...e){this._delegate=new Un(...e)}static documentId(){return new n(tt.keyField().canonicalString())}isEqual(e){return e=Te(e),e instanceof Un?this._delegate._internalPath.isEqual(e._internalPath):!1}};var XD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=GD();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=HD();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=zD(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=WD(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=KD(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var nH={Firestore:wg,GeoPoint:Zo,Timestamp:ze,Blob:_g,Transaction:Eg,WriteBatch:Ig,DocumentReference:gr,DocumentSnapshot:is,Query:ss,QueryDocumentSnapshot:os,QuerySnapshot:Fl,CollectionReference:pu,FieldPath:JD,FieldValue:XD,setLogLevel:tH,CACHE_SIZE_UNLIMITED:gP};function rH(n,e){n.INTERNAL.registerComponent(new Rn("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nH)))}function iH(n){rH(n,(e,t)=>new wg(e,t,new YD)),n.registerVersion(J4,X4)}iH(tn);function oH(n,e=uo){return new ae(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function NP(n,e){return oH(n,e)}function sH(n,e){return NP(n,e).pipe(ho(void 0),Qu(),ne(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function r0(n,e){return NP(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var Dg=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=OP(r,t);return new Cg(i,o,this.afs)}snapshotChanges(){return sH(this.ref,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?ye($({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return fe(this.ref.get(e)).pipe(_t)}};function bg(n,e){return r0(n,e).pipe(ho(void 0),Qu(),ne(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function PP(n,e,t){return bg(n,t).pipe(lo((r,i)=>aH(r,i.map(o=>o.payload),e),[]),Gm(),ne(r=>r.map(i=>({type:i.type,payload:i}))))}function aH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=uH(n,r))}),n}function t0(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function uH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return t0(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return t0(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return t0(n,e.oldIndex,1);break}return n}function kP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Cg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ho(void 0),Qu(),pt(([r,i])=>i.length>0||!r),ne(([,r])=>r),_t)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=kP(e);return PP(this.query,t,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return r0(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(r=>e.idField?ye($({},r.data()),{[e.idField]:r.id}):r.data())),_t)}get(e){return fe(this.query.get(e)).pipe(_t)}add(e){return this.ref.add(e)}doc(e){return new Dg(this.ref.doc(e),this.afs)}},n0=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?bg(this.query,this.afs.schedulers.outsideAngular).pipe(_t):bg(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),pt(t=>t.length>0),_t)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=kP(e);return PP(this.query,t,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return r0(this.query,this.afs.schedulers.outsideAngular).pipe(ne(r=>r.payload.docs.map(i=>e.idField?$({[e.idField]:i.id},i.data()):i.data())),_t)}get(e){return fe(this.query.get(e)).pipe(_t)}},cH=new B("angularfire2.enableFirestorePersistence"),lH=new B("angularfire2.firestore.persistenceSettings"),dH=new B("angularfire2.firestore.settings"),hH=new B("angularfire2.firestore.use-emulator");function OP(n,e=t=>t){return{query:e(n),ref:n}}var Vl=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,I,C,D,k,j){this.schedulers=u;let P=ba(t,a,r),U=d;f&&Dw(P,a,g,I,C,D,y,k),[this.firestore,this.persistenceEnabled$]=Ca(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let Z=a.runOutsideAngular(()=>P.firestore());if(o&&Z.settings(o),U&&Z.useEmulator(...U),i&&!yi(s)){let Q=()=>{try{return fe(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ee(!1)}};return[Z,a.runOutsideAngular(Q)]}else return[Z,ee(!1)]},[o,U,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=OP(i,r),a=this.schedulers.ngZone.run(()=>o);return new Cg(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new n0(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Dg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(xi),F(Da,8),F(cH,8),F(dH,8),F(gt),F(ge),F(bn),F(lH,8),F(hH,8),F(Ta,8),F(yw,8),F(vw,8),F(_w,8),F(ww,8),F(Ew,8),F(Iw,8),F(cn,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Ji=class n{constructor(e,t,r,i){this.angularF=e;this.db=t;this.router=r;this.authService=i;this.usuariosColeccion=this.db.collection(this.dbPath),this.usuarios=this.usuariosColeccion.valueChanges(this.dbPath)}dbPath="/usuarios";usuariosColeccion;usuarios;usuario;obtenerEmailUsuarioLogueado(){return JSON.parse(localStorage.getItem("user")).email}isAdmin(){let e=!1,t=JSON.parse(localStorage.getItem("user"));return t!=null&&t.perfil==="admin"&&(e=!0),e}estaLogueado(){return JSON.parse(localStorage.getItem("user"))!=null}obtenerUsuarioPorEmail(e){return new Promise(t=>{this.db.collection(this.dbPath,r=>r.where("email","==",e)).valueChanges().subscribe(r=>t(r))})}conectarUsuario(e,t,r){return M(this,null,function*(){yield this.obtenerUsuarioPorEmail(e).then(i=>{if(t){let o=new Yc(i[0].id,i[0].email,i[0].perfil);localStorage.setItem("user",JSON.stringify(o)),this.angularF.collection(this.dbPath).doc(i[0].id).update(o.toJson())}else{let o=this.angularF.createId(),s=new Yc(o,e,r);localStorage.setItem("user",JSON.stringify(s)),this.angularF.collection(this.dbPath).doc(o).set(s.toJson()),this.router.navigate(["/bienvenido"])}}).catch(i=>console.log(i))})}registrar(e,t,r){this.authService.createUserWithEmailAndPassword(e,t).then(i=>{this.conectarUsuario(e,!1,r)}).catch(i=>console.log("error",i.message))}cerrarSesion(){localStorage.clear(),this.router.navigate(["/bienvenida"])}static \u0275fac=function(t){return new(t||n)(F(Vl),F(Vl),F(un),F(Ta))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function fH(n,e){n&1&&(K(0,"small",13),te(1,"El email es requerido"),H())}function pH(n,e){n&1&&(K(0,"small",13),te(1,"El formato es invalido"),H())}function gH(n,e){n&1&&(K(0,"small",13),te(1,"La contrase\xF1a es requerida"),H())}var Tg=class n{constructor(e,t,r,i){this.formBuilder=e;this.authService=t;this.router=r;this.usuarioService=i}formGroup;ngOnInit(){this.formGroup=this.formBuilder.group({email:["",[Ge.required,Ge.email]],contrase\u00F1a:["",Ge.required]})}login(){let e=this.formGroup.controls.email.value,t=this.formGroup.controls.contrase\u00F1a.value;this.authService.signInWithEmailAndPassword(e,t).then(r=>{this.usuarioService.conectarUsuario(e,!0).then(i=>{this.formGroup.reset(),this.router.navigate(["/bienvenida"])}).catch(i=>{this.formGroup.reset()})}).catch(r=>{this.formGroup.reset()})}accesoRapidoEmpleado(){this.formGroup.controls.email.setValue("empleado@email.com"),this.formGroup.controls.contrase\u00F1a.setValue("emple1234")}accesoRapidoAdmin(){this.formGroup.controls.email.setValue("admin@email.com"),this.formGroup.controls.contrase\u00F1a.setValue("admin1234")}static \u0275fac=function(t){return new(t||n)(J(wa),J(Ta),J(un),J(Ji))};static \u0275cmp=xt({type:n,selectors:[["app-login"]],standalone:!0,features:[Nt],decls:25,vars:5,consts:[["id","formContent",1,"login-form","fondo",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","email","id","form3Example3","formControlName","email",1,"form-control"],["class","invalid",4,"ngIf"],["for","password"],["type","password","id","form3Example4","formControlName","contrase\xF1a",1,"form-control"],[1,"button-group"],["value","Empleado",1,"login-button",3,"click"],["value","Admin",1,"login-button",3,"click"],["value","Ingresar","type","submit",1,"login-button",3,"disabled"],[1,"text-center"],["routerLink","/registro",1,"link-info"],[1,"invalid"]],template:function(t,r){t&1&&(K(0,"form",0),Be("ngSubmit",function(){return r.login()}),K(1,"h2"),te(2,"Login"),H(),K(3,"div",1)(4,"label",2),te(5,"Email"),H(),Le(6,"input",3),st(7,fH,2,0,"small",4)(8,pH,2,0,"small",4),H(),K(9,"div",1)(10,"label",5),te(11,"Contrase\xF1a"),H(),Le(12,"input",6),st(13,gH,2,0,"small",4),H(),K(14,"div",7)(15,"button",8),Be("click",function(){return r.accesoRapidoEmpleado()}),te(16,"Inicio Empleado"),H(),K(17,"button",9),Be("click",function(){return r.accesoRapidoAdmin()}),te(18,"Inicio Administrador"),H(),K(19,"button",10),te(20,"Login"),H(),K(21,"div",11)(22,"p")(23,"a",12),te(24,"Registrate ac\xE1"),H()()()()()),t&2&&(Ae("formGroup",r.formGroup),me(7),Ae("ngIf",(r.formGroup.controls.email.errors==null?null:r.formGroup.controls.email.errors.required)&&r.formGroup.controls.email.touched),me(),Ae("ngIf",(r.formGroup.controls.email.errors==null?null:r.formGroup.controls.email.errors.email)&&r.formGroup.controls.email.touched),me(5),Ae("ngIf",(r.formGroup.controls.contrase\u00F1a.errors==null?null:r.formGroup.controls.contrase\u00F1a.errors.required)&&r.formGroup.controls.contrase\u00F1a.touched),me(6),Ae("disabled",r.formGroup.invalid))},dependencies:[la,nr,on,Xn,rr,ya,Ti,Ai,ma,Ri,xo,No],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:stretch}.login-form[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center;background-color:#f8f8f8;padding:40px;border-radius:5px;box-shadow:0 0 10px #0003;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin:10px 0}.button-group[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;align-items:center}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:1px solid #ccc;width:100%;max-width:300px}button[_ngcontent-%COMP%]{width:212px;margin:2px 25px;padding:10px;border:none;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer}.login-button[_ngcontent-%COMP%]{background-color:#007f00;color:#fff}.register-button[_ngcontent-%COMP%]{background-color:#005e00;color:#fff}.login-button[_ngcontent-%COMP%]:hover, .register-button[_ngcontent-%COMP%]:hover{background-color:#55b955}.login-button[_ngcontent-%COMP%]:disabled{background-color:#007f00;cursor:default}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:red 1px solid}small[_ngcontent-%COMP%]{text-decoration:underline;display:block;width:212px}.error[_ngcontent-%COMP%]{color:red}"]})};var GP="firebasestorage.googleapis.com",zP="storageBucket",mH=2*60*1e3,yH=10*60*1e3,vH=1e3;var Ke=class n extends fd{constructor(e,t,r=0){super(o0(e),`Firebase Storage: ${t} (${o0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return o0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},qe=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(qe||{});function o0(n){return"storage/"+n}function f0(){let n="An unknown error occurred, please check the error payload for server response.";return new Ke(qe.UNKNOWN,n)}function _H(n){return new Ke(qe.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function wH(n){return new Ke(qe.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EH(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(qe.UNAUTHENTICATED,n)}function IH(){return new Ke(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DH(n){return new Ke(qe.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function WP(){return new Ke(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KP(){return new Ke(qe.CANCELED,"User canceled the upload/download.")}function bH(n){return new Ke(qe.INVALID_URL,"Invalid URL '"+n+"'.")}function CH(n){return new Ke(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function TH(){return new Ke(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zP+"' property when initializing the app?")}function QP(){return new Ke(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function AH(){return new Ke(qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function SH(){return new Ke(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RH(n){return new Ke(qe.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function as(n){return new Ke(qe.INVALID_ARGUMENT,n)}function YP(){return new Ke(qe.APP_DELETED,"The Firebase app was deleted.")}function p0(n){return new Ke(qe.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(n,e){return new Ke(qe.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ll(n){throw new Ke(qe.INTERNAL_ERROR,"Internal error: "+n)}var Qt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw CH(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(U){U.path_=decodeURIComponent(U.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},C=t===GP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",k=new RegExp(`^https?://${C}/${i}/${D}`,"i"),P=[{regex:a,indices:u,postModify:o},{regex:y,indices:I,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let U=0;U<P.length;U++){let Z=P[U],Q=Z.regex.exec(e);if(Q){let E=Q[Z.indices.bucket],v=Q[Z.indices.path];v||(v=""),r=new n(E,v),Z.postModify(r);break}}if(r==null)throw bH(e);return r}},a0=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function MH(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function d(...D){l||(l=!0,e.apply(null,D))}function f(D){i=setTimeout(()=>{i=null,n(y,u())},D)}function g(){o&&clearTimeout(o)}function y(D,...k){if(l){g();return}if(D){g(),d.call(null,D,...k);return}if(u()||s){g(),d.call(null,D,...k);return}r<64&&(r*=2);let P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,f(P)}let I=!1;function C(D){I||(I=!0,g(),!l&&(i!==null?(D||(a=2),clearTimeout(i),f(0)):D||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,C(!0)},t),C}function xH(n){n(!1)}function NH(n){return n!==void 0}function PH(n){return typeof n=="function"}function kH(n){return typeof n=="object"&&!Array.isArray(n)}function Rg(n){return typeof n=="string"||n instanceof String}function VP(n){return g0()&&n instanceof Blob}function g0(){return typeof Blob<"u"}function u0(n,e,t,r){if(r<e)throw as(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw as(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xi(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ZP(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var yu=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(yu||{});function JP(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var c0=class{constructor(e,t,r,i,o,s,a,u,l,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,I)=>{this.resolve_=y,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new mu(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===yu.NO_ERROR,u=o.getStatus();if(!a||JP(u,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===yu.ABORT;r(!1,new mu(!1,null,d));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new mu(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());NH(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=f0();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?YP():KP();s(u)}else{let u=WP();s(u)}};this.canceled_?t(!1,new mu(!1,null,!0)):this.backoffId_=MH(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},mu=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function OH(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VH(n,e){e&&(n["X-Firebase-GMPID"]=e)}function LH(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function jH(n,e,t,r,i,o,s=!0){let a=ZP(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return VH(l,e),OH(l,t),FH(l,o),LH(l,r),new c0(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function UH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BH(...n){let e=UH();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(g0())return new Blob(n);throw new Ke(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $H(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function qH(n){if(typeof atob>"u")throw RH("base-64");return atob(n)}var hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ul=class{constructor(e,t){this.data=e,this.contentType=t||null}};function m0(n,e){switch(n){case hn.RAW:return new Ul(XP(e));case hn.BASE64:case hn.BASE64URL:return new Ul(e1(n,e));case hn.DATA_URL:return new Ul(GH(e),zH(e))}throw f0()}function XP(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HH(n){let e;try{e=decodeURIComponent(n)}catch{throw jl(hn.DATA_URL,"Malformed data URL.")}return XP(e)}function e1(n,e){switch(n){case hn.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw jl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case hn.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw jl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qH(e)}catch(i){throw i.message.includes("polyfill")?i:jl(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Sg=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw jl(hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=WH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function GH(n){let e=new Sg(n);return e.base64?e1(hn.BASE64,e.rest):HH(e.rest)}function zH(n){return new Sg(n).contentType}function WH(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var vu=class n{constructor(e,t){let r=0,i="";VP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(VP(this.data_)){let r=this.data_,i=$H(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(g0()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(BH.apply(null,t))}else{let t=e.map(s=>Rg(s)?m0(hn.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function y0(n){let e;try{e=JSON.parse(n)}catch{return null}return kH(e)?e:null}function KH(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function QH(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function t1(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function YH(n,e){return e}var Tt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||YH}},Ag=null;function ZH(n){return!Rg(n)||n.length<2?n:t1(n)}function Mg(){if(Ag)return Ag;let n=[];n.push(new Tt("bucket")),n.push(new Tt("generation")),n.push(new Tt("metageneration")),n.push(new Tt("name","fullPath",!0));function e(o,s){return ZH(s)}let t=new Tt("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Tt("size");return i.xform=r,n.push(i),n.push(new Tt("timeCreated")),n.push(new Tt("updated")),n.push(new Tt("md5Hash",null,!0)),n.push(new Tt("cacheControl",null,!0)),n.push(new Tt("contentDisposition",null,!0)),n.push(new Tt("contentEncoding",null,!0)),n.push(new Tt("contentLanguage",null,!0)),n.push(new Tt("contentType",null,!0)),n.push(new Tt("metadata","customMetadata",!0)),Ag=n,Ag}function JH(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new Qt(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function XH(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return JH(r,n),r}function n1(n,e,t){let r=y0(e);return r===null?null:XH(n,r,t)}function eG(n,e,t,r){let i=y0(e);if(i===null||!Rg(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let d=n.bucket,f=n.fullPath,g="/b/"+s(d)+"/o/"+s(f),y=Xi(g,t,r),I=ZP({alt:"media",token:l});return y+I})[0]}function v0(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var LP="prefixes",jP="items";function tG(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LP])for(let i of t[LP]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new Qt(e,o));r.prefixes.push(s)}if(t[jP])for(let i of t[jP]){let o=n._makeStorageReference(new Qt(e,i.name));r.items.push(o)}return r}function nG(n,e,t){let r=y0(t);return r===null?null:tG(n,e,r)}var $n=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function yr(n){if(!n)throw f0()}function xg(n,e){function t(r,i){let o=n1(n,i,e);return yr(o!==null),o}return t}function rG(n,e){function t(r,i){let o=nG(n,e,i);return yr(o!==null),o}return t}function iG(n,e){function t(r,i){let o=n1(n,i,e);return yr(o!==null),eG(o,i,n.host,n._protocol)}return t}function Eu(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=IH():i=EH():t.getStatus()===402?i=wH(n.bucket):t.getStatus()===403?i=DH(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Ng(n){let e=Eu(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=_H(n.path)),o.serverResponse=i.serverResponse,o}return t}function r1(n,e,t){let r=e.fullServerUrl(),i=Xi(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new $n(i,o,xg(n,t),s);return a.errorHandler=Ng(e),a}function oG(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=Xi(s,n.host,n._protocol),u="GET",l=n.maxOperationRetryTime,d=new $n(a,u,rG(n,e.bucket),l);return d.urlParams=o,d.errorHandler=Eu(e),d}function sG(n,e,t){let r=e.fullServerUrl(),i=Xi(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new $n(i,o,iG(n,t),s);return a.errorHandler=Ng(e),a}function aG(n,e,t,r){let i=e.fullServerUrl(),o=Xi(i,n.host,n._protocol),s="PATCH",a=v0(t,r),u={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,d=new $n(o,s,xg(n,r),l);return d.headers=u,d.body=a,d.errorHandler=Ng(e),d}function uG(n,e){let t=e.fullServerUrl(),r=Xi(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(u,l){}let a=new $n(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Ng(e),a}function cG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function i1(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=cG(null,e)),r}function lG(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let P="";for(let U=0;U<2;U++)P=P+Math.random().toString().slice(2);return P}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let l=i1(e,r,i),d=v0(l,t),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+u+"--",y=vu.getBlob(f,r,g);if(y===null)throw QP();let I={name:l.fullPath},C=Xi(o,n.host,n._protocol),D="POST",k=n.maxUploadRetryTime,j=new $n(C,D,xg(n,t),k);return j.urlParams=I,j.headers=s,j.body=y.uploadData(),j.errorHandler=Eu(e),j}var _u=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function _0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{yr(!1)}return yr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function dG(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=i1(e,r,i),a={name:s.fullPath},u=Xi(o,n.host,n._protocol),l="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=v0(s,t),g=n.maxUploadRetryTime;function y(C){_0(C);let D;try{D=C.getResponseHeader("X-Goog-Upload-URL")}catch{yr(!1)}return yr(Rg(D)),D}let I=new $n(u,l,y,g);return I.urlParams=a,I.headers=d,I.body=f,I.errorHandler=Eu(e),I}function hG(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let d=_0(l,["active","final"]),f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yr(!1)}f||yr(!1);let g=Number(f);return yr(!isNaN(g)),new _u(g,r.size(),d==="final")}let s="POST",a=n.maxUploadRetryTime,u=new $n(t,s,o,a);return u.headers=i,u.errorHandler=Eu(e),u}var UP=256*1024;function fG(n,e,t,r,i,o,s,a){let u=new _u(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw AH();let l=u.total-u.current,d=l;i>0&&(d=Math.min(d,i));let f=u.current,g=f+d,y="";d===0?y="finalize":l===d?y="upload, finalize":y="upload";let I={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${u.current}`},C=r.slice(f,g);if(C===null)throw QP();function D(U,Z){let Q=_0(U,["active","final"]),E=u.current+d,v=r.size(),_;return Q==="final"?_=xg(e,o)(U,Z):_=null,new _u(E,v,Q==="final",_)}let k="POST",j=e.maxUploadRetryTime,P=new $n(t,k,D,j);return P.headers=I,P.body=C.uploadData(),P.progressCallback=a||null,P.errorHandler=Eu(n),P}var o1={STATE_CHANGED:"state_changed"},Ft={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function s0(n){switch(n){case"running":case"pausing":case"canceling":return Ft.RUNNING;case"paused":return Ft.PAUSED;case"success":return Ft.SUCCESS;case"canceled":return Ft.CANCELED;case"error":return Ft.ERROR;default:return Ft.ERROR}}var l0=class{constructor(e,t,r){if(PH(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function gu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var BP=null,d0=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ll("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ll("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ll("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ll("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ll("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},h0=class extends d0{initXhr(){this.xhr_.responseType="text"}};function mr(){return BP?BP():new h0}var Bl=class{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Mg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(JP(i.status,[]))if(o)i=WP();else{this.sleepTime=Math.max(this.sleepTime*2,vH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(qe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=dG(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=hG(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,mr,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=UP*this._chunkMultiplier,t=new _u(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=fG(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}let a=this._ref.storage._makeRequest(s,mr,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){UP*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=r1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=lG(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=KP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=s0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new l0(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(s0(this._state)){case Ft.SUCCESS:gu(this._resolve.bind(null,this.snapshot))();break;case Ft.CANCELED:case Ft.ERROR:let t=this._reject;gu(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(s0(this._state)){case Ft.RUNNING:case Ft.PAUSED:e.next&&gu(e.next.bind(e,this.snapshot))();break;case Ft.SUCCESS:e.complete&&gu(e.complete.bind(e))();break;case Ft.CANCELED:case Ft.ERROR:e.error&&gu(e.error.bind(e,this._error))();break;default:e.error&&gu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var wu=class n{constructor(e,t){this._service=e,t instanceof Qt?this._location=t:this._location=Qt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t1(this._location.path)}get storage(){return this._service}get parent(){let e=KH(this._location.path);if(e===null)return null;let t=new Qt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw p0(e)}};function pG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Bl(n,new vu(e),t)}function gG(n){let e={prefixes:[],items:[]};return s1(n,e).then(()=>e)}function s1(n,e,t){return M(this,null,function*(){let i=yield a1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield s1(n,e,i.nextPageToken))})}function a1(n,e){e!=null&&typeof e.maxResults=="number"&&u0("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=oG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,mr)}function mG(n){n._throwIfRoot("getMetadata");let e=r1(n.storage,n._location,Mg());return n.storage.makeRequestWithTokens(e,mr)}function yG(n,e){n._throwIfRoot("updateMetadata");let t=aG(n.storage,n._location,e,Mg());return n.storage.makeRequestWithTokens(t,mr)}function vG(n){n._throwIfRoot("getDownloadURL");let e=sG(n.storage,n._location,Mg());return n.storage.makeRequestWithTokens(e,mr).then(t=>{if(t===null)throw SH();return t})}function _G(n){n._throwIfRoot("deleteObject");let e=uG(n.storage,n._location);return n.storage.makeRequestWithTokens(e,mr)}function u1(n,e){let t=QH(n._location.path,e),r=new Qt(n._location.bucket,t);return new wu(n.storage,r)}function wG(n){return/^[A-Za-z]+:\/\//.test(n)}function EG(n,e){return new wu(n,e)}function c1(n,e){if(n instanceof $l){let t=n;if(t._bucket==null)throw TH();let r=new wu(t,t._bucket);return e!=null?c1(r,e):r}else return e!==void 0?u1(n,e):n}function IG(n,e){if(e&&wG(e)){if(n instanceof $l)return EG(n,e);throw as("To use ref(service, url), the first argument must be a Storage instance.")}else return c1(n,e)}function $P(n,e){let t=e?.[zP];return t==null?null:Qt.makeFromBucketSpec(t,n)}function DG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:dd(i,n.app.options.projectId))}var $l=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=GP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mH,this._maxUploadRetryTime=yH,this._requests=new Set,i!=null?this._bucket=Qt.makeFromBucketSpec(i,this._host):this._bucket=$P(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qt.makeFromBucketSpec(this._url,e):this._bucket=$P(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return M(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return M(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new a0(YP());{let s=jH(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return M(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},qP="@firebase/storage",HP="0.13.2";var bG="storage";function l1(n,e,t){return n=Te(n),pG(n,e,t)}function d1(n){return n=Te(n),mG(n)}function h1(n,e){return n=Te(n),yG(n,e)}function f1(n,e){return n=Te(n),a1(n,e)}function p1(n){return n=Te(n),gG(n)}function g1(n){return n=Te(n),vG(n)}function m1(n){return n=Te(n),_G(n)}function w0(n,e){return n=Te(n),IG(n,e)}function y1(n,e){return u1(n,e)}function v1(n,e,t,r={}){DG(n,e,t,r)}function CG(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $l(t,r,i,e,md)}function TG(){io(new Rn(bG,CG,"PUBLIC").setMultipleInstances(!0)),ht(qP,HP,""),ht(qP,HP,"esm2017")}TG();var Iu=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Pg=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Iu(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Iu(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new Iu(s,this,this._ref)):o={next:t.next?s=>t.next(new Iu(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},kg=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new us(e,this._service))}get items(){return this._delegate.items.map(e=>new us(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var us=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=y1(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Pg(l1(this._delegate,e,t),this)}putString(e,t=hn.RAW,r){this._throwIfRoot("putString");let i=m0(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Pg(new Bl(this._delegate,new vu(i.data,!0),o),this)}listAll(){return p1(this._delegate).then(e=>new kg(e,this.storage))}list(e){return f1(this._delegate,e||void 0).then(t=>new kg(t,this.storage))}getMetadata(){return d1(this._delegate)}updateMetadata(e){return h1(this._delegate,e)}getDownloadURL(){return g1(this._delegate)}delete(){return this._throwIfRoot("delete"),m1(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw p0(e)}};var Og=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(_1(e))throw as("ref() expected a child path but got a URL, use refFromURL instead.");return new us(w0(this._delegate,e),this)}refFromURL(e){if(!_1(e))throw as("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qt.makeFromUrl(e,this._delegate.host)}catch{throw as("refFromUrl() expected a valid full URL but got an invalid one.")}return new us(w0(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){v1(this._delegate,e,t,r)}};function _1(n){return/^[A-Za-z]+:\/\//.test(n)}var AG="@firebase/storage-compat",SG="0.3.12";var RG="storage-compat";function MG(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Og(t,r)}function xG(n){let e={TaskState:Ft,TaskEvent:o1,StringFormat:hn,Storage:Og,Reference:us};n.INTERNAL.registerComponent(new Rn(RG,MG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(AG,SG)}xG(tn);function NG(n){return new ae(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(qm(0))}function w1(n){let e=NG(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ne(t=>t.bytesTransferred/t.totalBytes*100))}}function Fg(n){return{getDownloadURL:()=>ee(void 0).pipe(sw,xe(()=>n.getDownloadURL()),_t),getMetadata:()=>ee(void 0).pipe(sw,xe(()=>n.getMetadata()),_t),delete:()=>fe(n.delete()),child:e=>Fg(n.child(e)),updateMetadata:e=>fe(n.updateMetadata(e)),put:(e,t)=>{let r=n.put(e,t);return w1(r)},putString:(e,t,r)=>{let i=n.putString(e,t,r);return w1(i)},list:e=>fe(n.list(e)),listAll:()=>fe(n.listAll())}}var PG=new B("angularfire2.storageBucket"),kG=new B("angularfire2.storage.maxUploadRetryTime"),OG=new B("angularfire2.storage.maxOperationRetryTime"),FG=new B("angularfire2.storage.use-emulator"),E1=(()=>{class n{storage;constructor(t,r,i,o,s,a,u,l,d,f){let g=ba(t,s,r);this.storage=Ca(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{let y=s.runOutsideAngular(()=>g.storage(i||void 0)),I=d;return I&&y.useEmulator(...I),u&&y.setMaxUploadRetryTime(u),l&&y.setMaxOperationRetryTime(l),y},[u,l])}ref(t){return Fg(this.storage.ref(t))}refFromURL(t){return Fg(this.storage.refFromURL(t))}upload(t,r,i){let o=this.storage.ref(t);return Fg(o).put(r,i)}static \u0275fac=function(r){return new(r||n)(F(xi),F(Da,8),F(PG,8),F(gt),F(ge),F(bn),F(kG,8),F(OG,8),F(FG,8),F(cn,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function LG(n,e){n&1&&(K(0,"small",23),te(1,"El email es requerido"),H())}function jG(n,e){n&1&&(K(0,"small",23),te(1,"El formato es invalido"),H())}function UG(n,e){n&1&&(K(0,"small",23),te(1,"Debe seleccionar un perfil."),H())}function BG(n,e){n&1&&(K(0,"small",23),te(1,"La contrase\xF1a es requerida"),H())}var Vg=class n{constructor(e,t,r){this.formBuilder=e;this.storage=t;this.usuarioService=r}formGroup;ngOnInit(){this.formGroup=this.formBuilder.group({email:["",[Ge.required,Ge.email]],contrase\u00F1a:["",Ge.required],perfil:["",[Ge.required,Ge.nullValidator]]})}registrarse(){let e=this.formGroup.controls.email.value,t=this.formGroup.controls.contrase\u00F1a.value,r=this.formGroup.controls.perfil.value;this.usuarioService.registrar(e,t,r)}static \u0275fac=function(t){return new(t||n)(J(wa),J(E1),J(Ji))};static \u0275cmp=xt({type:n,selectors:[["app-registro"]],standalone:!0,features:[Nt],decls:36,vars:6,consts:[[1,"background"],[1,"text-center","text-lg-start"],[1,"container","py-4","bac","caja-login"],[1,"row","g-0","align-items-center"],[1,"col-lg-6","mb-5","mb-lg-0"],[1,"card","cascading-right",2,"background","hsla(0, 0%, 100%, 0.55)","backdrop-filter","blur(30px)"],[1,"card-body","p-5","shadow-5","text-center"],[1,"fw-bold","mb-5"],[3,"ngSubmit","formGroup"],[1,"form-outline","mb-4"],["for","form3Example1",1,"form-label"],["type","email","id","form3Example1","formControlName","email",1,"form-control"],["class","invalid",4,"ngIf"],[1,"mb-3"],["for","formFile",1,"form-label"],["aria-label","Default select example","formControlName","perfil",1,"form-select"],["value","Empleado"],["value","admin"],["for","form3Example4",1,"form-label"],["type","password","id","form3Example4","formControlName","contrase\xF1a",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block","mb-4",3,"disabled"],[1,"text-center"],["routerLink","/login",1,"link-info"],[1,"invalid"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),te(8,"Registro"),H(),K(9,"form",8),Be("ngSubmit",function(){return r.registrarse()}),K(10,"div",9)(11,"label",10),te(12,"Email"),H(),Le(13,"input",11),st(14,LG,2,0,"small",12)(15,jG,2,0,"small",12),H(),K(16,"div",13)(17,"label",14),te(18,"Perfil"),H(),K(19,"select",15)(20,"option",16),te(21,"Empleado"),H(),K(22,"option",17),te(23,"Admin"),H()(),st(24,UG,2,0,"small",12),H(),K(25,"div",9)(26,"label",18),te(27,"Contrase\xF1a"),H(),Le(28,"input",19),st(29,BG,2,0,"small",12),H(),K(30,"button",20),te(31,"Registrar"),H(),K(32,"div",21)(33,"p")(34,"a",22),te(35,"Inicia Sesi\xF3n"),H()()()()()()()()()()()),t&2&&(me(9),Ae("formGroup",r.formGroup),me(5),Ae("ngIf",(r.formGroup.controls.email.errors==null?null:r.formGroup.controls.email.errors.required)&&r.formGroup.controls.email.touched),me(),Ae("ngIf",(r.formGroup.controls.email.errors==null?null:r.formGroup.controls.email.errors.email)&&r.formGroup.controls.email.touched),me(9),Ae("ngIf",(r.formGroup.controls.perfil.errors==null?null:r.formGroup.controls.perfil.errors.required)&&r.formGroup.controls.perfil.touched),me(5),Ae("ngIf",(r.formGroup.controls.contrase\u00F1a.errors==null?null:r.formGroup.controls.contrase\u00F1a.errors.required)&&r.formGroup.controls.contrase\u00F1a.touched),me(),Ae("disabled",r.formGroup.invalid))},dependencies:[la,nr,on,Xn,rr,ya,va,_a,Ti,Si,Ai,ma,Ri,xo,No],styles:[".cascading-right[_ngcontent-%COMP%]{margin-right:-50px}@media (max-width: 991.98px){.cascading-right[_ngcontent-%COMP%]{margin-right:0}}.caja-login[_ngcontent-%COMP%]{margin-right:1%;padding-top:-12%;display:block}"]})};var ql=class{name;flag;constructor(e,t){this.name=e,this.flag=t}toJson(){return{name:this.name,flag:this.flag}}};var Lg=class n{constructor(e){this.http=e}getPaisesAmericano(){return this.http.get("https://restcountries.com/v3.1/region/America")}getPaisesEuropeos(){return this.http.get("https://restcountries.com/v3.1/region/europe")}static \u0275fac=function(t){return new(t||n)(F(yc))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function qG(n,e){if(n&1){let t=Ov();K(0,"li",9)(1,"button",10),Be("click",function(){let i=av(t).$implicit,o=lc(2);return uv(o.enviarEventoPaisSeleccionado(i))}),K(2,"div")(3,"h6",11),te(4),H(),Le(5,"img",12),H()()()}if(n&2){let t=e.$implicit;me(4),Qs(t.name),me(),Ae("src",t.flag,Ws)}}function HG(n,e){if(n&1&&(K(0,"div")(1,"ul",6)(2,"div")(3,"span",7),te(4,"Listado Paises"),H(),st(5,qG,6,2,"li",8),H()()()),n&2){let t=lc();me(5),Ae("ngForOf",t.auxPaisesAmericano)}}function GG(n,e){if(n&1){let t=Ov();K(0,"li",9)(1,"button",10),Be("click",function(){let i=av(t).$implicit,o=lc(2);return uv(o.enviarEventoPaisSeleccionado(i))}),K(2,"div")(3,"h6",11),te(4),H(),Le(5,"img",13),H()()()}if(n&2){let t=e.$implicit;me(4),Qs(t.name),me(),Ae("src",t.flag,Ws)}}function zG(n,e){if(n&1&&(K(0,"div")(1,"ul",6)(2,"div")(3,"span",7),te(4,"Listado Paises"),H(),st(5,GG,6,2,"li",8),H()()()),n&2){let t=lc();me(5),Ae("ngForOf",t.auxPaisesEuropeos)}}var jg=class n{constructor(e){this.apiService=e}eventoPaisSeleccionado=new He;auxPaisesAmericano=[];auxPaisesEuropeos=[];listaPaisesAmericano=[];listaPaisesEuropeos=[];continente;europeo=!1;africano=!1;ngOnInit(){this.apiService.getPaisesAmericano().subscribe(e=>{this.listaPaisesAmericano=JSON.parse(JSON.stringify(e))}),this.apiService.getPaisesEuropeos().subscribe(e=>{this.listaPaisesEuropeos=JSON.parse(JSON.stringify(e))})}continenteSeleccionado(){this.continente=="Africano"?(this.listaPaisesAmericano.length!=0&&(this.cargarListaPaisesAmericano(),this.europeo=!1,this.africano=!0),this.europeo=!1,this.africano=!0):(this.listaPaisesEuropeos.length!=0&&(this.cargarListaPaisesEuropeos(),this.africano=!1,this.europeo=!0),this.africano=!1,this.europeo=!0)}enviarEventoPaisSeleccionado(e){this.eventoPaisSeleccionado.emit(e)}cargarListaPaisesAmericano(){let e=this.listaPaisesAmericano.filter(t=>t.name.common==="Argentina"||t.name.common==="Colombia"||t.name.common==="Costa Rica"||t.name.common==="Uruguay"||t.name.common==="Chile");this.auxPaisesAmericano=[],e.forEach(t=>{this.auxPaisesAmericano.push(new ql(t.name.common,t.flags.png))})}cargarListaPaisesEuropeos(){let e=this.listaPaisesEuropeos.filter(t=>t.name.common==="Italy"||t.name.common==="Poland"||t.name.common==="France"||t.name.common==="Germany"||t.name.common==="Spain");this.auxPaisesEuropeos=[],e.forEach(t=>{this.auxPaisesEuropeos.push(new ql(t.name.common,t.flags.png))})}static \u0275fac=function(t){return new(t||n)(J(Lg))};static \u0275cmp=xt({type:n,selectors:[["app-tabla-paises"]],outputs:{eventoPaisSeleccionado:"eventoPaisSeleccionado"},standalone:!0,features:[Nt],decls:10,vars:3,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],["name","miselect",3,"ngModelChange","change","ngModel"],["value","Africano"],["value","Europeo"],[4,"ngIf"],[1,"list-group","mb-3"],[1,"text-muted"],["class","list-group-item d-flex justify-content-between lh-condensed",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"btn","btn-light",3,"click"],[1,"my-0"],["width","50","height","50","alt","",3,"src"],["width","50","height","50",3,"src"]],template:function(t,r){t&1&&(K(0,"h4",0)(1,"span",1),te(2,"Seleccione Continente"),H()(),K(3,"select",2),Lv("ngModelChange",function(o){return sS(r.continente,o)||(r.continente=o),o}),Be("change",function(){return r.continenteSeleccionado()}),K(4,"option",3),te(5,"Africano"),H(),K(6,"option",4),te(7,"Europeo"),H()(),st(8,HG,6,1,"div",5)(9,zG,6,1,"div",5)),t&2&&(me(3),Vv("ngModel",r.continente),me(5),Ae("ngIf",r.africano&&!r.europeo),me(),Ae("ngIf",!r.africano&&r.europeo))},dependencies:[nr,on,CS,Xn,rr,va,_a,Si,Ai,rw,Ri]})};var Ug=class{id;dni;edad;nombre;nroLicencia;pais;licenciaProfecional;constructor(e,t,r,i,o,s,a){this.id=e,this.dni=t,this.edad=r,this.nombre=i,this.nroLicencia=o,this.pais=s,this.licenciaProfecional=a}toJson(){return{id:this.id,dni:this.dni,edad:this.edad,nombre:this.nombre,nroLicencia:this.nroLicencia,pais:this.pais.toJson(),licenciaProfecional:this.licenciaProfecional}}};var Bg=class n{constructor(e){this.angularF=e;this.productoColeccion=this.angularF.collection(this.dbPath),this.choferes=this.productoColeccion.valueChanges(this.dbPath)}dbPath="/chofer";productoColeccion;choferes;chofer;guardarChofer(e,t,r,i,o,s){let a=this.angularF.createId(),u=new Ug(a,e,t,r,i,s,o);this.angularF.collection(this.dbPath).doc(a).set(u.toJson())}obtenerProductos(){let e=[];return this.choferes.forEach(t=>{t.forEach(r=>{e.push(r)})}),e}static \u0275fac=function(t){return new(t||n)(F(Vl))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function KG(n,e){n&1&&(K(0,"small",25),te(1,"El dni es requerido"),H())}function QG(n,e){n&1&&(K(0,"small",25),te(1,"la nombre es requerido"),H())}function YG(n,e){n&1&&(K(0,"small",25),te(1,"el edad es requerida"),H())}function ZG(n,e){n&1&&(K(0,"small",25),te(1,"el nro licencia es requerida"),H())}function JG(n,e){n&1&&(K(0,"small",25),te(1,"Debe seleccionar una opcion."),H())}var $g=class n{constructor(e,t){this.formBuilder=e;this.service=t}formGroup;paisSeleccionado;actor;ngOnInit(){this.formGroup=this.formBuilder.group({dni:["",[Ge.required,Ge.maxLength(8)]],edad:["",[Ge.required,Ge.min(18),Ge.max(50)]],nombre:["",[Ge.required]],nroLicencia:["",[Ge.required,Ge.pattern("^[0-7]{1,7}$")]],pais:["",Ge.required],licenciaProfecional:["",Ge.required]})}altaChofer(){let e=this.formGroup.controls.dni.value,t=this.formGroup.controls.edad.value,r=this.formGroup.controls.nombre.value,i=this.formGroup.controls.nroLicencia.value,o=this.formGroup.controls.licenciaProfecional.value;alert("chofer creado!"),this.formGroup.reset(),this.service.guardarChofer(e,r,i,t,o,this.paisSeleccionado)}cargarPaisSeleccionado(e){this.formGroup.controls.pais.setValue(e.name),this.paisSeleccionado=e}static \u0275fac=function(t){return new(t||n)(J(wa),J(Bg))};static \u0275cmp=xt({type:n,selectors:[["app-alta-chofer"]],standalone:!0,features:[Nt],decls:46,vars:7,consts:[[1,"container"],[1,"py-5","text-center"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"eventoPaisSeleccionado"],[1,"col-md-8","order-md-1"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","id","firstName","formControlName","dni",1,"form-control"],["class","invalid",4,"ngIf"],["type","text","id","firstName","formControlName","nombre",1,"form-control"],[1,"mb-3"],["for","edad"],["type","number","id","edad","formControlName","edad",1,"form-control"],["for","nroLicencia"],["type","number","id","nroLicencia","formControlName","nroLicencia",1,"form-control"],["for","formFile",1,"form-label"],["aria-label","Default select example","formControlName","licenciaProfecional",1,"form-select"],["value","si"],["value","no"],["for","country"],["type","text","readonly","","id","address2","formControlName","pais",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"invalid"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"h2"),te(3,"Alta Producto"),H()(),K(4,"div",2)(5,"div",3)(6,"app-tabla-paises",4),Be("eventoPaisSeleccionado",function(o){return r.cargarPaisSeleccionado(o)}),H()(),K(7,"div",5)(8,"form",6),Be("ngSubmit",function(){return r.altaChofer()}),K(9,"div",2)(10,"div",7)(11,"label",8),te(12,"dni"),H(),Le(13,"input",9),st(14,KG,2,0,"small",10),H(),K(15,"div",7)(16,"label",8),te(17,"nombre"),H(),Le(18,"input",11),st(19,QG,2,0,"small",10),H()(),K(20,"div",12)(21,"label",13),te(22,"edad"),H(),Le(23,"input",14),st(24,YG,2,0,"small",10),H(),K(25,"div",12)(26,"label",15),te(27,"nroLicencia"),H(),Le(28,"input",16),st(29,ZG,2,0,"small",10),H(),K(30,"div",12)(31,"label",17),te(32,"licenciaProfecional"),H(),K(33,"select",18)(34,"option",19),te(35,"Si"),H(),K(36,"option",20),te(37,"No"),H()(),st(38,JG,2,0,"small",10),H(),K(39,"div",12)(40,"label",21),te(41,"Pais"),H(),Le(42,"input",22),H(),Le(43,"hr",23),K(44,"button",24),te(45,"Crear Chofer"),H()()()()()),t&2&&(me(8),Ae("formGroup",r.formGroup),me(6),Ae("ngIf",(r.formGroup.controls.dni.errors==null?null:r.formGroup.controls.dni.errors.required)&&r.formGroup.controls.dni.touched),me(5),Ae("ngIf",(r.formGroup.controls.nombre.errors==null?null:r.formGroup.controls.nombre.errors.required)&&r.formGroup.controls.nombre.touched),me(5),Ae("ngIf",(r.formGroup.controls.edad.errors==null?null:r.formGroup.controls.edad.errors.required)&&r.formGroup.controls.edad.touched),me(5),Ae("ngIf",(r.formGroup.controls.nroLicencia.errors==null?null:r.formGroup.controls.nroLicencia.errors.required)&&r.formGroup.controls.nroLicencia.touched),me(9),Ae("ngIf",(r.formGroup.controls.licenciaProfecional.errors==null?null:r.formGroup.controls.licenciaProfecional.errors.required)&&r.formGroup.controls.licenciaProfecional.touched),me(6),Ae("disabled",r.formGroup.invalid))},dependencies:[nr,on,Xn,rr,ya,va,_a,Ti,iw,Si,Ai,ma,jg,Ri,xo,No]})};var I1=[{path:"",component:xf},{path:"login",component:Tg},{path:"registro",component:Vg},{path:"alta-chofer",component:$g}];var D1="auth",Hl=class{constructor(e){return e}},Gl=class{constructor(){return Wc(D1)}};var E0=new B("angularfire2.auth-instances");function Jz(n,e){let t=zf(D1,n,e);return t&&new Hl(t)}function Xz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hl(r)}}var e3={provide:Gl,deps:[[new Dt,E0]]},t3={provide:Hl,useFactory:Jz,deps:[[new Dt,E0],Ur]};function b1(n,...e){return ht("angularfire",ir.full,"auth"),_n([t3,e3,{provide:E0,useFactory:Xz(n),multi:!0,deps:[ge,It,bn,ko,[new Dt,cn],...e]}])}var C1=Ia(Em,!0);var zl=class{constructor(e){return e}},T1="firestore",I0=class{constructor(){return Wc(T1)}};var D0=new B("angularfire2.firestore-instances");function n3(n,e){let t=zf(T1,n,e);return t&&new zl(t)}function r3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zl(r)}}var i3={provide:I0,deps:[[new Dt,D0]]},o3={provide:zl,useFactory:n3,deps:[[new Dt,D0],Ur]};function A1(n,...e){return ht("angularfire",ir.full,"fst"),_n([o3,i3,{provide:D0,useFactory:r3(n),multi:!0,deps:[ge,It,bn,ko,[new Dt,Gl],[new Dt,cn],...e]}])}var S1=Ia(mP,!0);var b0={projectId:"primerparcial-7c3b1",appId:"1:648226539185:web:181ad543068d6cf30d8490",storageBucket:"primerparcial-7c3b1.appspot.com",apiKey:"AIzaSyAweIu_LqGtFMxw1s_WyF2ufnT2efCo20o",authDomain:"primerparcial-7c3b1.firebaseapp.com",messagingSenderId:"648226539185"};var R1={providers:[hS({eventCoalescing:!0}),FR(I1),EM(()=>IM(b0)),b1(()=>C1()),A1(()=>S1()),VS(),{provide:xi,useValue:b0}]};function s3(n,e){n&1&&(K(0,"button",6),te(1,"Login"),H())}var qg=class n{constructor(e){this.usuarioService=e;this.estaLogueado=this.usuarioService.estaLogueado(),this.esAdmin=this.usuarioService.isAdmin()}estaLogueado;esAdmin;ngOnInit(){}cerrarSesion(){this.usuarioService.cerrarSesion()}static \u0275fac=function(t){return new(t||n)(J(Ji))};static \u0275cmp=xt({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Nt],decls:12,vars:2,consts:[[1,"left"],["id","navbarSupportedContent",1,"right"],["routerLink",""],["routerLink","alta-chofer",3,"disabled"],["routerLink","login",4,"ngIf"],[3,"click"],["routerLink","login"]],template:function(t,r){t&1&&(K(0,"nav")(1,"div",0)(2,"h1"),te(3,"Laboratorio 4"),H()(),K(4,"div",1)(5,"button",2),te(6,"Home"),H(),K(7,"button",3),te(8,"Alta Chofer"),H(),st(9,s3,2,0,"button",4),K(10,"button",5),Be("click",function(){return r.cerrarSesion()}),te(11,"Cerrar Sesi\xF3n"),H()()()),t&2&&(me(7),Ae("disabled",!r.usuarioService.estaLogueado),me(2),Ae("ngIf",!r.estaLogueado))},dependencies:[la,nr,on,Xn,rr],styles:["nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:green;padding:10px;height:80px}.left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#fff;font-size:24px}.left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}.right[_ngcontent-%COMP%]{display:flex;gap:10px}.right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:none;color:green;padding:10px 20px;font-size:16px;border-radius:5px;min-width:125px;cursor:pointer}.right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}strong[_ngcontent-%COMP%]{text-justify:auto;text-align:center;background-color:transparent;text-decoration:underline;color:#fff;margin-right:10px;padding:10px 20px;font-size:24px}@media (max-width: 1400px){strong[_ngcontent-%COMP%]{display:none}}"]})};var Hg=class n{title="primerparcial";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xt({type:n,selectors:[["app-root"]],standalone:!0,features:[Nt],decls:2,vars:0,template:function(t,r){t&1&&Le(0,"app-navbar")(1,"router-outlet")},dependencies:[U_,qg]})};zS(Hg,R1).catch(n=>console.error(n));
